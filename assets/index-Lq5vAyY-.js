(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class o{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class ue{static fromArray(t,n){let r=n||new g;for(let s=t.length-1;s>=0;--s)r=new kt(t[s],r);return r}[Symbol.iterator](){return new sn(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof g}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function b(e,t){return new kt(e,t)}function f(e,t){return ue.fromArray(e,t)}class sn{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof g)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class g extends ue{}class kt extends ue{constructor(t,n){super(),this.head=t,this.tail=n}}class an{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return te(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;const n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let s=0;s<n;s++)if(this.rawBuffer[s]!==t.rawBuffer[s])return!1;const r=this.bitSize%8;if(r){const s=8-r;if(this.rawBuffer[n]>>s!==t.rawBuffer[n]>>s)return!1}}else{for(let s=0;s<n;s++){const i=te(this.rawBuffer,this.bitOffset,s),u=te(t.rawBuffer,t.bitOffset,s);if(i!==u)return!1}const r=this.bitSize%8;if(r){const s=te(this.rawBuffer,this.bitOffset,n),i=te(t.rawBuffer,t.bitOffset,n),u=8-r;if(s>>u!==i>>u)return!1}}return!0}get buffer(){if(at("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(at("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function te(e,t,n){if(t===0)return e[n]??0;{const r=e[n]<<t&255,s=e[n+1]>>8-t;return r|s}}const it={};function at(e,t){it[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),it[e]=!0)}class ve extends o{static isResult(t){return t instanceof ve}}class y extends ve{constructor(t){super(),this[0]=t}isOk(){return!0}}const un=e=>e instanceof y,ln=e=>e[0];class D extends ve{constructor(t){super(),this[0]=t}isOk(){return!1}}function cn(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),s=n.pop();if(r===s)continue;if(!ut(r)||!ut(s)||!gn(r,s)||on(r,s)||_n(r,s)||pn(r,s)||hn(r,s)||wn(r,s)||dn(r,s))return!1;const u=Object.getPrototypeOf(r);if(u!==null&&typeof u.equals=="function")try{if(r.equals(s))continue;return!1}catch{}let[a,l]=fn(r);const c=a(r),_=a(s);if(c.length!==_.length)return!1;for(let p of c)n.push(l(r,p),l(s,p))}return!0}function fn(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function on(e,t){return e instanceof Date&&(e>t||e<t)}function _n(e,t){return!(e instanceof an)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function pn(e,t){return Array.isArray(e)&&e.length!==t.length}function hn(e,t){return e instanceof Map&&e.size!==t.size}function wn(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function dn(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function ut(e){return typeof e=="object"&&e!==null}function gn(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function R(e,t){return t===0?0:e/t}function z(e,t,n,r,s,i,u){let a=new globalThis.Error(i);a.gleam_error=e,a.file=t,a.module=n,a.line=r,a.function=s,a.fn=s;for(let l in u)a[l]=u[l];return a}class q extends o{}class L extends o{}class Ye extends o{}function At(e){return e instanceof q?new Ye:e instanceof L?e:new q}class S extends o{constructor(t){super(),this[0]=t}}class St extends o{}class P extends o{}class se extends o{}function J(e,t){for(;;){let n=e,r=t;if(n instanceof g)return r;{let s=n.head;e=n.tail,t=b(s,r)}}}function T(e){return J(e,f([]))}function bn(e){if(e instanceof g)return new D(void 0);{let t=e.head;return new y(t)}}function yn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return T(i);{let u=r.head,a=r.tail,l,c=s(u);if(c instanceof y){let p=c[0];l=b(p,i)}else l=i;let _=l;e=a,t=s,n=_}}}function xn(e,t){return yn(e,t,f([]))}function $n(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return T(i);{let u=r.head;e=r.tail,t=s,n=b(s(u),i)}}}function ee(e,t){return $n(e,t,f([]))}function vn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof g)return T(a);{let l=s.head,c=s.tail,_=b(i(l,u),a);e=c,t=i,n=u+1,r=_}}}function mt(e,t){return vn(e,t,0,f([]))}function kn(e,t){for(;;){let n=e,r=t;if(n instanceof g)return T(r);{let s=n.head;e=n.tail,t=J(s,r)}}}function An(e){return kn(e,f([]))}function lt(e,t){for(;;){let n=e,r=t;if(n instanceof g)return new D(void 0);{let s=n.head,i=n.tail;if(r(s))return new y(s);e=i,t=r}}}function Sn(e,t,n,r,s,i){for(;;){let u=e,a=t,l=n,c=r,_=s,p=i,h=b(_,l);if(u instanceof g)return c instanceof P?b(T(h),p):b(h,p);{let d=u.head,w=u.tail,x=a(_,d);if(c instanceof P)if(x instanceof q)e=w,t=a,n=h,r=c,s=d,i=p;else if(x instanceof L)e=w,t=a,n=h,r=c,s=d,i=p;else{let v;c instanceof P?v=b(T(h),p):v=b(h,p);let E=v;if(w instanceof g)return b(f([d]),E);{let B=w.head,O=w.tail,k,j=a(d,B);j instanceof q?k=new P:j instanceof L?k=new P:k=new se;let U=k;e=O,t=a,n=f([d]),r=U,s=B,i=E}}else if(x instanceof q){let v;c instanceof P?v=b(T(h),p):v=b(h,p);let E=v;if(w instanceof g)return b(f([d]),E);{let B=w.head,O=w.tail,k,j=a(d,B);j instanceof q?k=new P:j instanceof L?k=new P:k=new se;let U=k;e=O,t=a,n=f([d]),r=U,s=B,i=E}}else if(x instanceof L){let v;c instanceof P?v=b(T(h),p):v=b(h,p);let E=v;if(w instanceof g)return b(f([d]),E);{let B=w.head,O=w.tail,k,j=a(d,B);j instanceof q?k=new P:j instanceof L?k=new P:k=new se;let U=k;e=O,t=a,n=f([d]),r=U,s=B,i=E}}else e=w,t=a,n=h,r=c,s=d,i=p}}}function mn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof g)return J(i,a);if(i instanceof g)return J(s,a);{let l=s.head,c=s.tail,_=i.head,p=i.tail,h=u(l,_);h instanceof q?(e=c,t=i,n=u,r=b(l,a)):(h instanceof L,e=s,t=p,n=u,r=b(_,a))}}}function En(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return T(i);{let u=r.tail;if(u instanceof g){let a=r.head;return T(b(T(a),i))}else{let a=r.head,l=u.head,c=u.tail,_=mn(a,l,s,f([]));e=c,t=s,n=b(_,i)}}}}function Pn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof g)return J(i,a);if(i instanceof g)return J(s,a);{let l=s.head,c=s.tail,_=i.head,p=i.tail,h=u(l,_);h instanceof q?(e=s,t=p,n=u,r=b(_,a)):(h instanceof L,e=c,t=i,n=u,r=b(l,a))}}}function Tn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return T(i);{let u=r.tail;if(u instanceof g){let a=r.head;return T(b(T(a),i))}else{let a=r.head,l=u.head,c=u.tail,_=Pn(a,l,s,f([]));e=c,t=s,n=b(_,i)}}}}function Bn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return r;if(s instanceof P){if(r.tail instanceof g)return r.head;e=En(r,i,f([])),t=new se,n=i}else if(r.tail instanceof g){let a=r.head;return T(a)}else e=Tn(r,i,f([])),t=new P,n=i}}function Et(e,t){if(e instanceof g)return e;{let n=e.tail;if(n instanceof g)return e;{let r=e.head,s=n.head,i=n.tail,u,a=t(r,s);a instanceof q?u=new P:a instanceof L?u=new P:u=new se;let l=u,c=Sn(i,t,f([r]),l,s,f([]));return Bn(c,new P,t)}}}function On(e,t,n){for(;;){let r=e,s=t,i=n,u=Mt(r,s);if(u instanceof q)e=r,t=s-1,n=b(s,i);else{if(u instanceof L)return b(s,i);e=r,t=s+1,n=b(s,i)}}}function He(e,t){return On(e,t,f([]))}function Mn(e){return e.toString()}function Be(e){if(e==="")return 0;const t=Pt(e);if(t){let n=0;for(const r of t)n++;return n}else return e.match(/./gsu).length}function qn(e){const t=Pt(e);return t?ue.fromArray(Array.from(t).map(n=>n.segment)):ue.fromArray(e.match(/./gsu))}let ct;function Pt(e){if(globalThis.Intl&&Intl.Segmenter)return ct||=new Intl.Segmenter,ct.segment(e)[Symbol.iterator]()}function zn(e){return Math.ceil(e)}function Ln(e){return Math.floor(e)}function ft(e){return Math.round(e)}function jn(e,t){return Math.pow(e,t)}function pe(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function In(e,t){return e===t?new L:e<t?new q:new Ye}function Tt(e,t){return e<t?e:t}function Bt(e,t){return e>t?e:t}function Ot(e,t,n){let s=Tt(e,n);return Bt(s,t)}function ot(e){return e>=0?e:0-e}function Oe(e,t){let n=zn(t)-t>0;return e<0&&n||e===0&&t<0?new D(void 0):new y(jn(e,t))}function Kn(e){return Oe(e,.5)}function le(e){return-1*e}function _t(e){return e>=0?ft(e):0-ft(le(e))}function Rn(e,t){for(;;){let n=e,r=t;if(n instanceof g)return r;{let s=n.head;e=n.tail,t=s+r}}}function Nn(e){return Rn(e,0)}function pt(e,t){if(t===0)return new D(void 0);{let n=t;return new y(R(e,n))}}function Cn(e,t){return e+t}function ht(e,t){return e*t}function Fn(e,t){return e-t}function Mt(e,t){return e===t?new L:e<t?new q:new Ye}function Dn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return i;{let u=r.head;e=r.tail,t=s,n=i+s+u}}}function Un(e,t){if(e instanceof g)return"";{let n=e.head,r=e.tail;return Dn(r,t,n)}}function Xn(e,t){return qn(e)}function qt(e,t){if(e instanceof y){let n=e[0];return new y(t(n))}else return e}function he(e,t){if(e instanceof y){let n=e[0];return t(n)}else return e}function zt(e,t){return e instanceof y?e[0]:t}const wt="src/gleam_community/colour.gleam";class We extends o{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class Yn extends o{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function we(e){return e>1||e<0?new D(void 0):new y(e)}function Ee(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,u=s*2,a=s*3;return i<1?t+(n-t)*s*6:u<1?n:a<2?t+(n-t)*(2/3-s)*6:t}function Hn(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let u=s,a=n*2-u,l=Ee(e+1/3,a,u),c=Ee(e,a,u),_=Ee(e-1/3,a,u);return[l,c,_,r]}function Me(e,t,n,r){return he(we(e),s=>he(we(t),i=>he(we(n),u=>he(we(r),a=>new y(new Yn(s,i,u,a))))))}function qe(e,t,n){return Me(e,t,n,1)}function Wn(e){if(e instanceof We){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return Hn(t,n,r,s)}}function dt(e){let t=Wn(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let u=l=>{let c,p=ht(l,1e4),h=_t(p),d=h;c=pt(d,100);let w=c,x;if(w instanceof y)x=w[0];else throw z("let_assert",wt,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:w,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return x},a=l=>{let c,p=ht(l,1e3),h=_t(p),d=h;c=pt(d,1e3);let w=c,x;if(w instanceof y)x=w[0];else throw z("let_assert",wt,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:w,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return x};return Un(f(["rgba(",pe(u(n))+"%,",pe(u(r))+"%,",pe(u(s))+"%,",pe(a(i)),")"]),"")}const Vn=new We(.9607843137254902,.4745098039215686,0,1),Gn=new We(1,1,1,1);function Jn(e){return Math.sin(e)}function Zn(){return Math.PI}function Qn(e,t){return Math.atan2(e,t)}function er(e){return Math.cos(e)}function tr(e,t){return Qn(e,t)}function nr(e){return er(e)}function ye(e){return Jn(e)}function Ve(e,t){let n=e*nr(t),r=e*ye(t);return[n,r]}function Ge(){return Zn()}function ie(){return 2*Ge()}function rr(){return Math.PI}class Lt extends o{}class Je extends o{constructor(t,n){super(),this[0]=t,this.closed=n}}class jt extends o{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class sr extends o{constructor(t,n){super(),this.text=t,this.style=n}}class ir extends o{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class It extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ze extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class ar extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class Kt extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class Qe extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class Rt extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class Nt extends o{constructor(t){super(),this[0]=t}}class ur extends o{}class Ct extends o{}class lr extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class ze extends o{constructor(t){super(),this[0]=t}}function Ft(e){return new ze(e)}function et(){return new Lt}function tt(e){return new Je(e,!0)}function $(e){return new Je(e,!1)}function ke(e,t){return tt(f([[0,0],[e,0],[e,t],[0,t]]))}function m(e,t,n){return new Kt(e,[t,n])}function _e(e,t){return m(e,t,0)}function nt(e,t){return m(e,0,t)}function cr(e,t){return new Qe(e,[t,1])}function H(e,t){return new Qe(e,[t,t])}function Dt(e,t){return new Rt(e,t)}function K(e,t){return new It(e,t)}function Ut(e,t,n){return new Ze(e,new lr(t,n))}function N(e){return new Ze(e,new Ct)}function A(e){return new Nt(e)}function rt(e){return new jt(e,new ze(0),new ze(2*rr()))}class Le extends o{constructor(t){super(),this[0]=t}}class je extends o{constructor(t){super(),this[0]=t}}class fr extends o{constructor(t){super(),this[0]=t}}class Ie extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ke extends o{constructor(t){super(),this[0]=t}}class Xt extends o{constructor(t){super(),this[0]=t}}class Yt extends o{}class Ht extends o{}class Wt extends o{}class Vt extends o{}class or extends o{}class _r extends o{}class pr extends o{}class hr extends o{}class wr extends o{}class dr extends o{}class gr extends o{}class br extends o{}class yr extends o{}class Re extends o{}class xr extends o{}class de extends o{}class $r extends o{}class vr extends o{}function kr(e){return document.querySelector(e).getContext("2d")}function Gt(e){window.requestAnimationFrame(t=>{e(t)})}function Pe(e,t){window.addEventListener(e,t)}function Ar(e){return e.keyCode}function W(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function V(e){return window.PAINT_STATE?e in window.PAINT_STATE?new y(window.PAINT_STATE[e]):new D(void 0):new D(void 0)}function Sr(e){return e.canvas.clientWidth}function mr(e){return e.canvas.clientHeight}function Er(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function Pr(e,t,n,r){let s=un(t)?ln(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function Tr(e){e.reset()}function Br(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function Or(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const u of t){let a=u[0],l=u[1];i?e.lineTo(a,l):(e.moveTo(a,l),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function Mr(e,t,n){e.font=n,e.fillText(t,0,0)}function X(e){e.save()}function Y(e){e.restore()}function qr(e,t){e.fillStyle=t}function zr(e,t){e.strokeStyle=t}function Lr(e,t){e.lineWidth=t}function jr(e,t,n){e.translate(t,n)}function Ir(e,t,n){e.scale(t,n)}function Kr(e,t){e.rotate(t)}function Rr(e,t,n,r){e.drawImage(t,0,0,n,r)}function Nr(e,t){e.imageSmoothingEnabled=t}const ae="src/paint/canvas.gleam";class Cr extends o{constructor(t,n){super(),this.width=t,this.height=n}}class ge extends o{constructor(t,n){super(),this.fill=t,this.stroke=n}}function C(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof Lt)return;if(r instanceof Je){let u=r[0],a=r.closed;return Or(s,u,a,i.fill,i.stroke)}else if(r instanceof jt){let u=r.radius,a=r.start,l=r.end,c;c=a[0];let _;return _=l[0],Br(s,u,c,_,i.fill,i.stroke)}else if(r instanceof sr){let u=r.text,a=r.style,l,c;return l=a.size_px,c=a.font_family,X(s),Mr(s,u,Mn(l)+"px "+c),Y(s)}else if(r instanceof ir){let u=r.width_px,a=r.height_px,l=r[0].id,c=V(l),_;if(c instanceof y)_=c[0];else throw z("let_assert",ae,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:c,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return Rr(s,_,u,a)}else if(r instanceof It){let u=r[0],a=r[1];return X(s),qr(s,dt(a)),C(u,s,new ge(!0,i.stroke)),Y(s)}else if(r instanceof Ze){let u=r[0],a=r[1];if(a instanceof Ct)e=u,t=s,n=new ge(i.fill,!1);else{let l=a[0],c=a[1];return X(s),zr(s,dt(l)),Lr(s,c),C(u,s,new ge(i.fill,!0)),Y(s)}}else if(r instanceof ar){let u=r[0],a=r[1];return X(s),Nr(s,a instanceof ur),C(u,s,i),Y(s)}else if(r instanceof Kt){let u=r[0],a=r[1],l,c;return l=a[0],c=a[1],X(s),jr(s,l,c),C(u,s,i),Y(s)}else if(r instanceof Qe){let u=r[0],a=r[1],l,c;return l=a[0],c=a[1],X(s),Ir(s,l,c),C(u,s,i),Y(s)}else if(r instanceof Rt){let u=r[0],a=r[1],l;return l=a[0],X(s),Kr(s,l),C(u,s,i),Y(s)}else{let u=r[0];if(u instanceof g)return;{let a=u.head,l=u.tail;C(a,s,i),e=new Nt(l),t=s,n=i}}}}function Fr(e){return e===32?new S(new or):e===37?new S(new Yt):e===38?new S(new Wt):e===39?new S(new Ht):e===40?new S(new Vt):e===87?new S(new _r):e===65?new S(new pr):e===83?new S(new hr):e===68?new S(new wr):e===90?new S(new dr):e===88?new S(new gr):e===67?new S(new br):e===18?new S(new yr):e===27?new S(new Re):e===8?new S(new xr):new St}const Dr=new ge(!1,!0);function Jt(e,t,n,r){return s=>{let i=V(r),u;if(i instanceof y)u=i[0];else throw z("let_assert",ae,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let a=n(u,new Le(s));W(a,r);let l=t(a);return Tr(e),C(l,e,Dr),Gt(Jt(e,t,n,r))}}function Ur(e,t,n,r){let s=kr(r),i=e(new Cr(Sr(s),mr(s)));W(i,r);let u=(l,c)=>Pe(l,_=>{let p=Fr(Ar(_));if(p instanceof S){let h=p[0],d=V(r),w;if(d instanceof y)w=d[0];else throw z("let_assert",ae,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:d,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let x=t(w,c(h));return W(x,r)}else return});u("keydown",l=>new je(l)),u("keyup",l=>new fr(l)),Pe("mousemove",l=>{let c=Er(s,l),_,p;_=c[0],p=c[1];let h=V(r),d;if(h instanceof y)d=h[0];else throw z("let_assert",ae,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:h,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let w=t(d,new Ie(_,p));W(w,r)});let a=(l,c,_)=>Pe(l,p=>{let h="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,d=V(h);W(p,h);let w=O=>Pr(p,d,O,_),x=O=>{let k=V(r),j;if(k instanceof y)j=k[0];else throw z("let_assert",ae,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:k,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let U=t(j,c(O));return W(U,r)};w(0)&&x(new de),w(1)&&x(new $r),w(2)&&x(new vr)});return a("mousedown",l=>new Ke(l),!0),a("mouseup",l=>new Xt(l),!1),Gt(Jt(s,n,t,r))}class I extends o{constructor(t,n){super(),this.x=t,this.y=n}}function Xr(e){return f([e.x,e.y])}function Zt(e,t,n){return new I(n(e.x,t.x),n(e.y,t.y))}const Yr="src/vec/vec2f.gleam";function Hr(e,t){return Zt(e,t,Cn)}function Wr(e){let n=Xr(e),r=ee(n,s=>s*s);return Nn(r)}function Vr(e,t){let r=Zt(e,t,Fn);return Wr(r)}function Qt(e,t){let n,r=Vr(e,t);n=Kn(r);let s=n,i;if(s instanceof y)i=s[0];else throw z("let_assert",Yr,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const Gr=e=>{window.open(e,"_blank")},Z=300,Q=300,G=new I(150,150),Jr=.005,Zr=.4,Qr=.09,be=.7853981634,Ae=12,Ne=3;function Ce(e,t){let n;if(e==="a")n=$(f([[3,1],[11,1],[11,11],[1,11],[1,5],[11,5]]));else if(e==="b")n=$(f([[1,3],[11,3],[11,11],[1,11],[1,-1]]));else if(e==="c")n=$(f([[11,11],[1,11],[1,1],[11,1],[11,3]]));else if(e==="d"){let s=Ce("b",t),i=cr(s,-1);n=_e(i,12)}else if(e==="e")n=$(f([[9,11],[1,11],[1,1],[11,1],[11,7],[1,7]]));else if(e==="g")n=A(f([$(f([[0,1],[10,1],[10,7],[1,7],[1,1]])),$(f([[3,7],[3,11],[11,11],[11,13]]))]));else if(e==="i")n=A(f([$(f([[6,-2],[6,0]])),$(f([[2,3],[6,3],[6,11]])),$(f([[0,11],[12,11]]))]));else if(e==="j")n=A(f([$(f([[11,-2],[11,0]])),$(f([[11,2],[11,11],[1,11],[1,9]]))]));else if(e==="l")n=$(f([[12,11],[1,11],[1,0]]));else if(e==="m")n=A(f([$(f([[1,12],[1,1],[11,1],[11,12]])),$(f([[6,1],[6,12]]))]));else if(e==="n")n=$(f([[1,12],[1,1],[9,1],[9,3],[11,3],[11,12]]));else if(e==="o")n=$(f([[0,1],[11,1],[11,11],[1,11],[1,1]]));else if(e==="r")n=$(f([[1,12],[1,1],[11,1],[11,3]]));else if(e==="s")n=$(f([[11,1],[2,1],[2,6],[11,6],[11,11],[1,11],[1,9]]));else if(e==="t")n=A(f([$(f([[0,2],[12,2]])),$(f([[5,-1],[5,11],[12,11]]))]));else if(e==="u")n=$(f([[11,0],[11,11],[1,11],[1,0]]));else if(e==="v")n=$(f([[11,0],[11,11],[4,11],[1,8],[1,0]]));else if(e==="y")n=A(f([$(f([[11,0],[11,13],[1,13]])),$(f([[11,9],[1,9],[1,0]]))]));else if(e==="←")n=A(f([$(f([[6,11],[5,11],[1,7],[1,5],[5,1],[6,1]])),$(f([[1,6],[12,6]]))]));else if(e==="→"){let s=Ce("←",t),i=Dt(s,Ft(Ge()));n=m(i,12,12)}else n=et();return Ut(n,t,2)}function es(e,t,n){let r=ye(t/400)*.1,s=ye(t/1600)*6,i=Ce(e,n),u=K(i,n),a=N(u),l=m(a,-6,-6),c=Dt(l,Ft(r));return m(c,6,6+s)}function ce(e,t,n){let r=Xn(e),s=mt(r,(i,u)=>{let a=es(i,t+u*8e3,n);return _e(a,u*(Ae+Ne))});return A(s)}function fe(e,t){let n=Be(e);return((Ae+Ne)*n-Ne)*t}const ne="src/app.gleam";class M extends o{constructor(t,n,r,s,i,u,a,l,c,_){super(),this.avatar=t,this.camera=n,this.speed=r,this.objects=s,this.mouse_pos=i,this.drag=u,this.current_time=a,this.paused=l,this.press_regions=c,this.consts=_}}class Se extends o{constructor(t,n){super(),this.pos=t,this.dir=n}}let en=class extends o{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class xe extends o{}class ts extends o{constructor(t){super(),this.collected_time=t}}class tn extends o{constructor(t,n){super(),this.lagging_dir=t,this.start_move_time=n}}class me extends o{}class gt extends o{constructor(t){super(),this.start_pos=t}}class F extends o{}class Fe extends o{}class nn extends o{constructor(t,n,r,s,i){super(),this.x=t,this.y=n,this.width=r,this.height=s,this.on_press=i}}class ns extends o{constructor(t,n,r,s,i,u,a,l){super(),this.background_picture=t,this.shadow_picture=n,this.color_dark_blue=r,this.color_white=s,this.color_white_transparent=i,this.color_yellow=u,this.color_orange=a,this.color_dark_blue_transparent=l}}function rs(e){let t,n=e.objects;t=ee(n,s=>cn(s.kind,new xe)&&Qt(e.avatar.pos,s.pos)<.8?new en(s.pos,s.height,new ts(e.current_time)):s);let r=t;return new M(e.avatar,e.camera,e.speed,r,e.mouse_pos,e.drag,e.current_time,e.paused,e.press_regions,e.consts)}function re(e,t){return new M(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new me,e.current_time,t,e.press_regions,e.consts)}function De(e){return e instanceof F?new Fe:new F}function ss(e,t){let n=e.speed*t,r=Ve(n,e.avatar.dir),s,i;return s=r[0],i=r[1],new M((()=>{let u=e.avatar;return new Se(Hr(e.avatar.pos,new I(s,i)),u.dir)})(),e.camera,e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.press_regions,e.consts)}function bt(e,t){return new M(e.avatar,e.camera,Ot(e.speed+t*(e.speed*.05),Jr,Zr),e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.press_regions,e.consts)}function is(e,t){return new Se(e.pos,e.dir+Qr*t)}function as(e,t){let n="cielos",r=1.5,s=fe(n,r),i="by agj",u=.75,a=fe(i,u),l=A(f([(()=>{let c=ce(n,e,t.color_dark_blue);return H(c,r)})(),(()=>{let c=ce(i,e,t.color_dark_blue),_=H(c,u);return m(_,s-a,40)})()]));return _e(l,Z*.5-s*.5)}function us(e,t){let n=f(["move ←→","collect stars"]),r=.75,s,u=Et(n,(h,d)=>At(Mt(Be(h),Be(d)))),a=bn(u),l=qt(a,h=>fe(h,r));s=zt(l,0);let c=s,_=A(mt(n,(d,w)=>{let x=ce(d,e,t.color_dark_blue);return nt(x,Ae*2.5*w)})),p=H(_,r);return _e(p,Z*.5-c*.5)}function ls(){return new nn(0,Q-30,30,30,e=>re(e,De(e.paused)))}function yt(e,t,n){let r=tt((()=>{let i=He(0,10);return ee(i,u=>{let a=ie()/10*u+n,l;return u%2===0?l=250:l=140,Ve(l,a)})})()),s=K(r,e);return Ut(s,t,10)}function xt(e,t,n){let r=e/2e3;if(n instanceof S){let s=n[0];if(e-s<=1e3){let i=rt(1e3),u=K(i,t.color_white);return N(u)}else return yt(t.color_white,t.color_yellow,r)}else return yt(t.color_yellow,t.color_orange,r)}function $t(e,t){let n;t?n=e.color_white:n=e.color_yellow;let r=n,s=rt(1),i=K(s,r);return N(i)}function cs(e,t,n,r){if(n)return e instanceof xe?$t(r,!1):$t(r,!0);if(e instanceof xe)return xt(t,r,new St);{let s=e.collected_time;return xt(t,r,new S(s))}}function fs(e){let t=ke(200,5e3),n=_e(t,-100),r=K(n,e);return N(r)}function os(e){let t=ke(4,12),n=A(f([t,m(t,8,0)])),r=K(n,e);return N(r)}function _s(e){let t=tt(f([[2,0],[11,6],[2,12]])),n=K(t,e);return N(n)}function ps(e,t,n){return A(f([(()=>{let r=rt(15),s=K(r,n.color_white_transparent);return N(s)})(),(()=>{if(e instanceof F){let r="esc",s=.5,i,u=ce(r,t,n.color_white_transparent);i=H(u,s);let a=i;return A(f([(()=>{let l=_s(n.color_dark_blue);return m(l,-6,-6)})(),m(a,fe(r,s)*-.5,-27)]))}else{let r=os(n.color_dark_blue);return m(r,-6,-6)}})()]))}function rn(e,t,n){let r=50,s=e.start_move_time,i=s+r;if(n>=i)return t;{let a=R(n-s,r);return t*a+e.lagging_dir*(1-a)}}function Ue(e,t){return new M(is(e.avatar,t),new tn(rn(e.camera,e.avatar.dir,e.current_time),e.current_time),e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.press_regions,e.consts)}function hs(e,t){let n=e.drag;if(n instanceof me)return e;{let r=n.start_pos,s=2,i=1e-5,u=e.mouse_pos.x-r.x,a,l;if(u>0){let v=Bt(0,u-s);l=Oe(v,2)}else{let v=Tt(0,u+s),E=Oe(v,2);l=qt(E,le)}a=zt(l,0);let p=a,h,d=p*i;h=Ot(d,-.03,.03);let x=h*t;return Ue(e,x)}}function ws(e,t){if(e.paused instanceof F)if(t instanceof Le){let r=t[0];return new M(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.press_regions,e.consts)}else{if(t instanceof je)return t[0]instanceof Re?re(e,De(e.paused)):e;if(t instanceof Ie){let r=t[0],s=t[1];return new M(e.avatar,e.camera,e.speed,e.objects,new I(r,s),e.drag,e.current_time,e.paused,e.press_regions,e.consts)}else if(t instanceof Ke)if(t[0]instanceof de){let s,i=e.press_regions;s=lt(i,a=>e.mouse_pos.x>=a.x&&e.mouse_pos.x<a.x+a.width&&e.mouse_pos.y>=a.y&&e.mouse_pos.y<a.y+a.height);let u=s;return u instanceof y?u[0].on_press(e):e.paused instanceof F?re(e,new Fe):new M(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new gt(e.mouse_pos),e.current_time,e.paused,e.press_regions,e.consts)}else return e;else return e}else if(t instanceof Le){let r=t[0],s=r-e.current_time,i=new M(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.press_regions,e.consts),u=ss(i,s),a=hs(u,s);return rs(a)}else if(t instanceof je){let r=t[0];return r instanceof Yt?Ue(e,-1):r instanceof Ht?Ue(e,1):r instanceof Wt?bt(e,1):r instanceof Vt?bt(e,-1):r instanceof Re?re(e,De(e.paused)):e}else if(t instanceof Ie){let r=t[0],s=t[1];return new M(e.avatar,e.camera,e.speed,e.objects,new I(r,s),e.drag,e.current_time,e.paused,e.press_regions,e.consts)}else if(t instanceof Ke)if(t[0]instanceof de){let s,i=e.press_regions;s=lt(i,a=>e.mouse_pos.x>=a.x&&e.mouse_pos.x<a.x+a.width&&e.mouse_pos.y>=a.y&&e.mouse_pos.y<a.y+a.height);let u=s;return u instanceof y?u[0].on_press(e):e.paused instanceof F?re(e,new Fe):new M(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new gt(e.mouse_pos),e.current_time,e.paused,e.press_regions,e.consts)}else return e;else return t instanceof Xt&&t[0]instanceof de?new M(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new me,e.current_time,e.paused,e.press_regions,e.consts):e}function ds(e){return R(1,R(e,.2)+1)}function gs(e,t){let n=Ve(e,t),r,s;return r=n[0],s=n[1],new I(r,s)}function Xe(e,t,n,r){return tr(r-t,n-e)}function bs(e,t,n,r,s){let i=Xe(0,0,n,e.height),u=n>50,a;u?a=1:a=ds(n);let l=a,c=new I(R(t*G.x,be),le(R(i*G.x,be))),_,p=cs(e.kind,r,u,s),h=H(p,l);_=m(h,c.x,c.y);let d=_,w;if(u)w=et();else{let E=Xe(0,0,n,-10),B=new I(c.x,le(R(E*G.x,be))),O=s.shadow_picture,k=H(O,l);w=m(k,B.x,B.y)}return A(f([w,d]))}function ys(e){for(;;){let t=e,n=ie(),r=Ge(),s=le(r),i=t;if(i>r)e=i-n;else{let u=t;if(u<=s)e=u+n;else return t}}}function Te(e,t,n){return(t-e)*n+e}function vt(e,t,n,r,s,i,u,a,l){let c=l,_=Ln(R(a,c)),p=He(0,l),h=ee(p,d=>{let w=d,x=R(w,c-1),v=qe(Te(e,r,x),Te(t,s,x),Te(n,i,x)),E;if(v instanceof y)E=v[0];else throw z("let_assert",ne,"app",709,"view_gradient","Pattern match failed, no pattern matched the value.",{value:v,start:18031,end:18258,pattern_start:18042,pattern_end:18054});let B=ke(u,_),O=nt(B,_*w),k=K(O,E);return N(k)});return A(h)}function xs(){let e=f([vt(.85,.6,.9,.7,.4,.98,Z,Q/2,50),(()=>{let t=vt(.6,.4,.95,.6,.7,.8,Z,Q/2,50);return nt(t,G.y)})()]);return A(e)}const oe=60,$e=20;function $s(){return f([new nn(Z-oe-2,Q-$e-2,oe,$e,e=>(Gr("https://github.com/agj/cielos"),e))])}function vs(e){let t=.8*ie(),n=Me(0,1,1,.5),r;if(n instanceof y)r=n[0];else throw z("let_assert",ne,"app",25,"init","Pattern match failed, no pattern matched the value.",{value:n,start:533,end:610,pattern_start:544,pattern_end:571});let s=qe(.6,.7,.7),i;if(s instanceof y)i=s[0];else throw z("let_assert",ne,"app",26,"init","Pattern match failed, no pattern matched the value.",{value:s,start:613,end:676,pattern_start:624,pattern_end:643});let u=Me(.75,.5,.4,.05),a;if(u instanceof y)a=u[0];else throw z("let_assert",ne,"app",27,"init","Pattern match failed, no pattern matched the value.",{value:u,start:679,end:766,pattern_start:690,pattern_end:721});let l=qe(.12,1,.7),c;if(l instanceof y)c=l[0];else throw z("let_assert",ne,"app",29,"init","Pattern match failed, no pattern matched the value.",{value:l,start:769,end:830,pattern_start:780,pattern_end:796});let _,p=He(0,200);_=ee(p,d=>{let w=d,x=gs((w+1)*2+10,w/20*ie()),v=ye(w/5*ie());return new en(x,v,new xe)});let h=_;return new M(new Se(new I(0,0),t),new tn(t,0),.01,h,new I(0,0),new me,0,new F,An(f([f([ls()]),$s()])),new ns(xs(),fs(a),i,Gn,r,c,Vn,a))}function ks(e,t,n){let r=.5,s=fe(e,r),i=A(f([ke(oe,20),(()=>{let a=ce(e,t,n.color_dark_blue),l=H(a,r);return m(l,oe*.5-s*.5,$e*.5-Ae*r*.5)})()])),u=K(i,n.color_white_transparent);return N(u)}function As(e,t){let n=ks("about",e,t);return m(n,Z-oe-2,Q-$e-2)}function Ss(e){return A(f([e.paused instanceof F?A(f([(()=>{let n=as(e.current_time,e.consts);return m(n,0,80)})(),(()=>{let n=us(e.current_time,e.consts);return m(n,0,200)})(),As(e.current_time,e.consts)])):et(),(()=>{let t=ps(e.paused,e.current_time,e.consts);return m(t,17,Q-17)})()]))}function ms(e){let t,n=e.avatar;t=new Se(n.pos,rn(e.camera,e.avatar.dir,e.current_time));let r=t,s,i=A((()=>{let a=e.objects,l=xn(a,_=>{let p=Xe(r.pos.x,r.pos.y,_.pos.x,_.pos.y),h=ys(p-r.dir),d=ot(Qt(r.pos,_.pos));return ot(h)<=be?new y([_,h,d]):new D(void 0)}),c=Et(l,(_,p)=>At(In(_[2],p[2])));return ee(c,_=>bs(_[0],_[1],_[2],e.current_time,e.consts))})());s=m(i,G.x,G.y);let u=s;return A(f([e.consts.background_picture,u,Ss(e)]))}function Es(){return Ur(vs,ws,ms,"#app")}Es();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const st=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",st("mousedown",1));window.addEventListener("touchend",st("mouseup",0));window.addEventListener("touchmove",st("mousemove",void 0));
