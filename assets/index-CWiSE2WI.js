(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class f{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class ke{static fromArray(t,n){let r=n||new g;for(let s=t.length-1;s>=0;--s)r=new Ye(t[s],r);return r}[Symbol.iterator](){return new vt(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof g}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function w(e,t){return new Ye(e,t)}function x(e,t){return ke.fromArray(e,t)}class vt{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof g)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class g extends ke{}class Ye extends ke{constructor(t,n){super(),this.head=t,this.tail=n}}class ue extends f{static isResult(t){return t instanceof ue}}class b extends ue{constructor(t){super(),this[0]=t}isOk(){return!0}}const bt=e=>e instanceof b,yt=e=>e[0];class z extends ue{constructor(t){super(),this[0]=t}isOk(){return!1}}function K(e,t){return t===0?0:e/t}function E(e,t,n,r,s,i,l){let a=new globalThis.Error(i);a.gleam_error=e,a.file=t,a.module=n,a.line=r,a.function=s,a.fn=s;for(let u in l)a[u]=l[u];return a}class T extends f{}class A extends f{}class me extends f{}function $t(e){return e instanceof T?new me:e instanceof A?e:new T}class k extends f{constructor(t){super(),this[0]=t}}class kt extends f{}class m extends f{}class W extends f{}function H(e,t){for(;;){let n=e,r=t;if(n instanceof g)return r;{let s=n.head;e=n.tail,t=w(s,r)}}}function P(e){return H(e,x([]))}function mt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let l=r.head,a=r.tail,u,c=s(l);if(c instanceof b){let _=c[0];u=w(_,i)}else u=i;let o=u;e=a,t=s,n=o}}}function Pt(e,t){return mt(e,t,x([]))}function Tt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let l=r.head;e=r.tail,t=s,n=w(s(l),i)}}}function ee(e,t){return Tt(e,t,x([]))}function Et(e,t){for(;;){let n=e,r=t;if(n instanceof g)return P(r);{let s=n.head;e=n.tail,t=H(s,r)}}}function St(e){return Et(e,x([]))}function At(e,t){return St(ee(e,t))}function Lt(e,t,n,r,s,i){for(;;){let l=e,a=t,u=n,c=r,o=s,_=i,h=w(o,u);if(l instanceof g)return c instanceof m?w(P(h),_):w(h,_);{let p=l.head,d=l.tail,v=a(o,p);if(c instanceof m)if(v instanceof T)e=d,t=a,n=h,r=c,s=p,i=_;else if(v instanceof A)e=d,t=a,n=h,r=c,s=p,i=_;else{let $;c instanceof m?$=w(P(h),_):$=w(h,_);let S=$;if(d instanceof g)return w(x([p]),S);{let L=d.head,M=d.tail,y,O=a(p,L);O instanceof T?y=new m:O instanceof A?y=new m:y=new W;let R=y;e=M,t=a,n=x([p]),r=R,s=L,i=S}}else if(v instanceof T){let $;c instanceof m?$=w(P(h),_):$=w(h,_);let S=$;if(d instanceof g)return w(x([p]),S);{let L=d.head,M=d.tail,y,O=a(p,L);O instanceof T?y=new m:O instanceof A?y=new m:y=new W;let R=y;e=M,t=a,n=x([p]),r=R,s=L,i=S}}else if(v instanceof A){let $;c instanceof m?$=w(P(h),_):$=w(h,_);let S=$;if(d instanceof g)return w(x([p]),S);{let L=d.head,M=d.tail,y,O=a(p,L);O instanceof T?y=new m:O instanceof A?y=new m:y=new W;let R=y;e=M,t=a,n=x([p]),r=R,s=L,i=S}}else e=d,t=a,n=h,r=c,s=p,i=_}}}function Mt(e,t,n,r){for(;;){let s=e,i=t,l=n,a=r;if(s instanceof g)return H(i,a);if(i instanceof g)return H(s,a);{let u=s.head,c=s.tail,o=i.head,_=i.tail,h=l(u,o);h instanceof T?(e=c,t=i,n=l,r=w(u,a)):(h instanceof A,e=s,t=_,n=l,r=w(o,a))}}}function Ot(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let l=r.tail;if(l instanceof g){let a=r.head;return P(w(P(a),i))}else{let a=r.head,u=l.head,c=l.tail,o=Mt(a,u,s,x([]));e=c,t=s,n=w(o,i)}}}}function It(e,t,n,r){for(;;){let s=e,i=t,l=n,a=r;if(s instanceof g)return H(i,a);if(i instanceof g)return H(s,a);{let u=s.head,c=s.tail,o=i.head,_=i.tail,h=l(u,o);h instanceof T?(e=s,t=_,n=l,r=w(o,a)):(h instanceof A,e=c,t=i,n=l,r=w(u,a))}}}function jt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let l=r.tail;if(l instanceof g){let a=r.head;return P(w(P(a),i))}else{let a=r.head,u=l.head,c=l.tail,o=It(a,u,s,x([]));e=c,t=s,n=w(o,i)}}}}function qt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return r;if(s instanceof m){if(r.tail instanceof g)return r.head;e=Ot(r,i,x([])),t=new W,n=i}else if(r.tail instanceof g){let a=r.head;return P(a)}else e=jt(r,i,x([])),t=new m,n=i}}function Kt(e,t){if(e instanceof g)return e;{let n=e.tail;if(n instanceof g)return e;{let r=e.head,s=n.head,i=n.tail,l,a=t(r,s);a instanceof T?l=new m:a instanceof A?l=new m:l=new W;let u=l,c=Lt(i,t,x([r]),u,s,x([]));return qt(c,new m,t)}}}function Nt(e,t,n){for(;;){let r=e,s=t,i=n,l=Zt(r,s);if(l instanceof T)e=r,t=s-1,n=w(s,i);else{if(l instanceof A)return w(s,i);e=r,t=s+1,n=w(s,i)}}}function Pe(e,t){return Nt(e,t,x([]))}function Rt(e){return e.toString()}function Ft(e){return Math.ceil(e)}function Ct(e){return Math.floor(e)}function Ie(e){return Math.round(e)}function Bt(e,t){return Math.pow(e,t)}function te(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function Dt(e,t){return e===t?new A:e<t?new T:new me}function Xt(e,t){return e<t?e:t}function zt(e,t){return e>t?e:t}function Ue(e,t,n){let s=Xt(e,n);return zt(s,t)}function je(e){return e>=0?e:0-e}function Ht(e,t){let n=Ft(t)-t>0;return e<0&&n||e===0&&t<0?new z(void 0):new b(Bt(e,t))}function Yt(e){return Ht(e,.5)}function Te(e){return-1*e}function qe(e){return e>=0?Ie(e):0-Ie(Te(e))}function Ut(e,t){for(;;){let n=e,r=t;if(n instanceof g)return r;{let s=n.head;e=n.tail,t=s+r}}}function Vt(e){return Ut(e,0)}function Ke(e,t){if(t===0)return new z(void 0);{let n=t;return new b(K(e,n))}}function Wt(e,t){return e+t}function Ne(e,t){return e*t}function Gt(e,t){return e-t}function Zt(e,t){return e===t?new A:e<t?new T:new me}function Jt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return i;{let l=r.head;e=r.tail,t=s,n=i+s+l}}}function Qt(e,t){if(e instanceof g)return"";{let n=e.head,r=e.tail;return Jt(r,t,n)}}function ne(e,t){if(e instanceof b){let n=e[0];return t(n)}else return e}const Re="src/gleam_community/colour.gleam";class Ve extends f{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class en extends f{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function re(e){return e>1||e<0?new z(void 0):new b(e)}function oe(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,l=s*2,a=s*3;return i<1?t+(n-t)*s*6:l<1?n:a<2?t+(n-t)*(2/3-s)*6:t}function tn(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let l=s,a=n*2-l,u=oe(e+1/3,a,l),c=oe(e,a,l),o=oe(e-1/3,a,l);return[u,c,o,r]}function de(e,t,n,r){return ne(re(e),s=>ne(re(t),i=>ne(re(n),l=>ne(re(r),a=>new b(new en(s,i,l,a))))))}function pe(e,t,n){return de(e,t,n,1)}function nn(e){if(e instanceof Ve){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return tn(t,n,r,s)}}function Fe(e){let t=nn(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let l=u=>{let c,_=Ne(u,1e4),h=qe(_),p=h;c=Ke(p,100);let d=c,v;if(d instanceof b)v=d[0];else throw E("let_assert",Re,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:d,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return v},a=u=>{let c,_=Ne(u,1e3),h=qe(_),p=h;c=Ke(p,1e3);let d=c,v;if(d instanceof b)v=d[0];else throw E("let_assert",Re,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:d,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return v};return Qt(x(["rgba(",te(l(n))+"%,",te(l(r))+"%,",te(l(s))+"%,",te(a(i)),")"]),"")}const rn=new Ve(.9607843137254902,.4745098039215686,0,1);function sn(e){return Math.sin(e)}function an(){return Math.PI}function ln(e,t){return Math.atan2(e,t)}function un(e){return Math.cos(e)}function cn(e,t){return ln(e,t)}function fn(e){return un(e)}function We(e){return sn(e)}function Ee(e,t){let n=e*fn(t),r=e*We(t);return[n,r]}function Ge(){return an()}function G(){return 2*Ge()}function on(){return Math.PI}class Ze extends f{}class Je extends f{constructor(t,n){super(),this[0]=t,this.closed=n}}class Qe extends f{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class _n extends f{constructor(t,n){super(),this.text=t,this.style=n}}class hn extends f{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class et extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Se extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class dn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class tt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class nt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class pn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class rt extends f{constructor(t){super(),this[0]=t}}class wn extends f{}class st extends f{}class gn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ce extends f{constructor(t){super(),this[0]=t}}function xn(){return new Ze}function Ae(e){return new Je(e,!0)}function Le(e,t){return Ae(x([[0,0],[e,0],[e,t],[0,t]]))}function N(e,t,n){return new tt(e,[t,n])}function vn(e,t){return N(e,t,0)}function it(e,t){return N(e,0,t)}function bn(e,t){return new nt(e,[t,t])}function B(e,t){return new et(e,t)}function yn(e,t,n){return new Se(e,new gn(t,n))}function U(e){return new Se(e,new st)}function Y(e){return new rt(e)}function at(e){return new Qe(e,new Ce(0),new Ce(2*on()))}class we extends f{constructor(t){super(),this[0]=t}}class ge extends f{constructor(t){super(),this[0]=t}}class $n extends f{constructor(t){super(),this[0]=t}}class xe extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class ve extends f{constructor(t){super(),this[0]=t}}class lt extends f{constructor(t){super(),this[0]=t}}class ut extends f{}class ct extends f{}class ft extends f{}class ot extends f{}class kn extends f{}class mn extends f{}class Pn extends f{}class Tn extends f{}class En extends f{}class Sn extends f{}class An extends f{}class Ln extends f{}class Mn extends f{}class be extends f{}class On extends f{}class ie extends f{}class In extends f{}class jn extends f{}function qn(e){return document.querySelector(e).getContext("2d")}function _t(e){window.requestAnimationFrame(t=>{e(t)})}function _e(e,t){window.addEventListener(e,t)}function Kn(e){return e.keyCode}function D(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function X(e){return window.PAINT_STATE?e in window.PAINT_STATE?new b(window.PAINT_STATE[e]):new z(void 0):new z(void 0)}function Nn(e){return e.canvas.clientWidth}function Rn(e){return e.canvas.clientHeight}function Fn(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function Cn(e,t,n,r){let s=bt(t)?yt(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function Bn(e){e.reset()}function Dn(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function Xn(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const l of t){let a=l[0],u=l[1];i?e.lineTo(a,u):(e.moveTo(a,u),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function zn(e,t,n){e.font=n,e.fillText(t,0,0)}function F(e){e.save()}function C(e){e.restore()}function Hn(e,t){e.fillStyle=t}function Yn(e,t){e.strokeStyle=t}function Un(e,t){e.lineWidth=t}function Vn(e,t,n){e.translate(t,n)}function Wn(e,t,n){e.scale(t,n)}function Gn(e,t){e.rotate(t)}function Zn(e,t,n,r){e.drawImage(t,0,0,n,r)}function Jn(e,t){e.imageSmoothingEnabled=t}const Z="src/paint/canvas.gleam";class Qn extends f{constructor(t,n){super(),this.width=t,this.height=n}}class ae extends f{constructor(t,n){super(),this.fill=t,this.stroke=n}}function q(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof Ze)return;if(r instanceof Je){let l=r[0],a=r.closed;return Xn(s,l,a,i.fill,i.stroke)}else if(r instanceof Qe){let l=r.radius,a=r.start,u=r.end,c;c=a[0];let o;return o=u[0],Dn(s,l,c,o,i.fill,i.stroke)}else if(r instanceof _n){let l=r.text,a=r.style,u,c;return u=a.size_px,c=a.font_family,F(s),zn(s,l,Rt(u)+"px "+c),C(s)}else if(r instanceof hn){let l=r.width_px,a=r.height_px,u=r[0].id,c=X(u),o;if(c instanceof b)o=c[0];else throw E("let_assert",Z,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:c,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return Zn(s,o,l,a)}else if(r instanceof et){let l=r[0],a=r[1];return F(s),Hn(s,Fe(a)),q(l,s,new ae(!0,i.stroke)),C(s)}else if(r instanceof Se){let l=r[0],a=r[1];if(a instanceof st)e=l,t=s,n=new ae(i.fill,!1);else{let u=a[0],c=a[1];return F(s),Yn(s,Fe(u)),Un(s,c),q(l,s,new ae(i.fill,!0)),C(s)}}else if(r instanceof dn){let l=r[0],a=r[1];return F(s),Jn(s,a instanceof wn),q(l,s,i),C(s)}else if(r instanceof tt){let l=r[0],a=r[1],u,c;return u=a[0],c=a[1],F(s),Vn(s,u,c),q(l,s,i),C(s)}else if(r instanceof nt){let l=r[0],a=r[1],u,c;return u=a[0],c=a[1],F(s),Wn(s,u,c),q(l,s,i),C(s)}else if(r instanceof pn){let l=r[0],a=r[1],u;return u=a[0],F(s),Gn(s,u),q(l,s,i),C(s)}else{let l=r[0];if(l instanceof g)return;{let a=l.head,u=l.tail;q(a,s,i),e=new rt(u),t=s,n=i}}}}function er(e){return e===32?new k(new kn):e===37?new k(new ut):e===38?new k(new ft):e===39?new k(new ct):e===40?new k(new ot):e===87?new k(new mn):e===65?new k(new Pn):e===83?new k(new Tn):e===68?new k(new En):e===90?new k(new Sn):e===88?new k(new An):e===67?new k(new Ln):e===18?new k(new Mn):e===27?new k(new be):e===8?new k(new On):new kt}const tr=new ae(!1,!0);function ht(e,t,n,r){return s=>{let i=X(r),l;if(i instanceof b)l=i[0];else throw E("let_assert",Z,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let a=n(l,new we(s));D(a,r);let u=t(a);return Bn(e),q(u,e,tr),_t(ht(e,t,n,r))}}function nr(e,t,n,r){let s=qn(r),i=e(new Qn(Nn(s),Rn(s)));D(i,r);let l=(u,c)=>_e(u,o=>{let _=er(Kn(o));if(_ instanceof k){let h=_[0],p=X(r),d;if(p instanceof b)d=p[0];else throw E("let_assert",Z,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:p,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let v=t(d,c(h));return D(v,r)}else return});l("keydown",u=>new ge(u)),l("keyup",u=>new $n(u)),_e("mousemove",u=>{let c=Fn(s,u),o,_;o=c[0],_=c[1];let h=X(r),p;if(h instanceof b)p=h[0];else throw E("let_assert",Z,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:h,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let d=t(p,new xe(o,_));D(d,r)});let a=(u,c,o)=>_e(u,_=>{let h="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,p=X(h);D(_,h);let d=M=>Cn(_,p,M,o),v=M=>{let y=X(r),O;if(y instanceof b)O=y[0];else throw E("let_assert",Z,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:y,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let R=t(O,c(M));return D(R,r)};d(0)&&v(new ie),d(1)&&v(new In),d(2)&&v(new jn)});return a("mousedown",u=>new ve(u),!0),a("mouseup",u=>new lt(u),!1),_t(ht(s,n,t,r))}class j extends f{constructor(t,n){super(),this.x=t,this.y=n}}function rr(e){return x([e.x,e.y])}function dt(e,t,n){return new j(n(e.x,t.x),n(e.y,t.y))}const sr="src/vec/vec2f.gleam";function ir(e,t){return dt(e,t,Wt)}function ar(e){let n=rr(e),r=ee(n,s=>s*s);return Vt(r)}function lr(e,t){let r=dt(e,t,Gt);return ar(r)}function ur(e,t){let n,r=lr(e,t);n=Yt(r);let s=n,i;if(s instanceof b)i=s[0];else throw E("let_assert",sr,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const V="src/app.gleam";class I extends f{constructor(t,n,r,s,i,l,a,u,c){super(),this.avatar=t,this.camera=n,this.speed=r,this.objects=s,this.mouse_pos=i,this.drag=l,this.current_time=a,this.paused=u,this.consts=c}}class ce extends f{constructor(t,n){super(),this.pos=t,this.dir=n}}let Be=class extends f{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class pt extends f{}class cr extends f{}class wt extends f{constructor(t,n){super(),this.lagging_dir=t,this.start_move_time=n}}class fe extends f{}class fr extends f{constructor(t){super(),this.start_pos=t}}class J extends f{}class Me extends f{}class or extends f{constructor(t,n,r,s,i,l,a){super(),this.background_picture=t,this.shadow_picture=n,this.color_dark_blue=r,this.color_white_transparent=s,this.color_yellow=i,this.color_orange=l,this.color_dark_blue_transparent=a}}function se(e,t){return new I(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new fe,e.current_time,t,e.consts)}function De(e){return e instanceof J?new Me:new J}function _r(e,t){let n=e.speed*t,r=Ee(n,e.avatar.dir),s,i;return s=r[0],i=r[1],new I((()=>{let l=e.avatar;return new ce(ir(e.avatar.pos,new j(s,i)),l.dir)})(),e.camera,e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function hr(e,t){let n=e/2e3,r=Ae((()=>{let i=Pe(0,10);return ee(i,l=>{let a=G()/10*l+n,u;return l%2===0?u=250:u=140,Ee(u,a)})})()),s=B(r,t.color_yellow);return yn(s,t.color_orange,10)}function dr(e){let t=at(1),n=B(t,e.color_yellow);return U(n)}function pr(e,t,n,r){return e instanceof pt?n?dr(r):hr(t,r):n?xn():r.shadow_picture}function wr(e){let t=Le(200,5e3),n=vn(t,-100),r=B(n,e);return U(r)}function gr(e){let t=Le(4,12),n=Y(x([t,N(t,8,0)])),r=B(n,e);return U(r)}function xr(e){let t=Ae(x([[2,0],[11,6],[2,12]])),n=B(t,e);return U(n)}function vr(e,t){return Y(x([(()=>{let n=at(15),r=B(n,t.color_white_transparent);return U(r)})(),(()=>{if(e instanceof J){let n=xr(t.color_dark_blue);return N(n,-6,-6)}else{let n=gr(t.color_dark_blue);return N(n,-6,-6)}})()]))}function gt(e,t,n){let r=100,s=e.start_move_time,i=s+r;if(n>=i)return t;{let a=K(n-s,r);return t*a+e.lagging_dir*(1-a)}}function br(e){return K(1,K(e,.2)+1)}function yr(e,t){let n=Ee(e,t),r,s;return r=n[0],s=n[1],new j(r,s)}function xt(e,t,n,r){return cn(r-t,n-e)}function $r(e){for(;;){let t=e,n=G(),r=Ge(),s=Te(r),i=t;if(i>r)e=i-n;else{let l=t;if(l<=s)e=l+n;else return t}}}function he(e,t,n){return(t-e)*n+e}function Xe(e,t,n,r,s,i,l,a,u){let c=u,o=Ct(K(a,c)),_=Pe(0,u),h=ee(_,p=>{let d=p,v=K(d,c-1),$=pe(he(e,r,v),he(t,s,v),he(n,i,v)),S;if($ instanceof b)S=$[0];else throw E("let_assert",V,"app",451,"view_gradient","Pattern match failed, no pattern matched the value.",{value:$,start:10778,end:11005,pattern_start:10789,pattern_end:10801});let L=Le(l,o),M=it(L,o*d),y=B(M,S);return U(y)});return Y(h)}const ze=300,le=300;function kr(e){let t=vr(e.paused,e.consts);return N(t,17,le-17)}const Q=new j(150,150);function mr(){let e=x([Xe(.85,.6,.9,.7,.4,.98,ze,le/2,50),(()=>{let t=Xe(.6,.4,.95,.6,.7,.8,ze,le/2,50);return it(t,Q.y)})()]);return Y(e)}function Pr(e){let t=.8*G(),n=de(0,1,1,.5),r;if(n instanceof b)r=n[0];else throw E("let_assert",V,"app",19,"init","Pattern match failed, no pattern matched the value.",{value:n,start:411,end:488,pattern_start:422,pattern_end:449});let s=pe(.6,.7,.7),i;if(s instanceof b)i=s[0];else throw E("let_assert",V,"app",20,"init","Pattern match failed, no pattern matched the value.",{value:s,start:491,end:554,pattern_start:502,pattern_end:521});let l=de(.75,.5,.4,.05),a;if(l instanceof b)a=l[0];else throw E("let_assert",V,"app",21,"init","Pattern match failed, no pattern matched the value.",{value:l,start:557,end:644,pattern_start:568,pattern_end:599});let u=pe(.12,1,.7),c;if(u instanceof b)c=u[0];else throw E("let_assert",V,"app",23,"init","Pattern match failed, no pattern matched the value.",{value:u,start:647,end:708,pattern_start:658,pattern_end:674});let o,_=Pe(0,200);o=At(_,p=>{let d=p,v=yr((d+1)*2+10,d/20*G()),$=We(d/5*G());return x([new Be(v,$,new pt),new Be(v,-10,new cr)])});let h=o;return new I(new ce(new j(0,0),t),new wt(t,0),.01,h,new j(0,0),new fe,0,new Me,new or(mr(),wr(a),i,r,c,rn,a))}const Tr=.005,Er=.4;function He(e,t){return new I(e.avatar,e.camera,Ue(e.speed+t*(e.speed*.05),Tr,Er),e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}const Sr=.09;function Ar(e,t){return new ce(e.pos,e.dir+Sr*t)}function ye(e,t){return new I(Ar(e.avatar,t),new wt(gt(e.camera,e.avatar.dir,e.current_time),e.current_time),e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function Lr(e,t){let n=e.drag;if(n instanceof fe)return e;{let r=n.start_pos,s,i=(e.mouse_pos.x-r.x)*.001;s=Ue(i,-.02,.02);let a=s*t;return ye(e,a)}}function Mr(e,t){if(e.paused instanceof J)if(t instanceof we){let r=t[0];return new I(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.consts)}else{if(t instanceof ge)return t[0]instanceof be?se(e,De(e.paused)):e;if(t instanceof xe){let r=t[0],s=t[1];return new I(e.avatar,e.camera,e.speed,e.objects,new j(r,s),e.drag,e.current_time,e.paused,e.consts)}else return t instanceof ve&&t[0]instanceof ie?se(e,new Me):e}else if(t instanceof we){let r=t[0],s=r-e.current_time,i=new I(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.consts),l=_r(i,s);return Lr(l,s)}else if(t instanceof ge){let r=t[0];return r instanceof ut?ye(e,-1):r instanceof ct?ye(e,1):r instanceof ft?He(e,1):r instanceof ot?He(e,-1):r instanceof be?se(e,De(e.paused)):e}else if(t instanceof xe){let r=t[0],s=t[1];return new I(e.avatar,e.camera,e.speed,e.objects,new j(r,s),e.drag,e.current_time,e.paused,e.consts)}else return t instanceof ve?t[0]instanceof ie?e.mouse_pos.x<=30&&e.mouse_pos.y>=le-30?se(e,new J):new I(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new fr(e.mouse_pos),e.current_time,e.paused,e.consts):e:t instanceof lt&&t[0]instanceof ie?new I(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new fe,e.current_time,e.paused,e.consts):e}const $e=.7853981634;function Or(e,t,n,r,s){let i=xt(0,0,n,e.height),l=n>50,a;l?a=1:a=br(n);let u=a,c=new j(K(t*Q.x,$e),Te(K(i*Q.x,$e))),o=pr(e.kind,r,l,s),_=bn(o,u);return N(_,c.x,c.y)}function Ir(e){let t,n=e.avatar;t=new ce(n.pos,gt(e.camera,e.avatar.dir,e.current_time));let r=t,s,i=Y((()=>{let a=e.objects,u=Pt(a,o=>{let _=xt(r.pos.x,r.pos.y,o.pos.x,o.pos.y),h=$r(_-r.dir),p=je(ur(r.pos,o.pos));return je(h)<=$e?new b([o,h,p]):new z(void 0)}),c=Kt(u,(o,_)=>$t(Dt(o[2],_[2])));return ee(c,o=>Or(o[0],o[1],o[2],e.current_time,e.consts))})());s=N(i,Q.x,Q.y);let l=s;return Y(x([e.consts.background_picture,l,kr(e)]))}function jr(){return nr(Pr,Mr,Ir,"#app")}jr();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const Oe=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",Oe("mousedown",1));window.addEventListener("touchend",Oe("mouseup",0));window.addEventListener("touchmove",Oe("mousemove",void 0));
