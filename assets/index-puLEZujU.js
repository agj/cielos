(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class f{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class ye{static fromArray(t,n){let r=n||new g;for(let s=t.length-1;s>=0;--s)r=new Ye(t[s],r);return r}[Symbol.iterator](){return new gt(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof g}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function w(e,t){return new Ye(e,t)}function x(e,t){return ye.fromArray(e,t)}class gt{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof g)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class g extends ye{}class Ye extends ye{constructor(t,n){super(),this.head=t,this.tail=n}}class ue extends f{static isResult(t){return t instanceof ue}}class v extends ue{constructor(t){super(),this[0]=t}isOk(){return!0}}const xt=e=>e instanceof v,vt=e=>e[0];class X extends ue{constructor(t){super(),this[0]=t}isOk(){return!1}}function j(e,t){return t===0?0:e/t}function E(e,t,n,r,s,i,a){let l=new globalThis.Error(i);l.gleam_error=e,l.file=t,l.module=n,l.line=r,l.function=s,l.fn=s;for(let u in a)l[u]=a[u];return l}class T extends f{}class A extends f{}class me extends f{}function bt(e){return e instanceof T?new me:e instanceof A?e:new T}class $ extends f{constructor(t){super(),this[0]=t}}class yt extends f{}class k extends f{}class U extends f{}function z(e,t){for(;;){let n=e,r=t;if(n instanceof g)return r;{let s=n.head;e=n.tail,t=w(s,r)}}}function P(e){return z(e,x([]))}function mt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let a=r.head,l=r.tail,u,c=s(a);if(c instanceof v){let _=c[0];u=w(_,i)}else u=i;let o=u;e=l,t=s,n=o}}}function $t(e,t){return mt(e,t,x([]))}function kt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let a=r.head;e=r.tail,t=s,n=w(s(a),i)}}}function Q(e,t){return kt(e,t,x([]))}function Pt(e,t){for(;;){let n=e,r=t;if(n instanceof g)return P(r);{let s=n.head;e=n.tail,t=z(s,r)}}}function Tt(e){return Pt(e,x([]))}function Et(e,t){return Tt(Q(e,t))}function St(e,t,n,r,s,i){for(;;){let a=e,l=t,u=n,c=r,o=s,_=i,d=w(o,u);if(a instanceof g)return c instanceof k?w(P(d),_):w(d,_);{let p=a.head,h=a.tail,b=l(o,p);if(c instanceof k)if(b instanceof T)e=h,t=l,n=d,r=c,s=p,i=_;else if(b instanceof A)e=h,t=l,n=d,r=c,s=p,i=_;else{let m;c instanceof k?m=w(P(d),_):m=w(d,_);let S=m;if(h instanceof g)return w(x([p]),S);{let L=h.head,M=h.tail,y,O=l(p,L);O instanceof T?y=new k:O instanceof A?y=new k:y=new U;let R=y;e=M,t=l,n=x([p]),r=R,s=L,i=S}}else if(b instanceof T){let m;c instanceof k?m=w(P(d),_):m=w(d,_);let S=m;if(h instanceof g)return w(x([p]),S);{let L=h.head,M=h.tail,y,O=l(p,L);O instanceof T?y=new k:O instanceof A?y=new k:y=new U;let R=y;e=M,t=l,n=x([p]),r=R,s=L,i=S}}else if(b instanceof A){let m;c instanceof k?m=w(P(d),_):m=w(d,_);let S=m;if(h instanceof g)return w(x([p]),S);{let L=h.head,M=h.tail,y,O=l(p,L);O instanceof T?y=new k:O instanceof A?y=new k:y=new U;let R=y;e=M,t=l,n=x([p]),r=R,s=L,i=S}}else e=h,t=l,n=d,r=c,s=p,i=_}}}function At(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof g)return z(i,l);if(i instanceof g)return z(s,l);{let u=s.head,c=s.tail,o=i.head,_=i.tail,d=a(u,o);d instanceof T?(e=c,t=i,n=a,r=w(u,l)):(d instanceof A,e=s,t=_,n=a,r=w(o,l))}}}function Lt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let a=r.tail;if(a instanceof g){let l=r.head;return P(w(P(l),i))}else{let l=r.head,u=a.head,c=a.tail,o=At(l,u,s,x([]));e=c,t=s,n=w(o,i)}}}}function Mt(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof g)return z(i,l);if(i instanceof g)return z(s,l);{let u=s.head,c=s.tail,o=i.head,_=i.tail,d=a(u,o);d instanceof T?(e=s,t=_,n=a,r=w(o,l)):(d instanceof A,e=c,t=i,n=a,r=w(u,l))}}}function Ot(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let a=r.tail;if(a instanceof g){let l=r.head;return P(w(P(l),i))}else{let l=r.head,u=a.head,c=a.tail,o=Mt(l,u,s,x([]));e=c,t=s,n=w(o,i)}}}}function It(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return r;if(s instanceof k){if(r.tail instanceof g)return r.head;e=Lt(r,i,x([])),t=new U,n=i}else if(r.tail instanceof g){let l=r.head;return P(l)}else e=Ot(r,i,x([])),t=new k,n=i}}function qt(e,t){if(e instanceof g)return e;{let n=e.tail;if(n instanceof g)return e;{let r=e.head,s=n.head,i=n.tail,a,l=t(r,s);l instanceof T?a=new k:l instanceof A?a=new k:a=new U;let u=a,c=St(i,t,x([r]),u,s,x([]));return It(c,new k,t)}}}function Kt(e,t,n){for(;;){let r=e,s=t,i=n,a=Wt(r,s);if(a instanceof T)e=r,t=s-1,n=w(s,i);else{if(a instanceof A)return w(s,i);e=r,t=s+1,n=w(s,i)}}}function $e(e,t){return Kt(e,t,x([]))}function jt(e){return e.toString()}function Nt(e){return Math.ceil(e)}function Rt(e){return Math.floor(e)}function Ie(e){return Math.round(e)}function Ft(e,t){return Math.pow(e,t)}function te(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function Ct(e,t){return e===t?new A:e<t?new T:new me}function Bt(e,t){return e<t?e:t}function Dt(e,t){return e>t?e:t}function Ue(e,t,n){let s=Bt(e,n);return Dt(s,t)}function qe(e){return e>=0?e:0-e}function Xt(e,t){let n=Nt(t)-t>0;return e<0&&n||e===0&&t<0?new X(void 0):new v(Ft(e,t))}function zt(e){return Xt(e,.5)}function ke(e){return-1*e}function Ke(e){return e>=0?Ie(e):0-Ie(ke(e))}function Ht(e,t){for(;;){let n=e,r=t;if(n instanceof g)return r;{let s=n.head;e=n.tail,t=s+r}}}function Yt(e){return Ht(e,0)}function je(e,t){if(t===0)return new X(void 0);{let n=t;return new v(j(e,n))}}function Ut(e,t){return e+t}function Ne(e,t){return e*t}function Vt(e,t){return e-t}function Wt(e,t){return e===t?new A:e<t?new T:new me}function Gt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return i;{let a=r.head;e=r.tail,t=s,n=i+s+a}}}function Zt(e,t){if(e instanceof g)return"";{let n=e.head,r=e.tail;return Gt(r,t,n)}}function ne(e,t){if(e instanceof v){let n=e[0];return t(n)}else return e}const Re="src/gleam_community/colour.gleam";class Ve extends f{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class Jt extends f{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function re(e){return e>1||e<0?new X(void 0):new v(e)}function oe(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,a=s*2,l=s*3;return i<1?t+(n-t)*s*6:a<1?n:l<2?t+(n-t)*(2/3-s)*6:t}function Qt(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let a=s,l=n*2-a,u=oe(e+1/3,l,a),c=oe(e,l,a),o=oe(e-1/3,l,a);return[u,c,o,r]}function Pe(e,t,n,r){return ne(re(e),s=>ne(re(t),i=>ne(re(n),a=>ne(re(r),l=>new v(new Jt(s,i,a,l))))))}function Te(e,t,n){return Pe(e,t,n,1)}function en(e){if(e instanceof Ve){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return Qt(t,n,r,s)}}function Fe(e){let t=en(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let a=u=>{let c,_=Ne(u,1e4),d=Ke(_),p=d;c=je(p,100);let h=c,b;if(h instanceof v)b=h[0];else throw E("let_assert",Re,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:h,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return b},l=u=>{let c,_=Ne(u,1e3),d=Ke(_),p=d;c=je(p,1e3);let h=c,b;if(h instanceof v)b=h[0];else throw E("let_assert",Re,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:h,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return b};return Zt(x(["rgba(",te(a(n))+"%,",te(a(r))+"%,",te(a(s))+"%,",te(l(i)),")"]),"")}const tn=new Ve(.9607843137254902,.4745098039215686,0,1);function nn(e){return Math.sin(e)}function rn(){return Math.PI}function sn(e,t){return Math.atan2(e,t)}function an(e){return Math.cos(e)}function ln(e,t){return sn(e,t)}function un(e){return an(e)}function We(e){return nn(e)}function Ee(e,t){let n=e*un(t),r=e*We(t);return[n,r]}function Ge(){return rn()}function V(){return 2*Ge()}function cn(){return Math.PI}class fn extends f{}class Ze extends f{constructor(t,n){super(),this[0]=t,this.closed=n}}class Je extends f{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class on extends f{constructor(t,n){super(),this.text=t,this.style=n}}class _n extends f{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class Qe extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Se extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class dn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class et extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class tt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class hn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class nt extends f{constructor(t){super(),this[0]=t}}class pn extends f{}class rt extends f{}class wn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ce extends f{constructor(t){super(),this[0]=t}}function Ae(e){return new Ze(e,!0)}function Le(e,t){return Ae(x([[0,0],[e,0],[e,t],[0,t]]))}function N(e,t,n){return new et(e,[t,n])}function gn(e,t){return N(e,t,0)}function st(e,t){return N(e,0,t)}function xn(e,t){return new tt(e,[t,t])}function Y(e,t){return new Qe(e,t)}function vn(e,t,n){return new Se(e,new wn(t,n))}function ee(e){return new Se(e,new rt)}function H(e){return new nt(e)}function bn(e){return new Je(e,new Ce(0),new Ce(2*cn()))}class he extends f{constructor(t){super(),this[0]=t}}class pe extends f{constructor(t){super(),this[0]=t}}class yn extends f{constructor(t){super(),this[0]=t}}class we extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class ge extends f{constructor(t){super(),this[0]=t}}class it extends f{constructor(t){super(),this[0]=t}}class at extends f{}class lt extends f{}class ut extends f{}class ct extends f{}class mn extends f{}class $n extends f{}class kn extends f{}class Pn extends f{}class Tn extends f{}class En extends f{}class Sn extends f{}class An extends f{}class Ln extends f{}class xe extends f{}class Mn extends f{}class ie extends f{}class On extends f{}class In extends f{}function qn(e){return document.querySelector(e).getContext("2d")}function ft(e){window.requestAnimationFrame(t=>{e(t)})}function _e(e,t){window.addEventListener(e,t)}function Kn(e){return e.keyCode}function B(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function D(e){return window.PAINT_STATE?e in window.PAINT_STATE?new v(window.PAINT_STATE[e]):new X(void 0):new X(void 0)}function jn(e){return e.canvas.clientWidth}function Nn(e){return e.canvas.clientHeight}function Rn(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function Fn(e,t,n,r){let s=xt(t)?vt(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function Cn(e){e.reset()}function Bn(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function Dn(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const a of t){let l=a[0],u=a[1];i?e.lineTo(l,u):(e.moveTo(l,u),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function Xn(e,t,n){e.font=n,e.fillText(t,0,0)}function F(e){e.save()}function C(e){e.restore()}function zn(e,t){e.fillStyle=t}function Hn(e,t){e.strokeStyle=t}function Yn(e,t){e.lineWidth=t}function Un(e,t,n){e.translate(t,n)}function Vn(e,t,n){e.scale(t,n)}function Wn(e,t){e.rotate(t)}function Gn(e,t,n,r){e.drawImage(t,0,0,n,r)}function Zn(e,t){e.imageSmoothingEnabled=t}const W="src/paint/canvas.gleam";class Jn extends f{constructor(t,n){super(),this.width=t,this.height=n}}class ae extends f{constructor(t,n){super(),this.fill=t,this.stroke=n}}function K(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof fn)return;if(r instanceof Ze){let a=r[0],l=r.closed;return Dn(s,a,l,i.fill,i.stroke)}else if(r instanceof Je){let a=r.radius,l=r.start,u=r.end,c;c=l[0];let o;return o=u[0],Bn(s,a,c,o,i.fill,i.stroke)}else if(r instanceof on){let a=r.text,l=r.style,u,c;return u=l.size_px,c=l.font_family,F(s),Xn(s,a,jt(u)+"px "+c),C(s)}else if(r instanceof _n){let a=r.width_px,l=r.height_px,u=r[0].id,c=D(u),o;if(c instanceof v)o=c[0];else throw E("let_assert",W,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:c,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return Gn(s,o,a,l)}else if(r instanceof Qe){let a=r[0],l=r[1];return F(s),zn(s,Fe(l)),K(a,s,new ae(!0,i.stroke)),C(s)}else if(r instanceof Se){let a=r[0],l=r[1];if(l instanceof rt)e=a,t=s,n=new ae(i.fill,!1);else{let u=l[0],c=l[1];return F(s),Hn(s,Fe(u)),Yn(s,c),K(a,s,new ae(i.fill,!0)),C(s)}}else if(r instanceof dn){let a=r[0],l=r[1];return F(s),Zn(s,l instanceof pn),K(a,s,i),C(s)}else if(r instanceof et){let a=r[0],l=r[1],u,c;return u=l[0],c=l[1],F(s),Un(s,u,c),K(a,s,i),C(s)}else if(r instanceof tt){let a=r[0],l=r[1],u,c;return u=l[0],c=l[1],F(s),Vn(s,u,c),K(a,s,i),C(s)}else if(r instanceof hn){let a=r[0],l=r[1],u;return u=l[0],F(s),Wn(s,u),K(a,s,i),C(s)}else{let a=r[0];if(a instanceof g)return;{let l=a.head,u=a.tail;K(l,s,i),e=new nt(u),t=s,n=i}}}}function Qn(e){return e===32?new $(new mn):e===37?new $(new at):e===38?new $(new ut):e===39?new $(new lt):e===40?new $(new ct):e===87?new $(new $n):e===65?new $(new kn):e===83?new $(new Pn):e===68?new $(new Tn):e===90?new $(new En):e===88?new $(new Sn):e===67?new $(new An):e===18?new $(new Ln):e===27?new $(new xe):e===8?new $(new Mn):new yt}const er=new ae(!1,!0);function ot(e,t,n,r){return s=>{let i=D(r),a;if(i instanceof v)a=i[0];else throw E("let_assert",W,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let l=n(a,new he(s));B(l,r);let u=t(l);return Cn(e),K(u,e,er),ft(ot(e,t,n,r))}}function tr(e,t,n,r){let s=qn(r),i=e(new Jn(jn(s),Nn(s)));B(i,r);let a=(u,c)=>_e(u,o=>{let _=Qn(Kn(o));if(_ instanceof $){let d=_[0],p=D(r),h;if(p instanceof v)h=p[0];else throw E("let_assert",W,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:p,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let b=t(h,c(d));return B(b,r)}else return});a("keydown",u=>new pe(u)),a("keyup",u=>new yn(u)),_e("mousemove",u=>{let c=Rn(s,u),o,_;o=c[0],_=c[1];let d=D(r),p;if(d instanceof v)p=d[0];else throw E("let_assert",W,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:d,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let h=t(p,new we(o,_));B(h,r)});let l=(u,c,o)=>_e(u,_=>{let d="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,p=D(d);B(_,d);let h=M=>Fn(_,p,M,o),b=M=>{let y=D(r),O;if(y instanceof v)O=y[0];else throw E("let_assert",W,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:y,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let R=t(O,c(M));return B(R,r)};h(0)&&b(new ie),h(1)&&b(new On),h(2)&&b(new In)});return l("mousedown",u=>new ge(u),!0),l("mouseup",u=>new it(u),!1),ft(ot(s,n,t,r))}class q extends f{constructor(t,n){super(),this.x=t,this.y=n}}function nr(e){return x([e.x,e.y])}function _t(e,t,n){return new q(n(e.x,t.x),n(e.y,t.y))}const rr="src/vec/vec2f.gleam";function sr(e,t){return _t(e,t,Ut)}function ir(e){let n=nr(e),r=Q(n,s=>s*s);return Yt(r)}function ar(e,t){let r=_t(e,t,Vt);return ir(r)}function lr(e,t){let n,r=ar(e,t);n=zt(r);let s=n,i;if(s instanceof v)i=s[0];else throw E("let_assert",rr,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const G="src/app.gleam";class I extends f{constructor(t,n,r,s,i,a,l,u){super(),this.avatar=t,this.camera=n,this.speed=r,this.objects=s,this.mouse_pos=i,this.drag=a,this.current_time=l,this.paused=u}}class ce extends f{constructor(t,n){super(),this.pos=t,this.dir=n}}let Be=class extends f{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class dt extends f{}class ur extends f{}class ht extends f{constructor(t,n){super(),this.lagging_dir=t,this.start_move_time=n}}class fe extends f{}class cr extends f{constructor(t){super(),this.start_pos=t}}class Z extends f{}class Me extends f{}function se(e,t){return new I(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new fe,e.current_time,t)}function De(e){return e instanceof Z?new Me:new Z}function fr(e,t,n){let r=t*n,s=Ee(r,e.dir),i,a;return i=s[0],a=s[1],new ce(sr(e.pos,new q(i,a)),e.dir)}function or(e){let t=Te(.12,1,.7),n;if(t instanceof v)n=t[0];else throw E("let_assert",G,"app",339,"view_star","Pattern match failed, no pattern matched the value.",{value:t,start:8074,end:8133,pattern_start:8085,pattern_end:8099});let r=e/2e3,s=Ae((()=>{let a=$e(0,10);return Q(a,l=>{let u=V()/10*l+r,c;return l%2===0?c=250:c=140,Ee(c,u)})})()),i=Y(s,n);return vn(i,tn,10)}function _r(){let e=Pe(.75,.5,.4,.05),t;if(e instanceof v)t=e[0];else throw E("let_assert",G,"app",358,"view_shadow","Pattern match failed, no pattern matched the value.",{value:e,start:8571,end:8639,pattern_start:8582,pattern_end:8598});let n=Le(200,5e3),r=gn(n,-100),s=Y(r,t);return ee(s)}function dr(e,t){return e instanceof dt?or(t):_r()}function hr(e){let t=Le(4,12),n=H(x([t,N(t,8,0)])),r=Y(n,e);return ee(r)}function pr(e){let t=Ae(x([[2,0],[11,6],[2,12]])),n=Y(t,e);return ee(n)}function wr(e){let t=Pe(0,1,1,.5),n;if(t instanceof v)n=t[0];else throw E("let_assert",G,"app",288,"view_pause_button","Pattern match failed, no pattern matched the value.",{value:t,start:6806,end:6868,pattern_start:6817,pattern_end:6829});let r=Te(.6,.7,.7),s;if(r instanceof v)s=r[0];else throw E("let_assert",G,"app",289,"view_pause_button","Pattern match failed, no pattern matched the value.",{value:r,start:6871,end:6929,pattern_start:6882,pattern_end:6896});return H(x([(()=>{let i=bn(15),a=Y(i,n);return ee(a)})(),(()=>{if(e instanceof Z){let i=pr(s);return N(i,-6,-6)}else{let i=hr(s);return N(i,-6,-6)}})()]))}function pt(e,t,n){let r=100,s=e.start_move_time,i=s+r;if(n>=i)return t;{let l=j(n-s,r);return t*l+e.lagging_dir*(1-l)}}function gr(e){return j(1,j(e,.2)+1)}function xr(e,t){let n=Ee(e,t),r,s;return r=n[0],s=n[1],new q(r,s)}function vr(e){let t=.8*V(),n,r=$e(0,200);n=Et(r,i=>{let a=i,l=xr((a+1)*2+10,a/20*V()),u=We(a/5*V());return x([new Be(l,u,new dt),new Be(l,-10,new ur)])});let s=n;return new I(new ce(new q(0,0),t),new ht(t,0),.01,s,new q(0,0),new fe,0,new Me)}function wt(e,t,n,r){return ln(r-t,n-e)}function br(e){for(;;){let t=e,n=V(),r=Ge(),s=ke(r),i=t;if(i>r)e=i-n;else{let a=t;if(a<=s)e=a+n;else return t}}}function de(e,t,n){return(t-e)*n+e}function Xe(e,t,n,r,s,i,a,l,u){let c=u,o=Rt(j(l,c)),_=$e(0,u),d=Q(_,p=>{let h=p,b=j(h,c-1),m=Te(de(e,r,b),de(t,s,b),de(n,i,b)),S;if(m instanceof v)S=m[0];else throw E("let_assert",G,"app",417,"view_gradient","Pattern match failed, no pattern matched the value.",{value:m,start:9710,end:9937,pattern_start:9721,pattern_end:9733});let L=Le(a,o),M=st(L,o*h),y=Y(M,S);return ee(y)});return H(d)}const ze=300,le=300;function yr(e){let t=wr(e.paused);return N(t,17,le-17)}const J=new q(150,150);function mr(){let e=x([Xe(.85,.6,.9,.7,.4,.98,ze,le/2,50),(()=>{let t=Xe(.6,.4,.95,.6,.7,.8,ze,le/2,50);return st(t,J.y)})()]);return H(e)}const $r=.005,kr=.4;function He(e,t){return new I(e.avatar,e.camera,Ue(e.speed+t*(e.speed*.05),$r,kr),e.objects,e.mouse_pos,e.drag,e.current_time,e.paused)}const Pr=.09;function Tr(e,t){return new ce(e.pos,e.dir+Pr*t)}function ve(e,t){return new I(Tr(e.avatar,t),new ht(pt(e.camera,e.avatar.dir,e.current_time),e.current_time),e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused)}function Er(e,t){let n=e.drag;if(n instanceof fe)return e;{let r=n.start_pos,s,i=(e.mouse_pos.x-r.x)*.001;s=Ue(i,-.02,.02);let l=s*t;return ve(e,l)}}function Sr(e,t){if(e.paused instanceof Z)if(t instanceof he){let r=t[0];return new I(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused)}else{if(t instanceof pe)return t[0]instanceof xe?se(e,De(e.paused)):e;if(t instanceof we){let r=t[0],s=t[1];return new I(e.avatar,e.camera,e.speed,e.objects,new q(r,s),e.drag,e.current_time,e.paused)}else return t instanceof ge&&t[0]instanceof ie?se(e,new Me):e}else if(t instanceof he){let r=t[0],s=r-e.current_time,i=new I(fr(e.avatar,e.speed,s),e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused);return Er(i,s)}else if(t instanceof pe){let r=t[0];return r instanceof at?ve(e,-1):r instanceof lt?ve(e,1):r instanceof ut?He(e,1):r instanceof ct?He(e,-1):r instanceof xe?se(e,De(e.paused)):e}else if(t instanceof we){let r=t[0],s=t[1];return new I(e.avatar,e.camera,e.speed,e.objects,new q(r,s),e.drag,e.current_time,e.paused)}else return t instanceof ge?t[0]instanceof ie?e.mouse_pos.x<=30&&e.mouse_pos.y>=le-30?se(e,new Z):new I(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new cr(e.mouse_pos),e.current_time,e.paused):e:t instanceof it&&t[0]instanceof ie?new I(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new fe,e.current_time,e.paused):e}const be=.7853981634;function Ar(e,t,n,r){let s=wt(0,0,n,e.height),i=gr(n),a=new q(j(t*J.x,be),ke(j(s*J.x,be))),l=dr(e.kind,r),u=xn(l,i);return N(u,a.x,a.y)}function Lr(e){let t,n=e.avatar;t=new ce(n.pos,pt(e.camera,e.avatar.dir,e.current_time));let r=t,s,i=H((()=>{let l=e.objects,u=$t(l,o=>{let _=wt(r.pos.x,r.pos.y,o.pos.x,o.pos.y),d=br(_-r.dir),p=qe(lr(r.pos,o.pos));return qe(d)<=be?new v([o,d,p]):new X(void 0)}),c=qt(u,(o,_)=>bt(Ct(o[2],_[2])));return Q(c,o=>Ar(o[0],o[1],o[2],e.current_time))})());s=N(i,J.x,J.y);let a=s;return H(x([mr(),a,yr(e)]))}function Mr(){return tr(vr,Sr,Lr,"#app")}Mr();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const Oe=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",Oe("mousedown",1));window.addEventListener("touchend",Oe("mouseup",0));window.addEventListener("touchmove",Oe("mousemove",void 0));
