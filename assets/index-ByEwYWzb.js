(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class _{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class xe{static fromArray(t,n){let r=n||new y;for(let s=t.length-1;s>=0;--s)r=new Ut(t[s],r);return r}[Symbol.iterator](){return new dn(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof y}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function $(e,t){return new Ut(e,t)}function f(e,t){return xe.fromArray(e,t)}class dn{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof y)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class y extends xe{}class Ut extends xe{constructor(t,n){super(),this.head=t,this.tail=n}}class Sn{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return he(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;const n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let s=0;s<n;s++)if(this.rawBuffer[s]!==t.rawBuffer[s])return!1;const r=this.bitSize%8;if(r){const s=8-r;if(this.rawBuffer[n]>>s!==t.rawBuffer[n]>>s)return!1}}else{for(let s=0;s<n;s++){const i=he(this.rawBuffer,this.bitOffset,s),u=he(t.rawBuffer,t.bitOffset,s);if(i!==u)return!1}const r=this.bitSize%8;if(r){const s=he(this.rawBuffer,this.bitOffset,n),i=he(t.rawBuffer,t.bitOffset,n),u=8-r;if(s>>u!==i>>u)return!1}}return!0}get buffer(){if(kt("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(kt("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function he(e,t,n){if(t===0)return e[n]??0;{const r=e[n]<<t&255,s=e[n+1]>>8-t;return r|s}}const vt={};function kt(e,t){vt[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),vt[e]=!0)}class Je extends _{static isResult(t){return t instanceof Je}}class x extends Je{constructor(t){super(),this[0]=t}isOk(){return!0}}const An=e=>e instanceof x,jn=e=>e[0];class Y extends Je{constructor(t){super(),this[0]=t}isOk(){return!1}}function st(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),s=n.pop();if(r===s)continue;if(!xt(r)||!xt(s)||!zn(r,s)||Pn(r,s)||Tn(r,s)||Bn(r,s)||On(r,s)||Mn(r,s)||qn(r,s))return!1;const u=Object.getPrototypeOf(r);if(u!==null&&typeof u.equals=="function")try{if(r.equals(s))continue;return!1}catch{}let[a,c]=En(r);const l=a(r),o=a(s);if(l.length!==o.length)return!1;for(let p of l)n.push(c(r,p),c(s,p))}return!0}function En(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function Pn(e,t){return e instanceof Date&&(e>t||e<t)}function Tn(e,t){return!(e instanceof Sn)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function Bn(e,t){return Array.isArray(e)&&e.length!==t.length}function On(e,t){return e instanceof Map&&e.size!==t.size}function Mn(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function qn(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function xt(e){return typeof e=="object"&&e!==null}function zn(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function R(e,t){return t===0?0:e/t}function z(e,t,n,r,s,i,u){let a=new globalThis.Error(i);a.gleam_error=e,a.file=t,a.module=n,a.line=r,a.function=s,a.fn=s;for(let c in u)a[c]=u[c];return a}class q extends _{}class K extends _{}class ot extends _{}function Wt(e){return e instanceof q?new ot:e instanceof K?e:new q}class E extends _{constructor(t){super(),this[0]=t}}class Xt extends _{}class B extends _{}class ve extends _{}function Ln(e,t){for(;;){let n=e,r=t;if(n instanceof y)return r;e=n.tail,t=r+1}}function Yt(e){return Ln(e,0)}function In(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof y)return i;{let u=r.head,a=r.tail;s(u)?(e=a,t=s,n=i+1):(e=a,t=s,n=i)}}}function Kn(e,t){return In(e,t,0)}function oe(e,t){for(;;){let n=e,r=t;if(n instanceof y)return r;{let s=n.head;e=n.tail,t=$(s,r)}}}function M(e){return oe(e,f([]))}function Rn(e){if(e instanceof y)return new Y(void 0);{let t=e.head;return new x(t)}}function Cn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof y)return M(i);{let u=r.head,a=r.tail,c,l=s(u);if(l instanceof x){let p=l[0];c=$(p,i)}else c=i;let o=c;e=a,t=s,n=o}}}function Ht(e,t){return Cn(e,t,f([]))}function Nn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof y)return M(i);{let u=r.head;e=r.tail,t=s,n=$(s(u),i)}}}function Se(e,t){return Nn(e,t,f([]))}function Fn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof y)return M(a);{let c=s.head,l=s.tail,o=$(i(c,u),a);e=l,t=i,n=u+1,r=o}}}function Fe(e,t){return Fn(e,t,0,f([]))}function Dn(e,t){for(;;){let n=e,r=t;if(n instanceof y)return M(r);{let s=n.head;e=n.tail,t=oe(s,r)}}}function Un(e){return Dn(e,f([]))}function Wn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof y)return s;{let u=r.head;e=r.tail,t=i(s,u),n=i}}}function et(e,t){for(;;){let n=e,r=t;if(n instanceof y)return new Y(void 0);{let s=n.head,i=n.tail;if(r(s))return new x(s);e=i,t=r}}}function Xn(e,t){for(;;){let n=e,r=t;if(n instanceof y)return!1;{let s=n.head,i=n.tail,u=r(s);if(u)return u;e=i,t=r}}}function Yn(e,t,n,r,s,i){for(;;){let u=e,a=t,c=n,l=r,o=s,p=i,h=$(o,c);if(u instanceof y)return l instanceof B?$(M(h),p):$(h,p);{let g=u.head,b=u.tail,d=a(o,g);if(l instanceof B)if(d instanceof q)e=b,t=a,n=h,r=l,s=g,i=p;else if(d instanceof K)e=b,t=a,n=h,r=l,s=g,i=p;else{let j;l instanceof B?j=$(M(h),p):j=$(h,p);let P=j;if(b instanceof y)return $(f([g]),P);{let T=b.head,O=b.tail,S,I=a(g,T);I instanceof q?S=new B:I instanceof K?S=new B:S=new ve;let D=S;e=O,t=a,n=f([g]),r=D,s=T,i=P}}else if(d instanceof q){let j;l instanceof B?j=$(M(h),p):j=$(h,p);let P=j;if(b instanceof y)return $(f([g]),P);{let T=b.head,O=b.tail,S,I=a(g,T);I instanceof q?S=new B:I instanceof K?S=new B:S=new ve;let D=S;e=O,t=a,n=f([g]),r=D,s=T,i=P}}else if(d instanceof K){let j;l instanceof B?j=$(M(h),p):j=$(h,p);let P=j;if(b instanceof y)return $(f([g]),P);{let T=b.head,O=b.tail,S,I=a(g,T);I instanceof q?S=new B:I instanceof K?S=new B:S=new ve;let D=S;e=O,t=a,n=f([g]),r=D,s=T,i=P}}else e=b,t=a,n=h,r=l,s=g,i=p}}}function Hn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof y)return oe(i,a);if(i instanceof y)return oe(s,a);{let c=s.head,l=s.tail,o=i.head,p=i.tail,h=u(c,o);h instanceof q?(e=l,t=i,n=u,r=$(c,a)):(h instanceof K,e=s,t=p,n=u,r=$(o,a))}}}function Gn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof y)return M(i);{let u=r.tail;if(u instanceof y){let a=r.head;return M($(M(a),i))}else{let a=r.head,c=u.head,l=u.tail,o=Hn(a,c,s,f([]));e=l,t=s,n=$(o,i)}}}}function Vn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof y)return oe(i,a);if(i instanceof y)return oe(s,a);{let c=s.head,l=s.tail,o=i.head,p=i.tail,h=u(c,o);h instanceof q?(e=s,t=p,n=u,r=$(o,a)):(h instanceof K,e=l,t=i,n=u,r=$(c,a))}}}function Jn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof y)return M(i);{let u=r.tail;if(u instanceof y){let a=r.head;return M($(M(a),i))}else{let a=r.head,c=u.head,l=u.tail,o=Vn(a,c,s,f([]));e=l,t=s,n=$(o,i)}}}}function Zn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof y)return r;if(s instanceof B){if(r.tail instanceof y)return r.head;e=Gn(r,i,f([])),t=new ve,n=i}else if(r.tail instanceof y){let a=r.head;return M(a)}else e=Jn(r,i,f([])),t=new B,n=i}}function Gt(e,t){if(e instanceof y)return e;{let n=e.tail;if(n instanceof y)return e;{let r=e.head,s=n.head,i=n.tail,u,a=t(r,s);a instanceof q?u=new B:a instanceof K?u=new B:u=new ve;let c=u,l=Yn(i,t,f([r]),c,s,f([]));return Zn(l,new B,t)}}}function Qn(e,t,n){for(;;){let r=e,s=t,i=n,u=nn(r,s);if(u instanceof q)e=r,t=s-1,n=$(s,i);else{if(u instanceof K)return $(s,i);e=r,t=s+1,n=$(s,i)}}}function Vt(e,t){return Qn(e,t,f([]))}function Ze(e){return e.toString()}function it(e){if(e==="")return 0;const t=Jt(e);if(t){let n=0;for(const r of t)n++;return n}else return e.match(/./gsu).length}function mn(e){const t=Jt(e);return t?xe.fromArray(Array.from(t).map(n=>n.segment)):xe.fromArray(e.match(/./gsu))}let $t;function Jt(e){if(globalThis.Intl&&Intl.Segmenter)return $t||=new Intl.Segmenter,$t.segment(e)[Symbol.iterator]()}function er(e){return Math.ceil(e)}function Zt(e){return Math.floor(e)}function dt(e){return Math.round(e)}function tr(e,t){return Math.pow(e,t)}function Qt(){const e=Math.random();return e===1?Qt():e}function Ee(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function mt(e,t){return e===t?new K:e<t?new q:new ot}function De(e,t){return e<t?e:t}function en(e,t){return e>t?e:t}function tn(e,t,n){let s=De(e,n);return en(s,t)}function Ue(e){return e>=0?e:0-e}function nr(e,t){let n=er(t)-t>0;return e<0&&n||e===0&&t<0?new Y(void 0):new x(tr(e,t))}function rr(e){return nr(e,.5)}function We(e){return-1*e}function at(e){return e>=0?dt(e):0-dt(We(e))}function sr(e,t){for(;;){let n=e,r=t;if(n instanceof y)return r;{let s=n.head;e=n.tail,t=s+r}}}function ir(e){return sr(e,0)}function St(e,t){if(t===0)return new Y(void 0);{let n=t;return new x(R(e,n))}}function ar(e,t){return e+t}function At(e,t){return e*t}function ur(e,t){return e-t}function nn(e,t){return e===t?new K:e<t?new q:new ot}function cr(e){let t=Qt()*e,n=Zt(t);return at(n)}function fr(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof y)return i;{let u=r.head;e=r.tail,t=s,n=i+s+u}}}function lr(e,t){if(e instanceof y)return"";{let n=e.head,r=e.tail;return fr(r,t,n)}}function _r(e,t){return mn(e)}function or(e,t){if(e instanceof x){let n=e[0];return new x(t(n))}else return e}function Pe(e,t){if(e instanceof x){let n=e[0];return t(n)}else return e}function pr(e,t){return e instanceof x?e[0]:t}const jt="src/gleam_community/colour.gleam";class pt extends _{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class hr extends _{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function Te(e){return e>1||e<0?new Y(void 0):new x(e)}function tt(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,u=s*2,a=s*3;return i<1?t+(n-t)*s*6:u<1?n:a<2?t+(n-t)*(2/3-s)*6:t}function wr(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let u=s,a=n*2-u,c=tt(e+1/3,a,u),l=tt(e,a,u),o=tt(e-1/3,a,u);return[c,l,o,r]}function Xe(e,t,n,r){return Pe(Te(e),s=>Pe(Te(t),i=>Pe(Te(n),u=>Pe(Te(r),a=>new x(new hr(s,i,u,a))))))}function ut(e,t,n){return Xe(e,t,n,1)}function gr(e){if(e instanceof pt){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return wr(t,n,r,s)}}function Et(e){let t=gr(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let u=c=>{let l,p=At(c,1e4),h=at(p),g=h;l=St(g,100);let b=l,d;if(b instanceof x)d=b[0];else throw z("let_assert",jt,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:b,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return d},a=c=>{let l,p=At(c,1e3),h=at(p),g=h;l=St(g,1e3);let b=l,d;if(b instanceof x)d=b[0];else throw z("let_assert",jt,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:b,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return d};return lr(f(["rgba(",Ee(u(n))+"%,",Ee(u(r))+"%,",Ee(u(s))+"%,",Ee(a(i)),")"]),"")}const br=new pt(.9607843137254902,.4745098039215686,0,1),yr=new pt(1,1,1,1);function vr(e){return Math.sin(e)}function kr(){return Math.PI}function xr(e){return Math.tan(e)}function $r(e,t){return Math.atan2(e,t)}function dr(e){return Math.cos(e)}function Sr(e,t){return $r(e,t)}function Ar(e){return dr(e)}function Ye(e){return vr(e)}function ht(e,t){let n=e*Ar(t),r=e*Ye(t);return[n,r]}function jr(e){return xr(e)}function He(){return kr()}function Ae(){return 2*He()}function Pt(e){return new Audio(e)}function Er(e){e.play()}function Pr(e,t){e.volume=t}function Tr(){return Math.PI}class rn extends _{}class wt extends _{constructor(t,n){super(),this[0]=t,this.closed=n}}class sn extends _{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class Br extends _{constructor(t,n){super(),this.text=t,this.style=n}}class Or extends _{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class an extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class gt extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class Mr extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class un extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class Qe extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class cn extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class fn extends _{constructor(t){super(),this[0]=t}}class qr extends _{}class ln extends _{}class zr extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class ct extends _{constructor(t){super(),this[0]=t}}function ft(e){return new ct(e)}function me(){return new rn}function bt(e){return new wt(e,!0)}function w(e){return new wt(e,!1)}function je(e,t){return bt(f([[0,0],[e,0],[e,t],[0,t]]))}function A(e,t,n){return new un(e,[t,n])}function Q(e,t){return A(e,t,0)}function se(e,t){return A(e,0,t)}function Tt(e,t){return new Qe(e,[t,1])}function Bt(e,t){return new Qe(e,[1,t])}function N(e,t){return new Qe(e,[t,t])}function lt(e,t){return new cn(e,t)}function F(e,t){return new an(e,t)}function _n(e,t,n){return new gt(e,new zr(t,n))}function V(e){return new gt(e,new ln)}function k(e){return new fn(e)}function on(e){return new sn(e,new ct(0),new ct(2*Tr()))}class Oe extends _{constructor(t){super(),this[0]=t}}class Me extends _{constructor(t){super(),this[0]=t}}class qe extends _{constructor(t){super(),this[0]=t}}class ze extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class Le extends _{constructor(t){super(),this[0]=t}}class Lr extends _{constructor(t){super(),this[0]=t}}class ge extends _{}class be extends _{}class Ir extends _{}class Kr extends _{}class Rr extends _{}class Cr extends _{}class Nr extends _{}class Fr extends _{}class Dr extends _{}class Ur extends _{}class Wr extends _{}class Xr extends _{}class Yr extends _{}class Ie extends _{}class Hr extends _{}class ye extends _{}class Gr extends _{}class Vr extends _{}function Jr(e){return document.querySelector(e).getContext("2d")}function pn(e){window.requestAnimationFrame(t=>{e(t)})}function nt(e,t){window.addEventListener(e,t)}function Zr(e){return e.keyCode}function ae(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function ce(e){return window.PAINT_STATE?e in window.PAINT_STATE?new x(window.PAINT_STATE[e]):new Y(void 0):new Y(void 0)}function Qr(e){return e.canvas.clientWidth}function mr(e){return e.canvas.clientHeight}function es(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function ts(e,t,n,r){let s=An(t)?jn(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function ns(e){e.reset()}function rs(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function ss(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const u of t){let a=u[0],c=u[1];i?e.lineTo(a,c):(e.moveTo(a,c),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function is(e,t,n){e.font=n,e.fillText(t,0,0)}function ee(e){e.save()}function te(e){e.restore()}function as(e,t){e.fillStyle=t}function us(e,t){e.strokeStyle=t}function cs(e,t){e.lineWidth=t}function fs(e,t,n){e.translate(t,n)}function ls(e,t,n){e.scale(t,n)}function _s(e,t){e.rotate(t)}function os(e,t,n,r){e.drawImage(t,0,0,n,r)}function ps(e,t){e.imageSmoothingEnabled=t}const ke="src/paint/canvas.gleam";class hs extends _{constructor(t,n){super(),this.width=t,this.height=n}}class Ke extends _{constructor(t,n){super(),this.fill=t,this.stroke=n}}function J(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof rn)return;if(r instanceof wt){let u=r[0],a=r.closed;return ss(s,u,a,i.fill,i.stroke)}else if(r instanceof sn){let u=r.radius,a=r.start,c=r.end,l;l=a[0];let o;return o=c[0],rs(s,u,l,o,i.fill,i.stroke)}else if(r instanceof Br){let u=r.text,a=r.style,c,l;return c=a.size_px,l=a.font_family,ee(s),is(s,u,Ze(c)+"px "+l),te(s)}else if(r instanceof Or){let u=r.width_px,a=r.height_px,c=r[0].id,l=ce(c),o;if(l instanceof x)o=l[0];else throw z("let_assert",ke,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:l,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return os(s,o,u,a)}else if(r instanceof an){let u=r[0],a=r[1];return ee(s),as(s,Et(a)),J(u,s,new Ke(!0,i.stroke)),te(s)}else if(r instanceof gt){let u=r[0],a=r[1];if(a instanceof ln)e=u,t=s,n=new Ke(i.fill,!1);else{let c=a[0],l=a[1];return ee(s),us(s,Et(c)),cs(s,l),J(u,s,new Ke(i.fill,!0)),te(s)}}else if(r instanceof Mr){let u=r[0],a=r[1];return ee(s),ps(s,a instanceof qr),J(u,s,i),te(s)}else if(r instanceof un){let u=r[0],a=r[1],c,l;return c=a[0],l=a[1],ee(s),fs(s,c,l),J(u,s,i),te(s)}else if(r instanceof Qe){let u=r[0],a=r[1],c,l;return c=a[0],l=a[1],ee(s),ls(s,c,l),J(u,s,i),te(s)}else if(r instanceof cn){let u=r[0],a=r[1],c;return c=a[0],ee(s),_s(s,c),J(u,s,i),te(s)}else{let u=r[0];if(u instanceof y)return;{let a=u.head,c=u.tail;J(a,s,i),e=new fn(c),t=s,n=i}}}}function ws(e){return e===32?new E(new Rr):e===37?new E(new ge):e===38?new E(new Ir):e===39?new E(new be):e===40?new E(new Kr):e===87?new E(new Cr):e===65?new E(new Nr):e===83?new E(new Fr):e===68?new E(new Dr):e===90?new E(new Ur):e===88?new E(new Wr):e===67?new E(new Xr):e===18?new E(new Yr):e===27?new E(new Ie):e===8?new E(new Hr):new Xt}const gs=new Ke(!1,!0);function hn(e,t,n,r){return s=>{let i=ce(r),u;if(i instanceof x)u=i[0];else throw z("let_assert",ke,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let a=n(u,new Oe(s));ae(a,r);let c=t(a);return ns(e),J(c,e,gs),pn(hn(e,t,n,r))}}function bs(e,t,n,r){let s=Jr(r),i=e(new hs(Qr(s),mr(s)));ae(i,r);let u=(c,l)=>nt(c,o=>{let p=ws(Zr(o));if(p instanceof E){let h=p[0],g=ce(r),b;if(g instanceof x)b=g[0];else throw z("let_assert",ke,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:g,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let d=t(b,l(h));return ae(d,r)}else return});u("keydown",c=>new Me(c)),u("keyup",c=>new qe(c)),nt("mousemove",c=>{let l=es(s,c),o,p;o=l[0],p=l[1];let h=ce(r),g;if(h instanceof x)g=h[0];else throw z("let_assert",ke,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:h,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let b=t(g,new ze(o,p));ae(b,r)});let a=(c,l,o)=>nt(c,p=>{let h="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,g=ce(h);ae(p,h);let b=O=>ts(p,g,O,o),d=O=>{let S=ce(r),I;if(S instanceof x)I=S[0];else throw z("let_assert",ke,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:S,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let D=t(I,l(O));return ae(D,r)};b(0)&&d(new ye),b(1)&&d(new Gr),b(2)&&d(new Vr)});return a("mousedown",c=>new Le(c),!0),a("mouseup",c=>new Lr(c),!1),pn(hn(s,n,t,r))}function ys(e){const[t,n]=Ge([0,1013904223]),r=t+e>>>0;return Ge([r,n])}function Ge(e){const[t,n]=e;return[t*1664525+n>>>0,n]}function Ot(e){const[t,n]=e,r=t>>>(t>>>28)+4,s=(t^r)*277803737;return(s>>>22^s)>>>0}function vs(e,t,n){const r=Ge(e),s=Ot(e),i=Ot(r),u=67108863&s,a=134217727&i,c=(u*134217728+a)/9007199254740992,l=n-t;return[c*l+t,Ge(r)]}function ks(){return ys(cr(4294967296))}class xs extends _{constructor(t){super(),this.step=t}}function $s(e,t){return e.step(t)}function ds(e,t,n){let r=n(e,t);return r instanceof q?[e,t]:r instanceof K?[e,t]:[t,e]}function Ss(e,t){return new xs(n=>{let r=ds(e,t,mt),s,i;return s=r[0],i=r[1],vs(n,s,i)})}class L extends _{constructor(t,n){super(),this.x=t,this.y=n}}function As(e){return f([e.x,e.y])}function wn(e,t,n){return new L(n(e.x,t.x),n(e.y,t.y))}const js="src/vec/vec2f.gleam";function gn(e,t){return wn(e,t,ar)}function Es(e){let n=As(e),r=Se(n,s=>s*s);return ir(r)}function Ps(e,t){let r=wn(e,t,ur);return Es(r)}function bn(e,t){let n,r=Ps(e,t);n=rr(r);let s=n,i;if(s instanceof x)i=s[0];else throw z("let_assert",js,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const Ts=e=>{window.open(e,"_blank")},H=300,m=300,le=new L(150,150),we=8,Mt=2,Bs=.25,Os=.01,Ms=5e-6,qs=5,Re=.7853981634,pe=12,_t=3,qt=2e3,zs=300;function ue(e,t){let n;if(e==="a")n=w(f([[3,1],[11,1],[11,11],[1,11],[1,5],[11,5]]));else if(e==="b")n=w(f([[1,3],[11,3],[11,11],[1,11],[1,-1]]));else if(e==="c")n=w(f([[11,11],[1,11],[1,1],[11,1],[11,3]]));else if(e==="d"){let s=ue("b",t),i=Tt(s,-1);n=Q(i,12)}else if(e==="e")n=w(f([[9,11],[1,11],[1,1],[11,1],[11,7],[1,7]]));else if(e==="f")n=k(f([w(f([[0,5],[11,5]])),w(f([[5,12],[5,-1],[12,-1]]))]));else if(e==="g")n=k(f([w(f([[0,1],[10,1],[10,7],[1,7],[1,1]])),w(f([[3,7],[3,11],[11,11],[11,13]]))]));else if(e==="i")n=k(f([w(f([[6,-2],[6,0]])),w(f([[2,3],[6,3],[6,11]])),w(f([[0,11],[12,11]]))]));else if(e==="j")n=k(f([w(f([[11,-2],[11,0]])),w(f([[11,2],[11,11],[1,11],[1,9]]))]));else if(e==="k")n=k(f([w(f([[1,0],[1,12]])),w(f([[1,6],[11,6],[11,12]])),w(f([[11,0],[11,1],[6,6],[5,6]]))]));else if(e==="l")n=w(f([[12,11],[1,11],[1,0]]));else if(e==="m")n=k(f([w(f([[1,12],[1,1],[11,1],[11,12]])),w(f([[6,1],[6,12]]))]));else if(e==="n")n=w(f([[1,12],[1,1],[9,1],[9,3],[11,3],[11,12]]));else if(e==="o")n=w(f([[0,1],[11,1],[11,11],[1,11],[1,1]]));else if(e==="p"){let s=ue("b",t),i=Bt(s,-1);n=se(i,12)}else if(e==="r")n=w(f([[1,12],[1,1],[11,1],[11,3]]));else if(e==="s")n=w(f([[11,1],[2,1],[2,6],[11,6],[11,11],[1,11],[1,9]]));else if(e==="t")n=k(f([w(f([[0,2],[12,2]])),w(f([[5,-1],[5,11],[12,11]]))]));else if(e==="u")n=w(f([[11,0],[11,11],[1,11],[1,0]]));else if(e==="v")n=w(f([[11,0],[11,11],[4,11],[1,8],[1,0]]));else if(e==="y")n=k(f([w(f([[11,0],[11,13],[1,13]])),w(f([[11,9],[1,9],[1,0]]))]));else if(e==="0")n=k(f([w(f([[0,1],[11,1],[11,11],[1,11],[1,1]])),w(f([[5,6],[7,6]]))]));else if(e==="1")n=k(f([w(f([[6,0],[6,11]])),w(f([[0,11],[12,11]])),w(f([[1,3],[6,3]]))]));else if(e==="2")n=w(f([[1,3],[1,1],[11,1],[11,7],[1,7],[1,11],[12,11]]));else if(e==="3")n=k(f([w(f([[1,3],[1,1],[11,1],[11,11],[1,11],[1,9]])),w(f([[5,6],[11,6]]))]));else if(e==="4")n=k(f([w(f([[11,7],[1,7],[1,0]])),w(f([[11,0],[11,12]]))]));else if(e==="5"){let s=ue("2",t),i=Bt(s,-1);n=se(i,12)}else if(e==="6")n=w(f([[1,5],[11,5],[11,11],[1,11],[1,1],[12,1]]));else if(e==="7")n=w(f([[0,1],[11,1],[11,3],[7,7],[7,12]]));else if(e==="8")n=k(f([w(f([[2,6],[2,1],[10,1],[10,6]])),w(f([[0,6],[11,6],[11,11],[1,11],[1,6]]))]));else if(e==="9"){let s=ue("6",t),i=lt(s,ft(He()));n=A(i,12,12)}else if(e==="←")n=k(f([w(f([[6,11],[5,11],[1,7],[1,5],[5,1],[6,1]])),w(f([[1,6],[12,6]]))]));else if(e==="→"){let s=ue("←",t),i=lt(s,ft(He()));n=A(i,12,12)}else if(e==="♥︎"){let s=w(f([[5,2],[6,3],[8,1],[9,1],[11,3],[11,7],[7,11],[5.5,11]]));n=k(f([s,(()=>{let u=Tt(s,-1);return Q(u,12)})()]))}else n=me();return _n(n,t,2)}function Ls(e,t,n){let r=Ye(t/400)*.1,s=Ye(t/1600)*6,i=ue(e,n),u=F(i,n),a=V(u),c=A(a,-6,-6),l=lt(c,ft(r));return A(l,6,6+s)}function G(e,t,n){let r=_r(e),s=Fe(r,(i,u)=>{let a=Ls(i,t+u*8e3,n);return Q(a,u*(pe+_t))});return k(s)}function ie(e,t){let n=it(e);return((pe+_t)*n-_t)*t}function zt(e,t,n){let r=G(e,t,n);return Q(r,ie(e,1)*-.5)}const fe="src/app.gleam";class v extends _{constructor(t,n,r,s,i,u,a,c,l,o,p,h){super(),this.game_status=t,this.avatar=n,this.rotation_force=r,this.objects=s,this.mouse=i,this.keyboard=u,this.drag=a,this.current_time=c,this.prev_tick_time=l,this.press_regions=o,this.consts=p,this.seed=h}}class re extends _{constructor(t,n){super(),this.pos=t,this.dir=n}}let Ce=class extends _{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class Z extends _{}class yn extends _{constructor(t){super(),this.collected_time=t}}class ne extends _{constructor(t,n){super(),this.pos=t,this.prev_pos=n}}class U extends _{constructor(t,n){super(),this.left=t,this.right=n}}class W extends _{}class _e extends _{constructor(t,n){super(),this.start_pos=t,this.start_avatar_dir=n}}class Is extends _{constructor(t,n){super(),this.force=t,this.released_time=n}}class C extends _{}class X extends _{}class Ks extends _{}class vn extends _{constructor(t,n,r,s,i){super(),this.x=t,this.y=n,this.width=r,this.height=s,this.on_press=i}}class Rs extends _{constructor(t,n,r,s,i,u,a,c){super(),this.background_picture=t,this.shadow_picture=n,this.color_dark_blue=r,this.color_white=s,this.color_white_transparent=i,this.color_yellow=u,this.color_orange=a,this.color_dark_blue_transparent=c}}class kn extends _{}class Cs extends _{}function Lt(e,t){let n=e*Ae()*.5,r=Ss(n*-1,n);return $s(r,t)}function Ns(e){return!Xn(e,n=>n.kind instanceof Z)}function Fs(e,t){return Kn(e,n=>st(n.kind,t))}function xn(e){let t;e instanceof kn?t=Pt("./assets/select.mp3"):t=Pt("./assets/collect.mp3");let n=t;return Pr(n,.5),Er(n)}function Ds(e){let t,n=e.objects;t=Se(n,i=>st(i.kind,new Z)&&bn(e.avatar.pos,i.pos)<.8?new Ce(i.pos,i.height,new yn(e.current_time)):i);let r=t;return!st(r,e.objects)&&xn(new Cs),new v(Ns(e.objects)?new Ks:e.game_status,e.avatar,e.rotation_force,r,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}function Us(e){let t=e.current_time-e.prev_tick_time,n=Os*t,r=ht(n,e.avatar.dir),s,i;return s=r[0],i=r[1],new v(e.game_status,(()=>{let u=e.avatar;return new re(gn(e.avatar.pos,new L(s,i)),u.dir)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}function It(e,t){let n=e.current_time-e.prev_tick_time,r=t*n*Ms,s=tn(e.rotation_force+r,-2,2);return new v(e.game_status,e.avatar,s,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}function Ws(e){if(Ue(e.rotation_force)>1e-8){let n=e.current_time-e.prev_tick_time,r=e.rotation_force*n,s=De(1,1-R(1,n*qs)),i=e.rotation_force*s;return new v(e.game_status,(()=>{let u=e.avatar;return new re(u.pos,e.avatar.dir+r)})(),i,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}else return e}function Xs(e){let t=e.drag;if(t instanceof W)return e;if(t instanceof _e){let n=e.mouse.pos.x-e.mouse.prev_pos.x,r=e.current_time-e.prev_tick_time,s=R(n,r);return Ue(s)>.01?new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new Is(s,e.current_time),e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new W,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}else return e}function Ys(e){let t=Ht(e.objects,u=>{let a=u.kind;if(a instanceof yn){let c=a.collected_time;return new x(c)}else return new Y(void 0)}),n=Wn(t,-1e4,en),r=e.current_time-n,s=R(r,zs);if(s<1){let u=Xe(0,0,1,1-s),a;if(u instanceof x)a=u[0];else throw z("let_assert",fe,"app",562,"view_screen_effects","Pattern match failed, no pattern matched the value.",{value:u,start:14636,end:14721,pattern_start:14647,pattern_end:14656});let c=Yt(t);return k(f([(()=>{let l=je(H,m),o=F(l,a);return V(o)})(),(()=>{let l=G(Ze(c),e.current_time,e.consts.color_dark_blue),o=N(l,2);return A(o,20,30)})()]))}else return me()}function Hs(e){let t=Yt(e.objects),n,r=k($((()=>{let c=zt("♥︎congratulations♥︎",e.current_time,e.consts.color_yellow);return Q(c,H*.5)})(),(()=>{let c=f(["you collected all "+Ze(t)+" stars","you are super player"]);return Fe(c,(l,o)=>{let p=zt(l,e.current_time,e.consts.color_dark_blue),h=N(p,.5);return A(h,H*.5,30+pe*1.5*o)})})()));n=se(r,80);let s=n,i,u=k((()=>{let c=f(["  if you like","← you can play again"]);return Fe(c,(l,o)=>{let p=G(l,e.current_time,e.consts.color_white),h=N(p,.5);return se(h,30+pe*1.5*o)})})());return i=A(u,40,m-70),k(f([s,i]))}function Gs(e,t){let n="cielos",r=1.5,s=ie(n,r),i="by agj",u=.75,a=ie(i,u),c=k(f([(()=>{let l=G(n,e,t.color_dark_blue);return N(l,r)})(),(()=>{let l=G(i,e,t.color_dark_blue),o=N(l,u);return A(o,s-a,40)})()]));return Q(c,H*.5-s*.5)}function Vs(e,t,n){let r=f(["drag or keys ←→ to turn","collect "+Ze(t)+" stars"]),s=.75,i,a=Gt(r,(g,b)=>Wt(nn(it(g),it(b)))),c=Rn(a),l=or(c,g=>ie(g,s));i=pr(l,0);let o=i,p=k(Fe(r,(b,d)=>{let j=G(b,e,n.color_dark_blue);return se(j,pe*2.5*d)})),h=N(p,s);return Q(h,H*.5-o*.5)}function Kt(e,t,n){let r=bt((()=>{let i=Vt(0,10);return Se(i,u=>{let a=Ae()/10*u+n,c;return u%2===0?c=250:c=140,ht(c,a)})})()),s=F(r,e);return _n(s,t,10)}function Rt(e,t,n){let r=e/2e3;return n instanceof E?Kt(t.color_white,t.color_yellow,r):Kt(t.color_yellow,t.color_orange,r)}function Ct(e,t){let n;t?n=e.color_white:n=e.color_yellow;let r=n,s=on(1),i=F(s,r);return V(i)}function Js(e,t,n,r){if(n)return e instanceof Z?Ct(r,!1):Ct(r,!0);if(e instanceof Z)return Rt(t,r,new Xt);{let s=e.collected_time;return Rt(t,r,new E(s))}}function Zs(e){let t=je(200,5e3),n=Q(t,-100),r=F(n,e);return V(r)}function Qs(e){let t=je(4,12),n=k(f([t,A(t,8,0)])),r=F(n,e);return V(r)}function Nt(e){let t=bt(f([[2,0],[11,6],[2,12]])),n=F(t,e);return V(n)}function ms(e,t,n){return k(f([(()=>{let r=on(15),s=F(r,n.color_white_transparent);return V(s)})(),(()=>{if(e instanceof C){let r=Qs(n.color_dark_blue);return A(r,-6,-6)}else if(e instanceof X){let r="esc",s=.5,i,u=G(r,t,n.color_white);i=N(u,s);let a=i;return k(f([(()=>{let c=Nt(n.color_dark_blue);return A(c,-6,-6)})(),A(a,ie(r,s)*-.5,-27)]))}else{let r="esc",s=.5,i,u=G(r,t,n.color_white);i=N(u,s);let a=i;return k(f([(()=>{let c=Nt(n.color_dark_blue);return A(c,-6,-6)})(),A(a,ie(r,s)*-.5,-27)]))}})()]))}function ei(e){return R(1,R(e,.2)+1)}function ti(e,t){let n=ht(e,t),r,s;return r=n[0],s=n[1],new L(r,s)}function $e(e,t,n,r){return Sr(r-t,n-e)}function ni(e,t,n){for(;;){let r=e,s=t,i=n;if(r>0)if(i instanceof y)e=r-1,t=s,n=f([new Ce(new L(0,we*-1),-1,new Z)]);else{let a=i.tail;if(a instanceof y){let c=i.head;e=r-1,t=s,n=f([new Ce(new L(0,we*-2),-1,new Z),c])}else{let c=i.head,l=a.head,o=$e(l.pos.x,l.pos.y,c.pos.x,c.pos.y),p=Lt(Bs,s),h,g;h=p[0],g=p[1];let b=gn(c.pos,ti(we,o+h)),d=$e(0,l.height,we,c.height),j=Lt(.005,g),P,T;P=j[0],T=j[1];let O=d+P,S,I=jr(O)*we;S=tn(I,Mt*-1,Mt);let D=S;e=r-1,t=T,n=$(new Ce(b,D,new Z),i)}}else return i}}function ri(e,t,n,r,s){let i=$e(0,0,n,e.height),u=n>50,a;u?a=1:a=ei(n);let c=a,l=new L(R(t*le.x,Re),We(R(i*le.x,Re))),o,p=Js(e.kind,r,u,s),h=N(p,c);o=A(h,l.x,l.y);let g=o,b;if(u)b=me();else{let P=$e(0,0,n,-10),T=new L(l.x,We(R(P*le.x,Re))),O=s.shadow_picture,S=N(O,c);b=A(S,T.x,T.y)}return k(f([b,g]))}function si(e){for(;;){let t=e,n=Ae(),r=He(),s=We(r),i=t;if(i>r)e=i-n;else{let u=t;if(u<=s)e=u+n;else return t}}}function Be(e){return e*.005}function rt(e,t,n){return(t-e)*n+e}function Ft(e,t,n,r,s,i,u,a,c){let l=c,o=Zt(R(a,l)),p=Vt(0,c),h=Se(p,g=>{let b=g,d=R(b,l-1),j=ut(rt(e,r,d),rt(t,s,d),rt(n,i,d)),P;if(j instanceof x)P=j[0];else throw z("let_assert",fe,"app",992,"view_gradient","Pattern match failed, no pattern matched the value.",{value:j,start:25636,end:25863,pattern_start:25647,pattern_end:25659});let T=je(u,o),O=se(T,o*b),S=F(O,P);return V(S)});return k(h)}function ii(){let e=f([Ft(.85,.6,.9,.7,.4,.98,H,m/2,50),(()=>{let t=Ft(.6,.4,.95,.6,.7,.8,H,m/2,50);return se(t,le.y)})()]);return k(e)}function Dt(e){return Ye(e*(Ae()/4))}function ai(e){let t=e.keyboard,n=e.drag;if(t.left)if(t.right){if(n instanceof W)return e;if(n instanceof _e){let i=n.start_pos,u=n.start_avatar_dir,a=Be(e.mouse.pos.x-i.x);return new v(e.game_status,(()=>{let c=e.avatar;return new re(c.pos,u-a)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}else{let i=n.force,u=n.released_time,a=e.current_time-u,c=De(1,R(a,qt));if(c>=1)return new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new W,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed);{let o=1-Dt(c),p=e.current_time-e.prev_tick_time,h=Be(p*i)*o;return new v(e.game_status,(()=>{let g=e.avatar;return new re(g.pos,e.avatar.dir-h)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}}}else return It(e,-1);else{if(t.right)return It(e,1);if(n instanceof W)return e;if(n instanceof _e){let i=n.start_pos,u=n.start_avatar_dir,a=Be(e.mouse.pos.x-i.x);return new v(e.game_status,(()=>{let c=e.avatar;return new re(c.pos,u-a)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}else{let i=n.force,u=n.released_time,a=e.current_time-u,c=De(1,R(a,qt));if(c>=1)return new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new W,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed);{let o=1-Dt(c),p=e.current_time-e.prev_tick_time,h=Be(p*i)*o;return new v(e.game_status,(()=>{let g=e.avatar;return new re(g.pos,e.avatar.dir-h)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}}}}const de=60,Ve=20;function ui(){return f([new vn(H-de-2,m-Ve-2,de,Ve,e=>(Ts("https://github.com/agj/cielos"),e))])}function ci(e,t,n){let r=.5,s=ie(e,r),i=k(f([je(de,20),(()=>{let a=G(e,t,n.color_dark_blue),c=N(a,r);return A(c,de*.5-s*.5,Ve*.5-pe*r*.5)})()])),u=F(i,n.color_white_transparent);return V(u)}function fi(e,t){let n=ci("about",e,t);return A(n,H-de-2,m-Ve-2)}function li(e){return k(f([(()=>{let t=Gs(e.current_time,e.consts);return A(t,0,80)})(),(()=>{let t=Vs(e.current_time,Fs(e.objects,new Z),e.consts);return A(t,0,200)})(),fi(e.current_time,e.consts)]))}function _i(e){return k(f([(()=>{let t=e.game_status;return t instanceof C?me():t instanceof X?li(e):Hs(e)})(),(()=>{let t=ms(e.game_status,e.current_time,e.consts);return A(t,17,m-17)})()]))}function oi(e){let t=e.avatar,n,r=k((()=>{let i=e.objects,u=Ht(i,c=>{let l=$e(t.pos.x,t.pos.y,c.pos.x,c.pos.y),o=si(l-t.dir),p=Ue(bn(t.pos,c.pos));return Ue(o)<=Re?new x([c,o,p]):new Y(void 0)}),a=Gt(u,(c,l)=>Wt(mt(c[2],l[2])));return Se(a,c=>ri(c[0],c[1],c[2],e.current_time,e.consts))})());n=A(r,le.x,le.y);let s=n;return k(f([e.consts.background_picture,s,Ys(e),_i(e)]))}function Ne(e){xn(new kn);let t=e.game_status;return t instanceof C?new v(new X,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):t instanceof X?new v(new C,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):$n(e.seed)}function $n(e){let t=Xe(0,1,1,.5),n;if(t instanceof x)n=t[0];else throw z("let_assert",fe,"app",31,"init","Pattern match failed, no pattern matched the value.",{value:t,start:628,end:705,pattern_start:639,pattern_end:666});let r=ut(.6,.7,.7),s;if(r instanceof x)s=r[0];else throw z("let_assert",fe,"app",32,"init","Pattern match failed, no pattern matched the value.",{value:r,start:708,end:771,pattern_start:719,pattern_end:738});let i=Xe(.75,.5,.4,.05),u;if(i instanceof x)u=i[0];else throw z("let_assert",fe,"app",33,"init","Pattern match failed, no pattern matched the value.",{value:i,start:774,end:861,pattern_start:785,pattern_end:816});let a=ut(.12,1,.7),c;if(a instanceof x)c=a[0];else throw z("let_assert",fe,"app",35,"init","Pattern match failed, no pattern matched the value.",{value:a,start:864,end:925,pattern_start:875,pattern_end:891});return new v(new X,new re(new L(0,0),-.25*Ae()),0,ni(100,e,f([])),new ne(new L(0,0),new L(0,0)),new U(!1,!1),new W,0,0,Un(f([f([pi()]),ui()])),new Rs(ii(),Zs(u),s,yr,n,c,br,u),e)}function pi(){return new vn(0,m-30,30,30,Ne)}function hi(e){return $n(ks())}function wi(e,t){let n=e.game_status;if(n instanceof C)if(t instanceof Oe){let r=t[0],s=new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,r,e.current_time,e.press_regions,e.consts,e.seed),i=Us(s),u=ai(i),a=Ws(u);return Ds(a)}else if(t instanceof Me){let r=t[0];return r instanceof ge?new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new U(!0,s.right)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):r instanceof be?new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new U(s.left,!0)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):r instanceof Ie?Ne(e):e}else if(t instanceof qe){let r=t[0];return r instanceof ge?new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new U(!1,s.right)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):r instanceof be?new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new U(s.left,!1)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):e}else if(t instanceof ze){let r=t[0],s=t[1];return new v(e.game_status,e.avatar,e.rotation_force,e.objects,new ne(new L(r,s),e.mouse.pos),e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}else if(t instanceof Le)if(t[0]instanceof ye){let s,i=e.press_regions;s=et(i,a=>e.mouse.pos.x>=a.x&&e.mouse.pos.x<a.x+a.width&&e.mouse.pos.y>=a.y&&e.mouse.pos.y<a.y+a.height);let u=s;if(u instanceof x)return u[0].on_press(e);{let a=e.game_status;return a instanceof C?new v(e.game_status,e.avatar,e.rotation_force,e.objects,(()=>{let c=e.mouse;return new ne(c.pos,e.mouse.pos)})(),e.keyboard,new _e(e.mouse.pos,e.avatar.dir),e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):a instanceof X?new v(new C,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):e}}else return e;else return t[0]instanceof ye?Xs(e):e;else if(n instanceof X)if(t instanceof Oe){let r=t[0];return new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new W,r,e.prev_tick_time,e.press_regions,e.consts,e.seed)}else{if(t instanceof Me)return t[0]instanceof Ie?Ne(e):e;if(t instanceof qe){let r=t[0];return r instanceof ge?new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new U(!1,s.right)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):r instanceof be?new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new U(s.left,!1)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):e}else if(t instanceof ze){let r=t[0],s=t[1];return new v(e.game_status,e.avatar,e.rotation_force,e.objects,new ne(new L(r,s),e.mouse.pos),e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}else if(t instanceof Le)if(t[0]instanceof ye){let s,i=e.press_regions;s=et(i,a=>e.mouse.pos.x>=a.x&&e.mouse.pos.x<a.x+a.width&&e.mouse.pos.y>=a.y&&e.mouse.pos.y<a.y+a.height);let u=s;if(u instanceof x)return u[0].on_press(e);{let a=e.game_status;return a instanceof C?new v(e.game_status,e.avatar,e.rotation_force,e.objects,(()=>{let c=e.mouse;return new ne(c.pos,e.mouse.pos)})(),e.keyboard,new _e(e.mouse.pos,e.avatar.dir),e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):a instanceof X?new v(new C,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):e}}else return e;else return e}else if(t instanceof Oe){let r=t[0];return new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new W,r,e.prev_tick_time,e.press_regions,e.consts,e.seed)}else{if(t instanceof Me)return t[0]instanceof Ie?Ne(e):e;if(t instanceof qe){let r=t[0];return r instanceof ge?new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new U(!1,s.right)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):r instanceof be?new v(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new U(s.left,!1)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):e}else if(t instanceof ze){let r=t[0],s=t[1];return new v(e.game_status,e.avatar,e.rotation_force,e.objects,new ne(new L(r,s),e.mouse.pos),e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed)}else if(t instanceof Le)if(t[0]instanceof ye){let s,i=e.press_regions;s=et(i,a=>e.mouse.pos.x>=a.x&&e.mouse.pos.x<a.x+a.width&&e.mouse.pos.y>=a.y&&e.mouse.pos.y<a.y+a.height);let u=s;if(u instanceof x)return u[0].on_press(e);{let a=e.game_status;return a instanceof C?new v(e.game_status,e.avatar,e.rotation_force,e.objects,(()=>{let c=e.mouse;return new ne(c.pos,e.mouse.pos)})(),e.keyboard,new _e(e.mouse.pos,e.avatar.dir),e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):a instanceof X?new v(new C,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts,e.seed):e}}else return e;else return e}}function gi(){return bs(hi,wi,oi,"#app")}gi();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const yt=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",yt("mousedown",1));window.addEventListener("touchend",yt("mouseup",0));window.addEventListener("touchmove",yt("mousemove",void 0));
