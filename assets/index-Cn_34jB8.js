(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class _{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class xe{static fromArray(t,n){let r=n||new v;for(let s=t.length-1;s>=0;--s)r=new It(t[s],r);return r}[Symbol.iterator](){return new ln(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof v}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function x(e,t){return new It(e,t)}function f(e,t){return xe.fromArray(e,t)}class ln{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof v)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class v extends xe{}class It extends xe{constructor(t,n){super(),this.head=t,this.tail=n}}class _n{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return ge(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;const n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let s=0;s<n;s++)if(this.rawBuffer[s]!==t.rawBuffer[s])return!1;const r=this.bitSize%8;if(r){const s=8-r;if(this.rawBuffer[n]>>s!==t.rawBuffer[n]>>s)return!1}}else{for(let s=0;s<n;s++){const i=ge(this.rawBuffer,this.bitOffset,s),u=ge(t.rawBuffer,t.bitOffset,s);if(i!==u)return!1}const r=this.bitSize%8;if(r){const s=ge(this.rawBuffer,this.bitOffset,n),i=ge(t.rawBuffer,t.bitOffset,n),u=8-r;if(s>>u!==i>>u)return!1}}return!0}get buffer(){if(gt("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(gt("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function ge(e,t,n){if(t===0)return e[n]??0;{const r=e[n]<<t&255,s=e[n+1]>>8-t;return r|s}}const wt={};function gt(e,t){wt[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),wt[e]=!0)}class Ye extends _{static isResult(t){return t instanceof Ye}}class $ extends Ye{constructor(t){super(),this[0]=t}isOk(){return!0}}const on=e=>e instanceof $,pn=e=>e[0];class X extends Ye{constructor(t){super(),this[0]=t}isOk(){return!1}}function Kt(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),s=n.pop();if(r===s)continue;if(!bt(r)||!bt(s)||!$n(r,s)||wn(r,s)||gn(r,s)||bn(r,s)||yn(r,s)||vn(r,s)||kn(r,s))return!1;const u=Object.getPrototypeOf(r);if(u!==null&&typeof u.equals=="function")try{if(r.equals(s))continue;return!1}catch{}let[a,c]=hn(r);const l=a(r),o=a(s);if(l.length!==o.length)return!1;for(let p of l)n.push(c(r,p),c(s,p))}return!0}function hn(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function wn(e,t){return e instanceof Date&&(e>t||e<t)}function gn(e,t){return!(e instanceof _n)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function bn(e,t){return Array.isArray(e)&&e.length!==t.length}function yn(e,t){return e instanceof Map&&e.size!==t.size}function vn(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function kn(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function bt(e){return typeof e=="object"&&e!==null}function $n(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function L(e,t){return t===0?0:e/t}function M(e,t,n,r,s,i,u){let a=new globalThis.Error(i);a.gleam_error=e,a.file=t,a.module=n,a.line=r,a.function=s,a.fn=s;for(let c in u)a[c]=u[c];return a}class z extends _{}class I extends _{}class ut extends _{}function Rt(e){return e instanceof z?new ut:e instanceof I?e:new z}class E extends _{constructor(t){super(),this[0]=t}}class Nt extends _{}class P extends _{}class ke extends _{}function xn(e,t){for(;;){let n=e,r=t;if(n instanceof v)return r;e=n.tail,t=r+1}}function Ct(e){return xn(e,0)}function dn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof v)return i;{let u=r.head,a=r.tail;s(u)?(e=a,t=s,n=i+1):(e=a,t=s,n=i)}}}function An(e,t){return dn(e,t,0)}function oe(e,t){for(;;){let n=e,r=t;if(n instanceof v)return r;{let s=n.head;e=n.tail,t=x(s,r)}}}function T(e){return oe(e,f([]))}function Sn(e){if(e instanceof v)return new X(void 0);{let t=e.head;return new $(t)}}function jn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof v)return T(i);{let u=r.head,a=r.tail,c,l=s(u);if(l instanceof $){let p=l[0];c=x(p,i)}else c=i;let o=c;e=a,t=s,n=o}}}function Ft(e,t){return jn(e,t,f([]))}function En(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof v)return T(i);{let u=r.head;e=r.tail,t=s,n=x(s(u),i)}}}function we(e,t){return En(e,t,f([]))}function Pn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof v)return T(a);{let c=s.head,l=s.tail,o=x(i(c,u),a);e=l,t=i,n=u+1,r=o}}}function Ne(e,t){return Pn(e,t,0,f([]))}function Tn(e,t){for(;;){let n=e,r=t;if(n instanceof v)return T(r);{let s=n.head;e=n.tail,t=oe(s,r)}}}function Bn(e){return Tn(e,f([]))}function On(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof v)return s;{let u=r.head;e=r.tail,t=i(s,u),n=i}}}function Je(e,t){for(;;){let n=e,r=t;if(n instanceof v)return new X(void 0);{let s=n.head,i=n.tail;if(r(s))return new $(s);e=i,t=r}}}function Mn(e,t){for(;;){let n=e,r=t;if(n instanceof v)return!1;{let s=n.head,i=n.tail,u=r(s);if(u)return u;e=i,t=r}}}function qn(e,t,n,r,s,i){for(;;){let u=e,a=t,c=n,l=r,o=s,p=i,h=x(o,c);if(u instanceof v)return l instanceof P?x(T(h),p):x(h,p);{let g=u.head,b=u.tail,d=a(o,g);if(l instanceof P)if(d instanceof z)e=b,t=a,n=h,r=l,s=g,i=p;else if(d instanceof I)e=b,t=a,n=h,r=l,s=g,i=p;else{let j;l instanceof P?j=x(T(h),p):j=x(h,p);let B=j;if(b instanceof v)return x(f([g]),B);{let O=b.head,q=b.tail,S,R=a(g,O);R instanceof z?S=new P:R instanceof I?S=new P:S=new ke;let Q=S;e=q,t=a,n=f([g]),r=Q,s=O,i=B}}else if(d instanceof z){let j;l instanceof P?j=x(T(h),p):j=x(h,p);let B=j;if(b instanceof v)return x(f([g]),B);{let O=b.head,q=b.tail,S,R=a(g,O);R instanceof z?S=new P:R instanceof I?S=new P:S=new ke;let Q=S;e=q,t=a,n=f([g]),r=Q,s=O,i=B}}else if(d instanceof I){let j;l instanceof P?j=x(T(h),p):j=x(h,p);let B=j;if(b instanceof v)return x(f([g]),B);{let O=b.head,q=b.tail,S,R=a(g,O);R instanceof z?S=new P:R instanceof I?S=new P:S=new ke;let Q=S;e=q,t=a,n=f([g]),r=Q,s=O,i=B}}else e=b,t=a,n=h,r=l,s=g,i=p}}}function zn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof v)return oe(i,a);if(i instanceof v)return oe(s,a);{let c=s.head,l=s.tail,o=i.head,p=i.tail,h=u(c,o);h instanceof z?(e=l,t=i,n=u,r=x(c,a)):(h instanceof I,e=s,t=p,n=u,r=x(o,a))}}}function Ln(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof v)return T(i);{let u=r.tail;if(u instanceof v){let a=r.head;return T(x(T(a),i))}else{let a=r.head,c=u.head,l=u.tail,o=zn(a,c,s,f([]));e=l,t=s,n=x(o,i)}}}}function In(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof v)return oe(i,a);if(i instanceof v)return oe(s,a);{let c=s.head,l=s.tail,o=i.head,p=i.tail,h=u(c,o);h instanceof z?(e=s,t=p,n=u,r=x(o,a)):(h instanceof I,e=l,t=i,n=u,r=x(c,a))}}}function Kn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof v)return T(i);{let u=r.tail;if(u instanceof v){let a=r.head;return T(x(T(a),i))}else{let a=r.head,c=u.head,l=u.tail,o=In(a,c,s,f([]));e=l,t=s,n=x(o,i)}}}}function Rn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof v)return r;if(s instanceof P){if(r.tail instanceof v)return r.head;e=Ln(r,i,f([])),t=new ke,n=i}else if(r.tail instanceof v){let a=r.head;return T(a)}else e=Kn(r,i,f([])),t=new P,n=i}}function Dt(e,t){if(e instanceof v)return e;{let n=e.tail;if(n instanceof v)return e;{let r=e.head,s=n.head,i=n.tail,u,a=t(r,s);a instanceof z?u=new P:a instanceof I?u=new P:u=new ke;let c=u,l=qn(i,t,f([r]),c,s,f([]));return Rn(l,new P,t)}}}function Nn(e,t,n){for(;;){let r=e,s=t,i=n,u=Xt(r,s);if(u instanceof z)e=r,t=s-1,n=x(s,i);else{if(u instanceof I)return x(s,i);e=r,t=s+1,n=x(s,i)}}}function ct(e,t){return Nn(e,t,f([]))}function He(e){return e.toString()}function et(e){if(e==="")return 0;const t=Ut(e);if(t){let n=0;for(const r of t)n++;return n}else return e.match(/./gsu).length}function Cn(e){const t=Ut(e);return t?xe.fromArray(Array.from(t).map(n=>n.segment)):xe.fromArray(e.match(/./gsu))}let yt;function Ut(e){if(globalThis.Intl&&Intl.Segmenter)return yt||=new Intl.Segmenter,yt.segment(e)[Symbol.iterator]()}function Fn(e){return Math.ceil(e)}function Dn(e){return Math.floor(e)}function vt(e){return Math.round(e)}function Un(e,t){return Math.pow(e,t)}function je(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function Wn(e,t){return e===t?new I:e<t?new z:new ut}function Ce(e,t){return e<t?e:t}function Wt(e,t){return e>t?e:t}function Xn(e,t,n){let s=Ce(e,n);return Wt(s,t)}function Fe(e){return e>=0?e:0-e}function Yn(e,t){let n=Fn(t)-t>0;return e<0&&n||e===0&&t<0?new X(void 0):new $(Un(e,t))}function Hn(e){return Yn(e,.5)}function De(e){return-1*e}function kt(e){return e>=0?vt(e):0-vt(De(e))}function Gn(e,t){for(;;){let n=e,r=t;if(n instanceof v)return r;{let s=n.head;e=n.tail,t=s+r}}}function Vn(e){return Gn(e,0)}function $t(e,t){if(t===0)return new X(void 0);{let n=t;return new $(L(e,n))}}function Jn(e,t){return e+t}function xt(e,t){return e*t}function Zn(e,t){return e-t}function Xt(e,t){return e===t?new I:e<t?new z:new ut}function Qn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof v)return i;{let u=r.head;e=r.tail,t=s,n=i+s+u}}}function mn(e,t){if(e instanceof v)return"";{let n=e.head,r=e.tail;return Qn(r,t,n)}}function er(e,t){return Cn(e)}function tr(e,t){if(e instanceof $){let n=e[0];return new $(t(n))}else return e}function Ee(e,t){if(e instanceof $){let n=e[0];return t(n)}else return e}function nr(e,t){return e instanceof $?e[0]:t}const dt="src/gleam_community/colour.gleam";class ft extends _{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class rr extends _{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function Pe(e){return e>1||e<0?new X(void 0):new $(e)}function Ze(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,u=s*2,a=s*3;return i<1?t+(n-t)*s*6:u<1?n:a<2?t+(n-t)*(2/3-s)*6:t}function sr(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let u=s,a=n*2-u,c=Ze(e+1/3,a,u),l=Ze(e,a,u),o=Ze(e-1/3,a,u);return[c,l,o,r]}function Ue(e,t,n,r){return Ee(Pe(e),s=>Ee(Pe(t),i=>Ee(Pe(n),u=>Ee(Pe(r),a=>new $(new rr(s,i,u,a))))))}function tt(e,t,n){return Ue(e,t,n,1)}function ir(e){if(e instanceof ft){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return sr(t,n,r,s)}}function At(e){let t=ir(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let u=c=>{let l,p=xt(c,1e4),h=kt(p),g=h;l=$t(g,100);let b=l,d;if(b instanceof $)d=b[0];else throw M("let_assert",dt,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:b,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return d},a=c=>{let l,p=xt(c,1e3),h=kt(p),g=h;l=$t(g,1e3);let b=l,d;if(b instanceof $)d=b[0];else throw M("let_assert",dt,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:b,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return d};return mn(f(["rgba(",je(u(n))+"%,",je(u(r))+"%,",je(u(s))+"%,",je(a(i)),")"]),"")}const ar=new ft(.9607843137254902,.4745098039215686,0,1),ur=new ft(1,1,1,1);function cr(e){return Math.sin(e)}function fr(){return Math.PI}function lr(e,t){return Math.atan2(e,t)}function _r(e){return Math.cos(e)}function or(e,t){return lr(e,t)}function pr(e){return _r(e)}function de(e){return cr(e)}function lt(e,t){let n=e*pr(t),r=e*de(t);return[n,r]}function We(){return fr()}function fe(){return 2*We()}function hr(){return Math.PI}class Yt extends _{}class _t extends _{constructor(t,n){super(),this[0]=t,this.closed=n}}class Ht extends _{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class wr extends _{constructor(t,n){super(),this.text=t,this.style=n}}class gr extends _{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class Gt extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class ot extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class br extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class Vt extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ge extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class Jt extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class Zt extends _{constructor(t){super(),this[0]=t}}class yr extends _{}class Qt extends _{}class vr extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class nt extends _{constructor(t){super(),this[0]=t}}function rt(e){return new nt(e)}function Ve(){return new Yt}function pt(e){return new _t(e,!0)}function w(e){return new _t(e,!1)}function Se(e,t){return pt(f([[0,0],[e,0],[e,t],[0,t]]))}function A(e,t,n){return new Vt(e,[t,n])}function J(e,t){return A(e,t,0)}function re(e,t){return A(e,0,t)}function St(e,t){return new Ge(e,[t,1])}function jt(e,t){return new Ge(e,[1,t])}function C(e,t){return new Ge(e,[t,t])}function st(e,t){return new Jt(e,t)}function F(e,t){return new Gt(e,t)}function mt(e,t,n){return new ot(e,new vr(t,n))}function G(e){return new ot(e,new Qt)}function k(e){return new Zt(e)}function en(e){return new Ht(e,new nt(0),new nt(2*hr()))}class Be extends _{constructor(t){super(),this[0]=t}}class Oe extends _{constructor(t){super(),this[0]=t}}class Me extends _{constructor(t){super(),this[0]=t}}class qe extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class ze extends _{constructor(t){super(),this[0]=t}}class kr extends _{constructor(t){super(),this[0]=t}}class be extends _{}class ye extends _{}class $r extends _{}class xr extends _{}class dr extends _{}class Ar extends _{}class Sr extends _{}class jr extends _{}class Er extends _{}class Pr extends _{}class Tr extends _{}class Br extends _{}class Or extends _{}class Le extends _{}class Mr extends _{}class ve extends _{}class qr extends _{}class zr extends _{}function Lr(e){return document.querySelector(e).getContext("2d")}function tn(e){window.requestAnimationFrame(t=>{e(t)})}function Qe(e,t){window.addEventListener(e,t)}function Ir(e){return e.keyCode}function ie(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function ue(e){return window.PAINT_STATE?e in window.PAINT_STATE?new $(window.PAINT_STATE[e]):new X(void 0):new X(void 0)}function Kr(e){return e.canvas.clientWidth}function Rr(e){return e.canvas.clientHeight}function Nr(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function Cr(e,t,n,r){let s=on(t)?pn(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function Fr(e){e.reset()}function Dr(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function Ur(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const u of t){let a=u[0],c=u[1];i?e.lineTo(a,c):(e.moveTo(a,c),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function Wr(e,t,n){e.font=n,e.fillText(t,0,0)}function m(e){e.save()}function ee(e){e.restore()}function Xr(e,t){e.fillStyle=t}function Yr(e,t){e.strokeStyle=t}function Hr(e,t){e.lineWidth=t}function Gr(e,t,n){e.translate(t,n)}function Vr(e,t,n){e.scale(t,n)}function Jr(e,t){e.rotate(t)}function Zr(e,t,n,r){e.drawImage(t,0,0,n,r)}function Qr(e,t){e.imageSmoothingEnabled=t}const $e="src/paint/canvas.gleam";class mr extends _{constructor(t,n){super(),this.width=t,this.height=n}}class Ie extends _{constructor(t,n){super(),this.fill=t,this.stroke=n}}function V(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof Yt)return;if(r instanceof _t){let u=r[0],a=r.closed;return Ur(s,u,a,i.fill,i.stroke)}else if(r instanceof Ht){let u=r.radius,a=r.start,c=r.end,l;l=a[0];let o;return o=c[0],Dr(s,u,l,o,i.fill,i.stroke)}else if(r instanceof wr){let u=r.text,a=r.style,c,l;return c=a.size_px,l=a.font_family,m(s),Wr(s,u,He(c)+"px "+l),ee(s)}else if(r instanceof gr){let u=r.width_px,a=r.height_px,c=r[0].id,l=ue(c),o;if(l instanceof $)o=l[0];else throw M("let_assert",$e,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:l,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return Zr(s,o,u,a)}else if(r instanceof Gt){let u=r[0],a=r[1];return m(s),Xr(s,At(a)),V(u,s,new Ie(!0,i.stroke)),ee(s)}else if(r instanceof ot){let u=r[0],a=r[1];if(a instanceof Qt)e=u,t=s,n=new Ie(i.fill,!1);else{let c=a[0],l=a[1];return m(s),Yr(s,At(c)),Hr(s,l),V(u,s,new Ie(i.fill,!0)),ee(s)}}else if(r instanceof br){let u=r[0],a=r[1];return m(s),Qr(s,a instanceof yr),V(u,s,i),ee(s)}else if(r instanceof Vt){let u=r[0],a=r[1],c,l;return c=a[0],l=a[1],m(s),Gr(s,c,l),V(u,s,i),ee(s)}else if(r instanceof Ge){let u=r[0],a=r[1],c,l;return c=a[0],l=a[1],m(s),Vr(s,c,l),V(u,s,i),ee(s)}else if(r instanceof Jt){let u=r[0],a=r[1],c;return c=a[0],m(s),Jr(s,c),V(u,s,i),ee(s)}else{let u=r[0];if(u instanceof v)return;{let a=u.head,c=u.tail;V(a,s,i),e=new Zt(c),t=s,n=i}}}}function es(e){return e===32?new E(new dr):e===37?new E(new be):e===38?new E(new $r):e===39?new E(new ye):e===40?new E(new xr):e===87?new E(new Ar):e===65?new E(new Sr):e===83?new E(new jr):e===68?new E(new Er):e===90?new E(new Pr):e===88?new E(new Tr):e===67?new E(new Br):e===18?new E(new Or):e===27?new E(new Le):e===8?new E(new Mr):new Nt}const ts=new Ie(!1,!0);function nn(e,t,n,r){return s=>{let i=ue(r),u;if(i instanceof $)u=i[0];else throw M("let_assert",$e,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let a=n(u,new Be(s));ie(a,r);let c=t(a);return Fr(e),V(c,e,ts),tn(nn(e,t,n,r))}}function ns(e,t,n,r){let s=Lr(r),i=e(new mr(Kr(s),Rr(s)));ie(i,r);let u=(c,l)=>Qe(c,o=>{let p=es(Ir(o));if(p instanceof E){let h=p[0],g=ue(r),b;if(g instanceof $)b=g[0];else throw M("let_assert",$e,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:g,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let d=t(b,l(h));return ie(d,r)}else return});u("keydown",c=>new Oe(c)),u("keyup",c=>new Me(c)),Qe("mousemove",c=>{let l=Nr(s,c),o,p;o=l[0],p=l[1];let h=ue(r),g;if(h instanceof $)g=h[0];else throw M("let_assert",$e,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:h,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let b=t(g,new qe(o,p));ie(b,r)});let a=(c,l,o)=>Qe(c,p=>{let h="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,g=ue(h);ie(p,h);let b=q=>Cr(p,g,q,o),d=q=>{let S=ue(r),R;if(S instanceof $)R=S[0];else throw M("let_assert",$e,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:S,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let Q=t(R,l(q));return ie(Q,r)};b(0)&&d(new ve),b(1)&&d(new qr),b(2)&&d(new zr)});return a("mousedown",c=>new ze(c),!0),a("mouseup",c=>new kr(c),!1),tn(nn(s,n,t,r))}class K extends _{constructor(t,n){super(),this.x=t,this.y=n}}function rs(e){return f([e.x,e.y])}function rn(e,t,n){return new K(n(e.x,t.x),n(e.y,t.y))}const ss="src/vec/vec2f.gleam";function is(e,t){return rn(e,t,Jn)}function as(e){let n=rs(e),r=we(n,s=>s*s);return Vn(r)}function us(e,t){let r=rn(e,t,Zn);return as(r)}function sn(e,t){let n,r=us(e,t);n=Hn(r);let s=n,i;if(s instanceof $)i=s[0];else throw M("let_assert",ss,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const cs=e=>{window.open(e,"_blank")},Y=300,Z=300,le=new K(150,150),fs=.01,ls=5e-6,_s=5,Ke=.7853981634,pe=12,it=3,Et=2e3,os=300;function ae(e,t){let n;if(e==="a")n=w(f([[3,1],[11,1],[11,11],[1,11],[1,5],[11,5]]));else if(e==="b")n=w(f([[1,3],[11,3],[11,11],[1,11],[1,-1]]));else if(e==="c")n=w(f([[11,11],[1,11],[1,1],[11,1],[11,3]]));else if(e==="d"){let s=ae("b",t),i=St(s,-1);n=J(i,12)}else if(e==="e")n=w(f([[9,11],[1,11],[1,1],[11,1],[11,7],[1,7]]));else if(e==="f")n=k(f([w(f([[0,5],[11,5]])),w(f([[5,12],[5,-1],[12,-1]]))]));else if(e==="g")n=k(f([w(f([[0,1],[10,1],[10,7],[1,7],[1,1]])),w(f([[3,7],[3,11],[11,11],[11,13]]))]));else if(e==="i")n=k(f([w(f([[6,-2],[6,0]])),w(f([[2,3],[6,3],[6,11]])),w(f([[0,11],[12,11]]))]));else if(e==="j")n=k(f([w(f([[11,-2],[11,0]])),w(f([[11,2],[11,11],[1,11],[1,9]]))]));else if(e==="k")n=k(f([w(f([[1,0],[1,12]])),w(f([[1,6],[11,6],[11,12]])),w(f([[11,0],[11,1],[6,6],[5,6]]))]));else if(e==="l")n=w(f([[12,11],[1,11],[1,0]]));else if(e==="m")n=k(f([w(f([[1,12],[1,1],[11,1],[11,12]])),w(f([[6,1],[6,12]]))]));else if(e==="n")n=w(f([[1,12],[1,1],[9,1],[9,3],[11,3],[11,12]]));else if(e==="o")n=w(f([[0,1],[11,1],[11,11],[1,11],[1,1]]));else if(e==="p"){let s=ae("b",t),i=jt(s,-1);n=re(i,12)}else if(e==="r")n=w(f([[1,12],[1,1],[11,1],[11,3]]));else if(e==="s")n=w(f([[11,1],[2,1],[2,6],[11,6],[11,11],[1,11],[1,9]]));else if(e==="t")n=k(f([w(f([[0,2],[12,2]])),w(f([[5,-1],[5,11],[12,11]]))]));else if(e==="u")n=w(f([[11,0],[11,11],[1,11],[1,0]]));else if(e==="v")n=w(f([[11,0],[11,11],[4,11],[1,8],[1,0]]));else if(e==="y")n=k(f([w(f([[11,0],[11,13],[1,13]])),w(f([[11,9],[1,9],[1,0]]))]));else if(e==="0")n=k(f([w(f([[0,1],[11,1],[11,11],[1,11],[1,1]])),w(f([[5,6],[7,6]]))]));else if(e==="1")n=k(f([w(f([[6,0],[6,11]])),w(f([[0,11],[12,11]])),w(f([[1,3],[6,3]]))]));else if(e==="2")n=w(f([[1,3],[1,1],[11,1],[11,7],[1,7],[1,11],[12,11]]));else if(e==="3")n=k(f([w(f([[1,3],[1,1],[11,1],[11,11],[1,11],[1,9]])),w(f([[5,6],[11,6]]))]));else if(e==="4")n=k(f([w(f([[11,7],[1,7],[1,0]])),w(f([[11,0],[11,12]]))]));else if(e==="5"){let s=ae("2",t),i=jt(s,-1);n=re(i,12)}else if(e==="6")n=w(f([[1,5],[11,5],[11,11],[1,11],[1,1],[12,1]]));else if(e==="7")n=w(f([[0,1],[11,1],[11,3],[7,7],[7,12]]));else if(e==="8")n=k(f([w(f([[2,6],[2,1],[10,1],[10,6]])),w(f([[0,6],[11,6],[11,11],[1,11],[1,6]]))]));else if(e==="9"){let s=ae("6",t),i=st(s,rt(We()));n=A(i,12,12)}else if(e==="←")n=k(f([w(f([[6,11],[5,11],[1,7],[1,5],[5,1],[6,1]])),w(f([[1,6],[12,6]]))]));else if(e==="→"){let s=ae("←",t),i=st(s,rt(We()));n=A(i,12,12)}else if(e==="♥︎"){let s=w(f([[5,2],[6,3],[8,1],[9,1],[11,3],[11,7],[7,11],[5.5,11]]));n=k(f([s,(()=>{let u=St(s,-1);return J(u,12)})()]))}else n=Ve();return mt(n,t,2)}function ps(e,t,n){let r=de(t/400)*.1,s=de(t/1600)*6,i=ae(e,n),u=F(i,n),a=G(u),c=A(a,-6,-6),l=st(c,rt(r));return A(l,6,6+s)}function H(e,t,n){let r=er(e),s=Ne(r,(i,u)=>{let a=ps(i,t+u*8e3,n);return J(a,u*(pe+it))});return k(s)}function se(e,t){let n=et(e);return((pe+it)*n-it)*t}function Pt(e,t,n){let r=H(e,t,n);return J(r,se(e,1)*-.5)}const ce="src/app.gleam";class y extends _{constructor(t,n,r,s,i,u,a,c,l,o,p){super(),this.game_status=t,this.avatar=n,this.rotation_force=r,this.objects=s,this.mouse=i,this.keyboard=u,this.drag=a,this.current_time=c,this.prev_tick_time=l,this.press_regions=o,this.consts=p}}class ne extends _{constructor(t,n){super(),this.pos=t,this.dir=n}}let an=class extends _{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class he extends _{}class un extends _{constructor(t){super(),this.collected_time=t}}class te extends _{constructor(t,n){super(),this.pos=t,this.prev_pos=n}}class D extends _{constructor(t,n){super(),this.left=t,this.right=n}}class U extends _{}class _e extends _{constructor(t,n){super(),this.start_pos=t,this.start_avatar_dir=n}}class hs extends _{constructor(t,n){super(),this.force=t,this.released_time=n}}class N extends _{}class W extends _{}class ws extends _{}class cn extends _{constructor(t,n,r,s,i){super(),this.x=t,this.y=n,this.width=r,this.height=s,this.on_press=i}}class gs extends _{constructor(t,n,r,s,i,u,a,c){super(),this.background_picture=t,this.shadow_picture=n,this.color_dark_blue=r,this.color_white=s,this.color_white_transparent=i,this.color_yellow=u,this.color_orange=a,this.color_dark_blue_transparent=c}}function bs(e){return!Mn(e,n=>n.kind instanceof he)}function ys(e){let t,n=e.objects;t=we(n,s=>Kt(s.kind,new he)&&sn(e.avatar.pos,s.pos)<.8?new an(s.pos,s.height,new un(e.current_time)):s);let r=t;return new y(bs(e.objects)?new ws:e.game_status,e.avatar,e.rotation_force,r,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}function vs(e,t){return An(e,n=>Kt(n.kind,t))}function ks(e){let t=e.current_time-e.prev_tick_time,n=fs*t,r=lt(n,e.avatar.dir),s,i;return s=r[0],i=r[1],new y(e.game_status,(()=>{let u=e.avatar;return new ne(is(e.avatar.pos,new K(s,i)),u.dir)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}function Tt(e,t){let n=e.current_time-e.prev_tick_time,r=t*n*ls,s=Xn(e.rotation_force+r,-2,2);return new y(e.game_status,e.avatar,s,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}function $s(e){if(Fe(e.rotation_force)>1e-8){let n=e.current_time-e.prev_tick_time,r=e.rotation_force*n,s=Ce(1,1-L(1,n*_s)),i=e.rotation_force*s;return new y(e.game_status,(()=>{let u=e.avatar;return new ne(u.pos,e.avatar.dir+r)})(),i,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}else return e}function xs(e){let t=e.drag;if(t instanceof U)return e;if(t instanceof _e){let n=e.mouse.pos.x-e.mouse.prev_pos.x,r=e.current_time-e.prev_tick_time,s=L(n,r);return Fe(s)>.01?new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new hs(s,e.current_time),e.current_time,e.prev_tick_time,e.press_regions,e.consts):new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new U,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}else return e}function ds(e){let t=Ft(e.objects,u=>{let a=u.kind;if(a instanceof un){let c=a.collected_time;return new $(c)}else return new X(void 0)}),n=On(t,-1e4,Wt),r=e.current_time-n,s=L(r,os);if(s<1){let u=Ue(0,0,1,1-s),a;if(u instanceof $)a=u[0];else throw M("let_assert",ce,"app",463,"view_screen_effects","Pattern match failed, no pattern matched the value.",{value:u,start:12304,end:12389,pattern_start:12315,pattern_end:12324});let c=Ct(t);return k(f([(()=>{let l=Se(Y,Z),o=F(l,a);return G(o)})(),(()=>{let l=H(He(c),e.current_time,e.consts.color_dark_blue),o=C(l,2);return A(o,20,30)})()]))}else return Ve()}function As(e){let t=Ct(e.objects),n,r=k(x((()=>{let c=Pt("♥︎congratulations♥︎",e.current_time,e.consts.color_yellow);return J(c,Y*.5)})(),(()=>{let c=f(["you collected all "+He(t)+" stars","you are super player"]);return Ne(c,(l,o)=>{let p=Pt(l,e.current_time,e.consts.color_dark_blue),h=C(p,.5);return A(h,Y*.5,30+pe*1.5*o)})})()));n=re(r,80);let s=n,i,u=k((()=>{let c=f(["  if you like","← you can play again"]);return Ne(c,(l,o)=>{let p=H(l,e.current_time,e.consts.color_white),h=C(p,.5);return re(h,30+pe*1.5*o)})})());return i=A(u,40,Z-70),k(f([s,i]))}function Ss(e,t){let n="cielos",r=1.5,s=se(n,r),i="by agj",u=.75,a=se(i,u),c=k(f([(()=>{let l=H(n,e,t.color_dark_blue);return C(l,r)})(),(()=>{let l=H(i,e,t.color_dark_blue),o=C(l,u);return A(o,s-a,40)})()]));return J(c,Y*.5-s*.5)}function js(e,t,n){let r=f(["drag or keys ←→ to turn","collect "+He(t)+" stars"]),s=.75,i,a=Dt(r,(g,b)=>Rt(Xt(et(g),et(b)))),c=Sn(a),l=tr(c,g=>se(g,s));i=nr(l,0);let o=i,p=k(Ne(r,(b,d)=>{let j=H(b,e,n.color_dark_blue);return re(j,pe*2.5*d)})),h=C(p,s);return J(h,Y*.5-o*.5)}function Bt(e,t,n){let r=pt((()=>{let i=ct(0,10);return we(i,u=>{let a=fe()/10*u+n,c;return u%2===0?c=250:c=140,lt(c,a)})})()),s=F(r,e);return mt(s,t,10)}function Ot(e,t,n){let r=e/2e3;return n instanceof E?Bt(t.color_white,t.color_yellow,r):Bt(t.color_yellow,t.color_orange,r)}function Mt(e,t){let n;t?n=e.color_white:n=e.color_yellow;let r=n,s=en(1),i=F(s,r);return G(i)}function Es(e,t,n,r){if(n)return e instanceof he?Mt(r,!1):Mt(r,!0);if(e instanceof he)return Ot(t,r,new Nt);{let s=e.collected_time;return Ot(t,r,new E(s))}}function Ps(e){let t=Se(200,5e3),n=J(t,-100),r=F(n,e);return G(r)}function Ts(e){let t=Se(4,12),n=k(f([t,A(t,8,0)])),r=F(n,e);return G(r)}function qt(e){let t=pt(f([[2,0],[11,6],[2,12]])),n=F(t,e);return G(n)}function Bs(e,t,n){return k(f([(()=>{let r=en(15),s=F(r,n.color_white_transparent);return G(s)})(),(()=>{if(e instanceof N){let r=Ts(n.color_dark_blue);return A(r,-6,-6)}else if(e instanceof W){let r="esc",s=.5,i,u=H(r,t,n.color_white);i=C(u,s);let a=i;return k(f([(()=>{let c=qt(n.color_dark_blue);return A(c,-6,-6)})(),A(a,se(r,s)*-.5,-27)]))}else{let r="esc",s=.5,i,u=H(r,t,n.color_white);i=C(u,s);let a=i;return k(f([(()=>{let c=qt(n.color_dark_blue);return A(c,-6,-6)})(),A(a,se(r,s)*-.5,-27)]))}})()]))}function Os(e){return L(1,L(e,.2)+1)}function Ms(e,t){let n=lt(e,t),r,s;return r=n[0],s=n[1],new K(r,s)}function at(e,t,n,r){return or(r-t,n-e)}function qs(e,t,n,r,s){let i=at(0,0,n,e.height),u=n>50,a;u?a=1:a=Os(n);let c=a,l=new K(L(t*le.x,Ke),De(L(i*le.x,Ke))),o,p=Es(e.kind,r,u,s),h=C(p,c);o=A(h,l.x,l.y);let g=o,b;if(u)b=Ve();else{let B=at(0,0,n,-10),O=new K(l.x,De(L(B*le.x,Ke))),q=s.shadow_picture,S=C(q,c);b=A(S,O.x,O.y)}return k(f([b,g]))}function zs(e){for(;;){let t=e,n=fe(),r=We(),s=De(r),i=t;if(i>r)e=i-n;else{let u=t;if(u<=s)e=u+n;else return t}}}function Te(e){return e*.005}function me(e,t,n){return(t-e)*n+e}function zt(e,t,n,r,s,i,u,a,c){let l=c,o=Dn(L(a,l)),p=ct(0,c),h=we(p,g=>{let b=g,d=L(b,l-1),j=tt(me(e,r,d),me(t,s,d),me(n,i,d)),B;if(j instanceof $)B=j[0];else throw M("let_assert",ce,"app",893,"view_gradient","Pattern match failed, no pattern matched the value.",{value:j,start:23304,end:23531,pattern_start:23315,pattern_end:23327});let O=Se(u,o),q=re(O,o*b),S=F(q,B);return G(S)});return k(h)}function Ls(){let e=f([zt(.85,.6,.9,.7,.4,.98,Y,Z/2,50),(()=>{let t=zt(.6,.4,.95,.6,.7,.8,Y,Z/2,50);return re(t,le.y)})()]);return k(e)}function Lt(e){return de(e*(fe()/4))}function Is(e){let t=e.keyboard,n=e.drag;if(t.left)if(t.right){if(n instanceof U)return e;if(n instanceof _e){let i=n.start_pos,u=n.start_avatar_dir,a=Te(e.mouse.pos.x-i.x);return new y(e.game_status,(()=>{let c=e.avatar;return new ne(c.pos,u-a)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}else{let i=n.force,u=n.released_time,a=e.current_time-u,c=Ce(1,L(a,Et));if(c>=1)return new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new U,e.current_time,e.prev_tick_time,e.press_regions,e.consts);{let o=1-Lt(c),p=e.current_time-e.prev_tick_time,h=Te(p*i)*o;return new y(e.game_status,(()=>{let g=e.avatar;return new ne(g.pos,e.avatar.dir-h)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}}}else return Tt(e,-1);else{if(t.right)return Tt(e,1);if(n instanceof U)return e;if(n instanceof _e){let i=n.start_pos,u=n.start_avatar_dir,a=Te(e.mouse.pos.x-i.x);return new y(e.game_status,(()=>{let c=e.avatar;return new ne(c.pos,u-a)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}else{let i=n.force,u=n.released_time,a=e.current_time-u,c=Ce(1,L(a,Et));if(c>=1)return new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new U,e.current_time,e.prev_tick_time,e.press_regions,e.consts);{let o=1-Lt(c),p=e.current_time-e.prev_tick_time,h=Te(p*i)*o;return new y(e.game_status,(()=>{let g=e.avatar;return new ne(g.pos,e.avatar.dir-h)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}}}}const Ae=60,Xe=20;function Ks(){return f([new cn(Y-Ae-2,Z-Xe-2,Ae,Xe,e=>(cs("https://github.com/agj/cielos"),e))])}function Rs(e,t,n){let r=.5,s=se(e,r),i=k(f([Se(Ae,20),(()=>{let a=H(e,t,n.color_dark_blue),c=C(a,r);return A(c,Ae*.5-s*.5,Xe*.5-pe*r*.5)})()])),u=F(i,n.color_white_transparent);return G(u)}function Ns(e,t){let n=Rs("about",e,t);return A(n,Y-Ae-2,Z-Xe-2)}function Cs(e){return k(f([(()=>{let t=Ss(e.current_time,e.consts);return A(t,0,80)})(),(()=>{let t=js(e.current_time,vs(e.objects,new he),e.consts);return A(t,0,200)})(),Ns(e.current_time,e.consts)]))}function Fs(e){return k(f([(()=>{let t=e.game_status;return t instanceof N?Ve():t instanceof W?Cs(e):As(e)})(),(()=>{let t=Bs(e.game_status,e.current_time,e.consts);return A(t,17,Z-17)})()]))}function Ds(e){let t=e.avatar,n,r=k((()=>{let i=e.objects,u=Ft(i,c=>{let l=at(t.pos.x,t.pos.y,c.pos.x,c.pos.y),o=zs(l-t.dir),p=Fe(sn(t.pos,c.pos));return Fe(o)<=Ke?new $([c,o,p]):new X(void 0)}),a=Dt(u,(c,l)=>Rt(Wn(c[2],l[2])));return we(a,c=>qs(c[0],c[1],c[2],e.current_time,e.consts))})());n=A(r,le.x,le.y);let s=n;return k(f([e.consts.background_picture,s,ds(e),Fs(e)]))}function Re(e){let t=e.game_status;return t instanceof N?new y(new W,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):t instanceof W?new y(new N,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):fn()}function fn(){let e=.8*fe(),t=Ue(0,1,1,.5),n;if(t instanceof $)n=t[0];else throw M("let_assert",ce,"app",29,"init","Pattern match failed, no pattern matched the value.",{value:t,start:576,end:653,pattern_start:587,pattern_end:614});let r=tt(.6,.7,.7),s;if(r instanceof $)s=r[0];else throw M("let_assert",ce,"app",30,"init","Pattern match failed, no pattern matched the value.",{value:r,start:656,end:719,pattern_start:667,pattern_end:686});let i=Ue(.75,.5,.4,.05),u;if(i instanceof $)u=i[0];else throw M("let_assert",ce,"app",31,"init","Pattern match failed, no pattern matched the value.",{value:i,start:722,end:809,pattern_start:733,pattern_end:764});let a=tt(.12,1,.7),c;if(a instanceof $)c=a[0];else throw M("let_assert",ce,"app",33,"init","Pattern match failed, no pattern matched the value.",{value:a,start:812,end:873,pattern_start:823,pattern_end:839});let l,o=ct(0,200);l=we(o,h=>{let g=h,b=Ms((g+1)*2+10,g/20*fe()),d=de(g/5*fe());return new an(b,d,new he)});let p=l;return new y(new W,new ne(new K(0,0),e),0,p,new te(new K(0,0),new K(0,0)),new D(!1,!1),new U,0,0,Bn(f([f([Us()]),Ks()])),new gs(Ls(),Ps(u),s,ur,n,c,ar,u))}function Us(){return new cn(0,Z-30,30,30,Re)}function Ws(e){return fn()}function Xs(e,t){let n=e.game_status;if(n instanceof N)if(t instanceof Be){let r=t[0],s=new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,r,e.current_time,e.press_regions,e.consts),i=ks(s),u=Is(i),a=$s(u);return ys(a)}else if(t instanceof Oe){let r=t[0];return r instanceof be?new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new D(!0,s.right)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):r instanceof ye?new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new D(s.left,!0)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):r instanceof Le?Re(e):e}else if(t instanceof Me){let r=t[0];return r instanceof be?new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new D(!1,s.right)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):r instanceof ye?new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new D(s.left,!1)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):e}else if(t instanceof qe){let r=t[0],s=t[1];return new y(e.game_status,e.avatar,e.rotation_force,e.objects,new te(new K(r,s),e.mouse.pos),e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}else if(t instanceof ze)if(t[0]instanceof ve){let s,i=e.press_regions;s=Je(i,a=>e.mouse.pos.x>=a.x&&e.mouse.pos.x<a.x+a.width&&e.mouse.pos.y>=a.y&&e.mouse.pos.y<a.y+a.height);let u=s;if(u instanceof $)return u[0].on_press(e);{let a=e.game_status;return a instanceof N?new y(e.game_status,e.avatar,e.rotation_force,e.objects,(()=>{let c=e.mouse;return new te(c.pos,e.mouse.pos)})(),e.keyboard,new _e(e.mouse.pos,e.avatar.dir),e.current_time,e.prev_tick_time,e.press_regions,e.consts):a instanceof W?new y(new N,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):e}}else return e;else return t[0]instanceof ve?xs(e):e;else if(n instanceof W)if(t instanceof Be){let r=t[0];return new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new U,r,e.prev_tick_time,e.press_regions,e.consts)}else{if(t instanceof Oe)return t[0]instanceof Le?Re(e):e;if(t instanceof Me){let r=t[0];return r instanceof be?new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new D(!1,s.right)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):r instanceof ye?new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new D(s.left,!1)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):e}else if(t instanceof qe){let r=t[0],s=t[1];return new y(e.game_status,e.avatar,e.rotation_force,e.objects,new te(new K(r,s),e.mouse.pos),e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}else if(t instanceof ze)if(t[0]instanceof ve){let s,i=e.press_regions;s=Je(i,a=>e.mouse.pos.x>=a.x&&e.mouse.pos.x<a.x+a.width&&e.mouse.pos.y>=a.y&&e.mouse.pos.y<a.y+a.height);let u=s;if(u instanceof $)return u[0].on_press(e);{let a=e.game_status;return a instanceof N?new y(e.game_status,e.avatar,e.rotation_force,e.objects,(()=>{let c=e.mouse;return new te(c.pos,e.mouse.pos)})(),e.keyboard,new _e(e.mouse.pos,e.avatar.dir),e.current_time,e.prev_tick_time,e.press_regions,e.consts):a instanceof W?new y(new N,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):e}}else return e;else return e}else if(t instanceof Be){let r=t[0];return new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new U,r,e.prev_tick_time,e.press_regions,e.consts)}else{if(t instanceof Oe)return t[0]instanceof Le?Re(e):e;if(t instanceof Me){let r=t[0];return r instanceof be?new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new D(!1,s.right)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):r instanceof ye?new y(e.game_status,e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let s=e.keyboard;return new D(s.left,!1)})(),e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):e}else if(t instanceof qe){let r=t[0],s=t[1];return new y(e.game_status,e.avatar,e.rotation_force,e.objects,new te(new K(r,s),e.mouse.pos),e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts)}else if(t instanceof ze)if(t[0]instanceof ve){let s,i=e.press_regions;s=Je(i,a=>e.mouse.pos.x>=a.x&&e.mouse.pos.x<a.x+a.width&&e.mouse.pos.y>=a.y&&e.mouse.pos.y<a.y+a.height);let u=s;if(u instanceof $)return u[0].on_press(e);{let a=e.game_status;return a instanceof N?new y(e.game_status,e.avatar,e.rotation_force,e.objects,(()=>{let c=e.mouse;return new te(c.pos,e.mouse.pos)})(),e.keyboard,new _e(e.mouse.pos,e.avatar.dir),e.current_time,e.prev_tick_time,e.press_regions,e.consts):a instanceof W?new y(new N,e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.press_regions,e.consts):e}}else return e;else return e}}function Ys(){return ns(Ws,Xs,Ds,"#app")}Ys();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const ht=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",ht("mousedown",1));window.addEventListener("touchend",ht("mouseup",0));window.addEventListener("touchmove",ht("mousemove",void 0));
