(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class o{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class fe{static fromArray(t,n){let r=n||new b;for(let s=t.length-1;s>=0;--s)r=new At(t[s],r);return r}[Symbol.iterator](){return new tn(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof b}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function y(e,t){return new At(e,t)}function f(e,t){return fe.fromArray(e,t)}class tn{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof b)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class b extends fe{}class At extends fe{constructor(t,n){super(),this.head=t,this.tail=n}}class nn{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return se(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;const n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let s=0;s<n;s++)if(this.rawBuffer[s]!==t.rawBuffer[s])return!1;const r=this.bitSize%8;if(r){const s=8-r;if(this.rawBuffer[n]>>s!==t.rawBuffer[n]>>s)return!1}}else{for(let s=0;s<n;s++){const i=se(this.rawBuffer,this.bitOffset,s),u=se(t.rawBuffer,t.bitOffset,s);if(i!==u)return!1}const r=this.bitSize%8;if(r){const s=se(this.rawBuffer,this.bitOffset,n),i=se(t.rawBuffer,t.bitOffset,n),u=8-r;if(s>>u!==i>>u)return!1}}return!0}get buffer(){if(ut("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(ut("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function se(e,t,n){if(t===0)return e[n]??0;{const r=e[n]<<t&255,s=e[n+1]>>8-t;return r|s}}const at={};function ut(e,t){at[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),at[e]=!0)}class Ee extends o{static isResult(t){return t instanceof Ee}}class v extends Ee{constructor(t){super(),this[0]=t}isOk(){return!0}}const rn=e=>e instanceof v,sn=e=>e[0];class D extends Ee{constructor(t){super(),this[0]=t}isOk(){return!1}}function an(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),s=n.pop();if(r===s)continue;if(!lt(r)||!lt(s)||!hn(r,s)||ln(r,s)||cn(r,s)||fn(r,s)||on(r,s)||_n(r,s)||pn(r,s))return!1;const u=Object.getPrototypeOf(r);if(u!==null&&typeof u.equals=="function")try{if(r.equals(s))continue;return!1}catch{}let[a,l]=un(r);const c=a(r),_=a(s);if(c.length!==_.length)return!1;for(let p of c)n.push(l(r,p),l(s,p))}return!0}function un(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function ln(e,t){return e instanceof Date&&(e>t||e<t)}function cn(e,t){return!(e instanceof nn)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function fn(e,t){return Array.isArray(e)&&e.length!==t.length}function on(e,t){return e instanceof Map&&e.size!==t.size}function _n(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function pn(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function lt(e){return typeof e=="object"&&e!==null}function hn(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function m(e,t){return t===0?0:e/t}function z(e,t,n,r,s,i,u){let a=new globalThis.Error(i);a.gleam_error=e,a.file=t,a.module=n,a.line=r,a.function=s,a.fn=s;for(let l in u)a[l]=u[l];return a}class j extends o{}class L extends o{}class He extends o{}function St(e){return e instanceof j?new He:e instanceof L?e:new j}class S extends o{constructor(t){super(),this[0]=t}}class Et extends o{}class T extends o{}class le extends o{}function Q(e,t){for(;;){let n=e,r=t;if(n instanceof b)return r;{let s=n.head;e=n.tail,t=y(s,r)}}}function B(e){return Q(e,f([]))}function wn(e){if(e instanceof b)return new D(void 0);{let t=e.head;return new v(t)}}function dn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return B(i);{let u=r.head,a=r.tail,l,c=s(u);if(c instanceof v){let p=c[0];l=y(p,i)}else l=i;let _=l;e=a,t=s,n=_}}}function gn(e,t){return dn(e,t,f([]))}function bn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return B(i);{let u=r.head;e=r.tail,t=s,n=y(s(u),i)}}}function re(e,t){return bn(e,t,f([]))}function yn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof b)return B(a);{let l=s.head,c=s.tail,_=y(i(l,u),a);e=c,t=i,n=u+1,r=_}}}function Pt(e,t){return yn(e,t,0,f([]))}function vn(e,t){for(;;){let n=e,r=t;if(n instanceof b)return B(r);{let s=n.head;e=n.tail,t=Q(s,r)}}}function xn(e){return vn(e,f([]))}function ct(e,t){for(;;){let n=e,r=t;if(n instanceof b)return new D(void 0);{let s=n.head,i=n.tail;if(r(s))return new v(s);e=i,t=r}}}function $n(e,t,n,r,s,i){for(;;){let u=e,a=t,l=n,c=r,_=s,p=i,h=y(_,l);if(u instanceof b)return c instanceof T?y(B(h),p):y(h,p);{let d=u.head,w=u.tail,x=a(_,d);if(c instanceof T)if(x instanceof j)e=w,t=a,n=h,r=c,s=d,i=p;else if(x instanceof L)e=w,t=a,n=h,r=c,s=d,i=p;else{let A;c instanceof T?A=y(B(h),p):A=y(h,p);let O=A;if(w instanceof b)return y(f([d]),O);{let M=w.head,q=w.tail,k,I=a(d,M);I instanceof j?k=new T:I instanceof L?k=new T:k=new le;let U=k;e=q,t=a,n=f([d]),r=U,s=M,i=O}}else if(x instanceof j){let A;c instanceof T?A=y(B(h),p):A=y(h,p);let O=A;if(w instanceof b)return y(f([d]),O);{let M=w.head,q=w.tail,k,I=a(d,M);I instanceof j?k=new T:I instanceof L?k=new T:k=new le;let U=k;e=q,t=a,n=f([d]),r=U,s=M,i=O}}else if(x instanceof L){let A;c instanceof T?A=y(B(h),p):A=y(h,p);let O=A;if(w instanceof b)return y(f([d]),O);{let M=w.head,q=w.tail,k,I=a(d,M);I instanceof j?k=new T:I instanceof L?k=new T:k=new le;let U=k;e=q,t=a,n=f([d]),r=U,s=M,i=O}}else e=w,t=a,n=h,r=c,s=d,i=p}}}function kn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof b)return Q(i,a);if(i instanceof b)return Q(s,a);{let l=s.head,c=s.tail,_=i.head,p=i.tail,h=u(l,_);h instanceof j?(e=c,t=i,n=u,r=y(l,a)):(h instanceof L,e=s,t=p,n=u,r=y(_,a))}}}function An(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return B(i);{let u=r.tail;if(u instanceof b){let a=r.head;return B(y(B(a),i))}else{let a=r.head,l=u.head,c=u.tail,_=kn(a,l,s,f([]));e=c,t=s,n=y(_,i)}}}}function Sn(e,t,n,r){for(;;){let s=e,i=t,u=n,a=r;if(s instanceof b)return Q(i,a);if(i instanceof b)return Q(s,a);{let l=s.head,c=s.tail,_=i.head,p=i.tail,h=u(l,_);h instanceof j?(e=s,t=p,n=u,r=y(_,a)):(h instanceof L,e=c,t=i,n=u,r=y(l,a))}}}function En(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return B(i);{let u=r.tail;if(u instanceof b){let a=r.head;return B(y(B(a),i))}else{let a=r.head,l=u.head,c=u.tail,_=Sn(a,l,s,f([]));e=c,t=s,n=y(_,i)}}}}function Pn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return r;if(s instanceof T){if(r.tail instanceof b)return r.head;e=An(r,i,f([])),t=new le,n=i}else if(r.tail instanceof b){let a=r.head;return B(a)}else e=En(r,i,f([])),t=new T,n=i}}function Tt(e,t){if(e instanceof b)return e;{let n=e.tail;if(n instanceof b)return e;{let r=e.head,s=n.head,i=n.tail,u,a=t(r,s);a instanceof j?u=new T:a instanceof L?u=new T:u=new le;let l=u,c=$n(i,t,f([r]),l,s,f([]));return Pn(c,new T,t)}}}function Tn(e,t,n){for(;;){let r=e,s=t,i=n,u=Mt(r,s);if(u instanceof j)e=r,t=s-1,n=y(s,i);else{if(u instanceof L)return y(s,i);e=r,t=s+1,n=y(s,i)}}}function We(e,t){return Tn(e,t,f([]))}function Bn(e){return e.toString()}function qe(e){if(e==="")return 0;const t=Bt(e);if(t){let n=0;for(const r of t)n++;return n}else return e.match(/./gsu).length}function On(e){const t=Bt(e);return t?fe.fromArray(Array.from(t).map(n=>n.segment)):fe.fromArray(e.match(/./gsu))}let ft;function Bt(e){if(globalThis.Intl&&Intl.Segmenter)return ft||=new Intl.Segmenter,ft.segment(e)[Symbol.iterator]()}function Mn(e){return Math.ceil(e)}function qn(e){return Math.floor(e)}function ot(e){return Math.round(e)}function jn(e,t){return Math.pow(e,t)}function de(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function zn(e,t){return e===t?new L:e<t?new j:new He}function Ot(e,t){return e<t?e:t}function Ln(e,t){return e>t?e:t}function In(e,t,n){let s=Ot(e,n);return Ln(s,t)}function je(e){return e>=0?e:0-e}function mn(e,t){let n=Mn(t)-t>0;return e<0&&n||e===0&&t<0?new D(void 0):new v(jn(e,t))}function Kn(e){return mn(e,.5)}function $e(e){return-1*e}function _t(e){return e>=0?ot(e):0-ot($e(e))}function Rn(e,t){for(;;){let n=e,r=t;if(n instanceof b)return r;{let s=n.head;e=n.tail,t=s+r}}}function Nn(e){return Rn(e,0)}function pt(e,t){if(t===0)return new D(void 0);{let n=t;return new v(m(e,n))}}function Cn(e,t){return e+t}function ht(e,t){return e*t}function Fn(e,t){return e-t}function Mt(e,t){return e===t?new L:e<t?new j:new He}function Dn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return i;{let u=r.head;e=r.tail,t=s,n=i+s+u}}}function Un(e,t){if(e instanceof b)return"";{let n=e.head,r=e.tail;return Dn(r,t,n)}}function Xn(e,t){return On(e)}function Yn(e,t){if(e instanceof v){let n=e[0];return new v(t(n))}else return e}function ge(e,t){if(e instanceof v){let n=e[0];return t(n)}else return e}function Hn(e,t){return e instanceof v?e[0]:t}const wt="src/gleam_community/colour.gleam";class Ve extends o{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class Wn extends o{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function be(e){return e>1||e<0?new D(void 0):new v(e)}function Be(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,u=s*2,a=s*3;return i<1?t+(n-t)*s*6:u<1?n:a<2?t+(n-t)*(2/3-s)*6:t}function Vn(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let u=s,a=n*2-u,l=Be(e+1/3,a,u),c=Be(e,a,u),_=Be(e-1/3,a,u);return[l,c,_,r]}function ze(e,t,n,r){return ge(be(e),s=>ge(be(t),i=>ge(be(n),u=>ge(be(r),a=>new v(new Wn(s,i,u,a))))))}function Le(e,t,n){return ze(e,t,n,1)}function Gn(e){if(e instanceof Ve){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return Vn(t,n,r,s)}}function dt(e){let t=Gn(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let u=l=>{let c,p=ht(l,1e4),h=_t(p),d=h;c=pt(d,100);let w=c,x;if(w instanceof v)x=w[0];else throw z("let_assert",wt,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:w,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return x},a=l=>{let c,p=ht(l,1e3),h=_t(p),d=h;c=pt(d,1e3);let w=c,x;if(w instanceof v)x=w[0];else throw z("let_assert",wt,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:w,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return x};return Un(f(["rgba(",de(u(n))+"%,",de(u(r))+"%,",de(u(s))+"%,",de(a(i)),")"]),"")}const Jn=new Ve(.9607843137254902,.4745098039215686,0,1),Zn=new Ve(1,1,1,1);function Qn(e){return Math.sin(e)}function er(){return Math.PI}function tr(e,t){return Math.atan2(e,t)}function nr(e){return Math.cos(e)}function rr(e,t){return tr(e,t)}function sr(e){return nr(e)}function oe(e){return Qn(e)}function Ge(e,t){let n=e*sr(t),r=e*oe(t);return[n,r]}function Je(){return er()}function J(){return 2*Je()}function ir(){return Math.PI}class qt extends o{}class Ze extends o{constructor(t,n){super(),this[0]=t,this.closed=n}}class jt extends o{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class ar extends o{constructor(t,n){super(),this.text=t,this.style=n}}class ur extends o{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class zt extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class Qe extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class lr extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class Lt extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class et extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class It extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class mt extends o{constructor(t){super(),this[0]=t}}class cr extends o{}class Kt extends o{}class fr extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ie extends o{constructor(t){super(),this[0]=t}}function Rt(e){return new Ie(e)}function tt(){return new qt}function nt(e){return new Ze(e,!0)}function g(e){return new Ze(e,!1)}function Pe(e,t){return nt(f([[0,0],[e,0],[e,t],[0,t]]))}function E(e,t,n){return new Lt(e,[t,n])}function we(e,t){return E(e,t,0)}function rt(e,t){return E(e,0,t)}function or(e,t){return new et(e,[t,1])}function H(e,t){return new et(e,[t,t])}function Nt(e,t){return new It(e,t)}function R(e,t){return new zt(e,t)}function Ct(e,t,n){return new Qe(e,new fr(t,n))}function N(e){return new Qe(e,new Kt)}function $(e){return new mt(e)}function st(e){return new jt(e,new Ie(0),new Ie(2*ir()))}class me extends o{constructor(t){super(),this[0]=t}}class Ke extends o{constructor(t){super(),this[0]=t}}class _r extends o{constructor(t){super(),this[0]=t}}class Re extends o{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ne extends o{constructor(t){super(),this[0]=t}}class Ft extends o{constructor(t){super(),this[0]=t}}class Dt extends o{}class Ut extends o{}class Xt extends o{}class Yt extends o{}class pr extends o{}class hr extends o{}class wr extends o{}class dr extends o{}class gr extends o{}class br extends o{}class yr extends o{}class vr extends o{}class xr extends o{}class Ce extends o{}class $r extends o{}class ye extends o{}class kr extends o{}class Ar extends o{}function Sr(e){return document.querySelector(e).getContext("2d")}function Ht(e){window.requestAnimationFrame(t=>{e(t)})}function Oe(e,t){window.addEventListener(e,t)}function Er(e){return e.keyCode}function V(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function G(e){return window.PAINT_STATE?e in window.PAINT_STATE?new v(window.PAINT_STATE[e]):new D(void 0):new D(void 0)}function Pr(e){return e.canvas.clientWidth}function Tr(e){return e.canvas.clientHeight}function Br(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function Or(e,t,n,r){let s=rn(t)?sn(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function Mr(e){e.reset()}function qr(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function jr(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const u of t){let a=u[0],l=u[1];i?e.lineTo(a,l):(e.moveTo(a,l),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function zr(e,t,n){e.font=n,e.fillText(t,0,0)}function X(e){e.save()}function Y(e){e.restore()}function Lr(e,t){e.fillStyle=t}function Ir(e,t){e.strokeStyle=t}function mr(e,t){e.lineWidth=t}function Kr(e,t,n){e.translate(t,n)}function Rr(e,t,n){e.scale(t,n)}function Nr(e,t){e.rotate(t)}function Cr(e,t,n,r){e.drawImage(t,0,0,n,r)}function Fr(e,t){e.imageSmoothingEnabled=t}const ce="src/paint/canvas.gleam";class Dr extends o{constructor(t,n){super(),this.width=t,this.height=n}}class ve extends o{constructor(t,n){super(),this.fill=t,this.stroke=n}}function C(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof qt)return;if(r instanceof Ze){let u=r[0],a=r.closed;return jr(s,u,a,i.fill,i.stroke)}else if(r instanceof jt){let u=r.radius,a=r.start,l=r.end,c;c=a[0];let _;return _=l[0],qr(s,u,c,_,i.fill,i.stroke)}else if(r instanceof ar){let u=r.text,a=r.style,l,c;return l=a.size_px,c=a.font_family,X(s),zr(s,u,Bn(l)+"px "+c),Y(s)}else if(r instanceof ur){let u=r.width_px,a=r.height_px,l=r[0].id,c=G(l),_;if(c instanceof v)_=c[0];else throw z("let_assert",ce,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:c,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return Cr(s,_,u,a)}else if(r instanceof zt){let u=r[0],a=r[1];return X(s),Lr(s,dt(a)),C(u,s,new ve(!0,i.stroke)),Y(s)}else if(r instanceof Qe){let u=r[0],a=r[1];if(a instanceof Kt)e=u,t=s,n=new ve(i.fill,!1);else{let l=a[0],c=a[1];return X(s),Ir(s,dt(l)),mr(s,c),C(u,s,new ve(i.fill,!0)),Y(s)}}else if(r instanceof lr){let u=r[0],a=r[1];return X(s),Fr(s,a instanceof cr),C(u,s,i),Y(s)}else if(r instanceof Lt){let u=r[0],a=r[1],l,c;return l=a[0],c=a[1],X(s),Kr(s,l,c),C(u,s,i),Y(s)}else if(r instanceof et){let u=r[0],a=r[1],l,c;return l=a[0],c=a[1],X(s),Rr(s,l,c),C(u,s,i),Y(s)}else if(r instanceof It){let u=r[0],a=r[1],l;return l=a[0],X(s),Nr(s,l),C(u,s,i),Y(s)}else{let u=r[0];if(u instanceof b)return;{let a=u.head,l=u.tail;C(a,s,i),e=new mt(l),t=s,n=i}}}}function Ur(e){return e===32?new S(new pr):e===37?new S(new Dt):e===38?new S(new Xt):e===39?new S(new Ut):e===40?new S(new Yt):e===87?new S(new hr):e===65?new S(new wr):e===83?new S(new dr):e===68?new S(new gr):e===90?new S(new br):e===88?new S(new yr):e===67?new S(new vr):e===18?new S(new xr):e===27?new S(new Ce):e===8?new S(new $r):new Et}const Xr=new ve(!1,!0);function Wt(e,t,n,r){return s=>{let i=G(r),u;if(i instanceof v)u=i[0];else throw z("let_assert",ce,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let a=n(u,new me(s));V(a,r);let l=t(a);return Mr(e),C(l,e,Xr),Ht(Wt(e,t,n,r))}}function Yr(e,t,n,r){let s=Sr(r),i=e(new Dr(Pr(s),Tr(s)));V(i,r);let u=(l,c)=>Oe(l,_=>{let p=Ur(Er(_));if(p instanceof S){let h=p[0],d=G(r),w;if(d instanceof v)w=d[0];else throw z("let_assert",ce,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:d,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let x=t(w,c(h));return V(x,r)}else return});u("keydown",l=>new Ke(l)),u("keyup",l=>new _r(l)),Oe("mousemove",l=>{let c=Br(s,l),_,p;_=c[0],p=c[1];let h=G(r),d;if(h instanceof v)d=h[0];else throw z("let_assert",ce,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:h,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let w=t(d,new Re(_,p));V(w,r)});let a=(l,c,_)=>Oe(l,p=>{let h="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,d=G(h);V(p,h);let w=q=>Or(p,d,q,_),x=q=>{let k=G(r),I;if(k instanceof v)I=k[0];else throw z("let_assert",ce,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:k,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let U=t(I,c(q));return V(U,r)};w(0)&&x(new ye),w(1)&&x(new kr),w(2)&&x(new Ar)});return a("mousedown",l=>new Ne(l),!0),a("mouseup",l=>new Ft(l),!1),Ht(Wt(s,n,t,r))}class K extends o{constructor(t,n){super(),this.x=t,this.y=n}}function Hr(e){return f([e.x,e.y])}function Vt(e,t,n){return new K(n(e.x,t.x),n(e.y,t.y))}const Wr="src/vec/vec2f.gleam";function Vr(e,t){return Vt(e,t,Cn)}function Gr(e){let n=Hr(e),r=re(n,s=>s*s);return Nn(r)}function Jr(e,t){let r=Vt(e,t,Fn);return Gr(r)}function Gt(e,t){let n,r=Jr(e,t);n=Kn(r);let s=n,i;if(s instanceof v)i=s[0];else throw z("let_assert",Wr,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const Zr=e=>{window.open(e,"_blank")},ee=300,te=300,Z=new K(150,150),Qr=.005,es=.4,ts=.09,xe=.7853981634,Te=12,Fe=3,ns=2e3;function De(e,t){let n;if(e==="a")n=g(f([[3,1],[11,1],[11,11],[1,11],[1,5],[11,5]]));else if(e==="b")n=g(f([[1,3],[11,3],[11,11],[1,11],[1,-1]]));else if(e==="c")n=g(f([[11,11],[1,11],[1,1],[11,1],[11,3]]));else if(e==="d"){let s=De("b",t),i=or(s,-1);n=we(i,12)}else if(e==="e")n=g(f([[9,11],[1,11],[1,1],[11,1],[11,7],[1,7]]));else if(e==="f")n=$(f([g(f([[0,5],[11,5]])),g(f([[5,12],[5,-1],[12,-1]]))]));else if(e==="g")n=$(f([g(f([[0,1],[10,1],[10,7],[1,7],[1,1]])),g(f([[3,7],[3,11],[11,11],[11,13]]))]));else if(e==="i")n=$(f([g(f([[6,-2],[6,0]])),g(f([[2,3],[6,3],[6,11]])),g(f([[0,11],[12,11]]))]));else if(e==="j")n=$(f([g(f([[11,-2],[11,0]])),g(f([[11,2],[11,11],[1,11],[1,9]]))]));else if(e==="k")n=$(f([g(f([[1,0],[1,12]])),g(f([[1,6],[11,6],[11,12]])),g(f([[11,0],[11,1],[6,6],[5,6]]))]));else if(e==="l")n=g(f([[12,11],[1,11],[1,0]]));else if(e==="m")n=$(f([g(f([[1,12],[1,1],[11,1],[11,12]])),g(f([[6,1],[6,12]]))]));else if(e==="n")n=g(f([[1,12],[1,1],[9,1],[9,3],[11,3],[11,12]]));else if(e==="o")n=g(f([[0,1],[11,1],[11,11],[1,11],[1,1]]));else if(e==="r")n=g(f([[1,12],[1,1],[11,1],[11,3]]));else if(e==="s")n=g(f([[11,1],[2,1],[2,6],[11,6],[11,11],[1,11],[1,9]]));else if(e==="t")n=$(f([g(f([[0,2],[12,2]])),g(f([[5,-1],[5,11],[12,11]]))]));else if(e==="u")n=g(f([[11,0],[11,11],[1,11],[1,0]]));else if(e==="v")n=g(f([[11,0],[11,11],[4,11],[1,8],[1,0]]));else if(e==="y")n=$(f([g(f([[11,0],[11,13],[1,13]])),g(f([[11,9],[1,9],[1,0]]))]));else if(e==="←")n=$(f([g(f([[6,11],[5,11],[1,7],[1,5],[5,1],[6,1]])),g(f([[1,6],[12,6]]))]));else if(e==="→"){let s=De("←",t),i=Nt(s,Rt(Je()));n=E(i,12,12)}else n=tt();return Ct(n,t,2)}function rs(e,t,n){let r=oe(t/400)*.1,s=oe(t/1600)*6,i=De(e,n),u=R(i,n),a=N(u),l=E(a,-6,-6),c=Nt(l,Rt(r));return E(c,6,6+s)}function _e(e,t,n){let r=Xn(e),s=Pt(r,(i,u)=>{let a=rs(i,t+u*8e3,n);return we(a,u*(Te+Fe))});return $(s)}function pe(e,t){let n=qe(e);return((Te+Fe)*n-Fe)*t}const ie="src/app.gleam";class P extends o{constructor(t,n,r,s,i,u,a,l,c,_,p){super(),this.avatar=t,this.camera=n,this.speed=r,this.objects=s,this.mouse=i,this.drag=u,this.current_time=a,this.prev_tick_time=l,this.paused=c,this.press_regions=_,this.consts=p}}class ne extends o{constructor(t,n){super(),this.pos=t,this.dir=n}}let Jt=class extends o{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class ke extends o{}class ss extends o{constructor(t){super(),this.collected_time=t}}class Zt extends o{constructor(t,n){super(),this.lagging_dir=t,this.start_move_time=n}}class ae extends o{constructor(t,n){super(),this.pos=t,this.prev_pos=n}}class W extends o{}class Ae extends o{constructor(t,n){super(),this.start_pos=t,this.start_avatar_dir=n}}class is extends o{constructor(t,n){super(),this.force=t,this.released_time=n}}class F extends o{}class Ue extends o{}class Qt extends o{constructor(t,n,r,s,i){super(),this.x=t,this.y=n,this.width=r,this.height=s,this.on_press=i}}class as extends o{constructor(t,n,r,s,i,u,a,l){super(),this.background_picture=t,this.shadow_picture=n,this.color_dark_blue=r,this.color_white=s,this.color_white_transparent=i,this.color_yellow=u,this.color_orange=a,this.color_dark_blue_transparent=l}}function us(e){let t,n=e.objects;t=re(n,s=>an(s.kind,new ke)&&Gt(e.avatar.pos,s.pos)<.8?new Jt(s.pos,s.height,new ss(e.current_time)):s);let r=t;return new P(e.avatar,e.camera,e.speed,r,e.mouse,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}function ue(e,t){return new P(e.avatar,e.camera,e.speed,e.objects,e.mouse,new W,e.current_time,e.prev_tick_time,t,e.press_regions,e.consts)}function Xe(e){return e instanceof F?new Ue:new F}function ls(e){let t=e.current_time-e.prev_tick_time,n=e.speed*t,r=Ge(n,e.avatar.dir),s,i;return s=r[0],i=r[1],new P((()=>{let u=e.avatar;return new ne(Vr(e.avatar.pos,new K(s,i)),u.dir)})(),e.camera,e.speed,e.objects,e.mouse,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}function cs(e){let t=e.drag;if(t instanceof W)return e;if(t instanceof Ae){let n=e.mouse.pos.x-e.mouse.prev_pos.x,r=e.current_time-e.prev_tick_time,s=m(n,r);return je(s)>.01?new P(e.avatar,e.camera,e.speed,e.objects,e.mouse,new is(s,e.current_time),e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts):new P(e.avatar,e.camera,e.speed,e.objects,e.mouse,new W,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else return e}function gt(e,t){return new P(e.avatar,e.camera,In(e.speed+t*(e.speed*.05),Qr,es),e.objects,e.mouse,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}function fs(e,t){return new ne(e.pos,e.dir+ts*t)}function os(e,t){let n="cielos",r=1.5,s=pe(n,r),i="by agj",u=.75,a=pe(i,u),l=$(f([(()=>{let c=_e(n,e,t.color_dark_blue);return H(c,r)})(),(()=>{let c=_e(i,e,t.color_dark_blue),_=H(c,u);return E(_,s-a,40)})()]));return we(l,ee*.5-s*.5)}function _s(e,t){let n=f(["flick ←→ to turn","collect stars"]),r=.75,s,u=Tt(n,(h,d)=>St(Mt(qe(h),qe(d)))),a=wn(u),l=Yn(a,h=>pe(h,r));s=Hn(l,0);let c=s,_=$(Pt(n,(d,w)=>{let x=_e(d,e,t.color_dark_blue);return rt(x,Te*2.5*w)})),p=H(_,r);return we(p,ee*.5-c*.5)}function ps(){return new Qt(0,te-30,30,30,e=>ue(e,Xe(e.paused)))}function bt(e,t,n){let r=nt((()=>{let i=We(0,10);return re(i,u=>{let a=J()/10*u+n,l;return u%2===0?l=250:l=140,Ge(l,a)})})()),s=R(r,e);return Ct(s,t,10)}function yt(e,t,n){let r=e/2e3;if(n instanceof S){let s=n[0];if(e-s<=1e3){let i=st(1e3),u=R(i,t.color_white);return N(u)}else return bt(t.color_white,t.color_yellow,r)}else return bt(t.color_yellow,t.color_orange,r)}function vt(e,t){let n;t?n=e.color_white:n=e.color_yellow;let r=n,s=st(1),i=R(s,r);return N(i)}function hs(e,t,n,r){if(n)return e instanceof ke?vt(r,!1):vt(r,!0);if(e instanceof ke)return yt(t,r,new Et);{let s=e.collected_time;return yt(t,r,new S(s))}}function ws(e){let t=Pe(200,5e3),n=we(t,-100),r=R(n,e);return N(r)}function ds(e){let t=Pe(4,12),n=$(f([t,E(t,8,0)])),r=R(n,e);return N(r)}function gs(e){let t=nt(f([[2,0],[11,6],[2,12]])),n=R(t,e);return N(n)}function bs(e,t,n){return $(f([(()=>{let r=st(15),s=R(r,n.color_white_transparent);return N(s)})(),(()=>{if(e instanceof F){let r="esc",s=.5,i,u=_e(r,t,n.color_white_transparent);i=H(u,s);let a=i;return $(f([(()=>{let l=gs(n.color_dark_blue);return E(l,-6,-6)})(),E(a,pe(r,s)*-.5,-27)]))}else{let r=ds(n.color_dark_blue);return E(r,-6,-6)}})()]))}function en(e,t,n){let r=50,s=e.start_move_time,i=s+r;if(n>=i)return t;{let a=m(n-s,r);return t*a+e.lagging_dir*(1-a)}}function xt(e,t){return new P(fs(e.avatar,t),new Zt(en(e.camera,e.avatar.dir,e.current_time),e.current_time),e.speed,e.objects,e.mouse,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}function ys(e){return m(1,m(e,.2)+1)}function vs(e,t){let n=Ge(e,t),r,s;return r=n[0],s=n[1],new K(r,s)}function Ye(e,t,n,r){return rr(r-t,n-e)}function xs(e,t,n,r,s){let i=Ye(0,0,n,e.height),u=n>50,a;u?a=1:a=ys(n);let l=a,c=new K(m(t*Z.x,xe),$e(m(i*Z.x,xe))),_,p=hs(e.kind,r,u,s),h=H(p,l);_=E(h,c.x,c.y);let d=_,w;if(u)w=tt();else{let O=Ye(0,0,n,-10),M=new K(c.x,$e(m(O*Z.x,xe))),q=s.shadow_picture,k=H(q,l);w=E(k,M.x,M.y)}return $(f([w,d]))}function $s(e){for(;;){let t=e,n=J(),r=Je(),s=$e(r),i=t;if(i>r)e=i-n;else{let u=t;if(u<=s)e=u+n;else return t}}}function $t(e){return e*.005}function Me(e,t,n){return(t-e)*n+e}function kt(e,t,n,r,s,i,u,a,l){let c=l,_=qn(m(a,c)),p=We(0,l),h=re(p,d=>{let w=d,x=m(w,c-1),A=Le(Me(e,r,x),Me(t,s,x),Me(n,i,x)),O;if(A instanceof v)O=A[0];else throw z("let_assert",ie,"app",757,"view_gradient","Pattern match failed, no pattern matched the value.",{value:A,start:19415,end:19642,pattern_start:19426,pattern_end:19438});let M=Pe(u,_),q=rt(M,_*w),k=R(q,O);return N(k)});return $(h)}function ks(){let e=f([kt(.85,.6,.9,.7,.4,.98,ee,te/2,50),(()=>{let t=kt(.6,.4,.95,.6,.7,.8,ee,te/2,50);return rt(t,Z.y)})()]);return $(e)}function As(e){return oe(e*(J()/4))}function Ss(e){let t=e.drag;if(t instanceof W)return e;if(t instanceof Ae){let n=t.start_pos,r=t.start_avatar_dir,s=$t(e.mouse.pos.x-n.x);return new P((()=>{let i=e.avatar;return new ne(i.pos,r-s)})(),e.camera,e.speed,e.objects,e.mouse,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else{let n=t.force,r=t.released_time,s=e.current_time-r,i=Ot(1,m(s,ns));if(i>=1)return new P(e.avatar,e.camera,e.speed,e.objects,e.mouse,new W,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts);{let a=1-As(i),l=e.current_time-e.prev_tick_time,c=$t(l*n)*a;return new P((()=>{let _=e.avatar;return new ne(_.pos,e.avatar.dir-c)})(),e.camera,e.speed,e.objects,e.mouse,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}}}function Es(e,t){if(e.paused instanceof F)if(t instanceof me){let r=t[0];return new P(e.avatar,e.camera,e.speed,e.objects,e.mouse,new W,r,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else{if(t instanceof Ke)return t[0]instanceof Ce?ue(e,Xe(e.paused)):e;if(t instanceof Re){let r=t[0],s=t[1];return new P(e.avatar,e.camera,e.speed,e.objects,new ae(new K(r,s),e.mouse.pos),e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else if(t instanceof Ne)if(t[0]instanceof ye){let s,i=e.press_regions;s=ct(i,a=>e.mouse.pos.x>=a.x&&e.mouse.pos.x<a.x+a.width&&e.mouse.pos.y>=a.y&&e.mouse.pos.y<a.y+a.height);let u=s;return u instanceof v?u[0].on_press(e):e.paused instanceof F?ue(e,new Ue):new P(e.avatar,e.camera,e.speed,e.objects,(()=>{let l=e.mouse;return new ae(l.pos,e.mouse.pos)})(),new Ae(e.mouse.pos,e.avatar.dir),e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else return e;else return e}else if(t instanceof me){let r=t[0],s=new P(e.avatar,e.camera,e.speed,e.objects,e.mouse,e.drag,r,e.current_time,e.paused,e.press_regions,e.consts),i=ls(s),u=Ss(i);return us(u)}else if(t instanceof Ke){let r=t[0];return r instanceof Dt?xt(e,-1):r instanceof Ut?xt(e,1):r instanceof Xt?gt(e,1):r instanceof Yt?gt(e,-1):r instanceof Ce?ue(e,Xe(e.paused)):e}else if(t instanceof Re){let r=t[0],s=t[1];return new P(e.avatar,e.camera,e.speed,e.objects,new ae(new K(r,s),e.mouse.pos),e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else if(t instanceof Ne)if(t[0]instanceof ye){let s,i=e.press_regions;s=ct(i,a=>e.mouse.pos.x>=a.x&&e.mouse.pos.x<a.x+a.width&&e.mouse.pos.y>=a.y&&e.mouse.pos.y<a.y+a.height);let u=s;return u instanceof v?u[0].on_press(e):e.paused instanceof F?ue(e,new Ue):new P(e.avatar,e.camera,e.speed,e.objects,(()=>{let l=e.mouse;return new ae(l.pos,e.mouse.pos)})(),new Ae(e.mouse.pos,e.avatar.dir),e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else return e;else return t instanceof Ft&&t[0]instanceof ye?cs(e):e}const he=60,Se=20;function Ps(){return f([new Qt(ee-he-2,te-Se-2,he,Se,e=>(Zr("https://github.com/agj/cielos"),e))])}function Ts(e){let t=.8*J(),n=ze(0,1,1,.5),r;if(n instanceof v)r=n[0];else throw z("let_assert",ie,"app",25,"init","Pattern match failed, no pattern matched the value.",{value:n,start:533,end:610,pattern_start:544,pattern_end:571});let s=Le(.6,.7,.7),i;if(s instanceof v)i=s[0];else throw z("let_assert",ie,"app",26,"init","Pattern match failed, no pattern matched the value.",{value:s,start:613,end:676,pattern_start:624,pattern_end:643});let u=ze(.75,.5,.4,.05),a;if(u instanceof v)a=u[0];else throw z("let_assert",ie,"app",27,"init","Pattern match failed, no pattern matched the value.",{value:u,start:679,end:766,pattern_start:690,pattern_end:721});let l=Le(.12,1,.7),c;if(l instanceof v)c=l[0];else throw z("let_assert",ie,"app",29,"init","Pattern match failed, no pattern matched the value.",{value:l,start:769,end:830,pattern_start:780,pattern_end:796});let _,p=We(0,200);_=re(p,d=>{let w=d,x=vs((w+1)*2+10,w/20*J()),A=oe(w/5*J());return new Jt(x,A,new ke)});let h=_;return new P(new ne(new K(0,0),t),new Zt(t,0),.01,h,new ae(new K(0,0),new K(0,0)),new W,0,0,new F,xn(f([f([ps()]),Ps()])),new as(ks(),ws(a),i,Zn,r,c,Jn,a))}function Bs(e,t,n){let r=.5,s=pe(e,r),i=$(f([Pe(he,20),(()=>{let a=_e(e,t,n.color_dark_blue),l=H(a,r);return E(l,he*.5-s*.5,Se*.5-Te*r*.5)})()])),u=R(i,n.color_white_transparent);return N(u)}function Os(e,t){let n=Bs("about",e,t);return E(n,ee-he-2,te-Se-2)}function Ms(e){return $(f([e.paused instanceof F?$(f([(()=>{let n=os(e.current_time,e.consts);return E(n,0,80)})(),(()=>{let n=_s(e.current_time,e.consts);return E(n,0,200)})(),Os(e.current_time,e.consts)])):tt(),(()=>{let t=bs(e.paused,e.current_time,e.consts);return E(t,17,te-17)})()]))}function qs(e){let t,n=e.avatar;t=new ne(n.pos,en(e.camera,e.avatar.dir,e.current_time));let r=t,s,i=$((()=>{let a=e.objects,l=gn(a,_=>{let p=Ye(r.pos.x,r.pos.y,_.pos.x,_.pos.y),h=$s(p-r.dir),d=je(Gt(r.pos,_.pos));return je(h)<=xe?new v([_,h,d]):new D(void 0)}),c=Tt(l,(_,p)=>St(zn(_[2],p[2])));return re(c,_=>xs(_[0],_[1],_[2],e.current_time,e.consts))})());s=E(i,Z.x,Z.y);let u=s;return $(f([e.consts.background_picture,u,Ms(e)]))}function js(){return Yr(Ts,Es,qs,"#app")}js();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const it=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",it("mousedown",1));window.addEventListener("touchend",it("mouseup",0));window.addEventListener("touchmove",it("mousemove",void 0));
