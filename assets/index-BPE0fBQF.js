(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class l{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class z{static fromArray(t,n){let r=n||new v;for(let s=t.length-1;s>=0;--s)r=new ce(t[s],r);return r}[Symbol.iterator](){return new ze(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof v}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function L(e,t){return new ce(e,t)}function E(e,t){return z.fromArray(e,t)}class ze{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof v)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class v extends z{}class ce extends z{constructor(t,n){super(),this.head=t,this.tail=n}}class C extends l{static isResult(t){return t instanceof C}}class _ extends C{constructor(t){super(),this[0]=t}isOk(){return!0}}const Ve=e=>e instanceof _,We=e=>e[0];class I extends C{constructor(t){super(),this[0]=t}isOk(){return!1}}function S(e,t){return t===0?0:e/t}function m(e,t,n,r,s,i,a){let u=new globalThis.Error(i);u.gleam_error=e,u.file=t,u.module=n,u.line=r,u.function=s,u.fn=s;for(let c in a)u[c]=a[c];return u}class oe extends l{}class fe extends l{}class Ge extends l{}class d extends l{constructor(t){super(),this[0]=t}}class Ze extends l{}function Je(e,t){for(;;){let n=e,r=t;if(n instanceof v)return r;{let s=n.head;e=n.tail,t=L(s,r)}}}function Qe(e){return Je(e,E([]))}function et(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof v)return Qe(i);{let a=r.head;e=r.tail,t=s,n=L(s(a),i)}}}function V(e,t){return et(e,t,E([]))}function tt(e,t,n){for(;;){let r=e,s=t,i=n,a=dt(r,s);if(a instanceof oe)e=r,t=s-1,n=L(s,i);else{if(a instanceof fe)return L(s,i);e=r,t=s+1,n=L(s,i)}}}function nt(e,t){return tt(e,t,E([]))}function rt(e){return e.toString()}function st(e){return Math.ceil(e)}function J(e){return Math.round(e)}function it(e,t){return Math.pow(e,t)}function O(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function at(e,t){return e<t?e:t}function ut(e,t){return e>t?e:t}function _e(e,t,n){let s=at(e,n);return ut(s,t)}function Q(e){return e>=0?e:0-e}function lt(e,t){let n=st(t)-t>0;return e<0&&n||e===0&&t<0?new I(void 0):new _(it(e,t))}function ct(e){return lt(e,.5)}function pe(e){return-1*e}function ee(e){return e>=0?J(e):0-J(pe(e))}function ot(e,t){for(;;){let n=e,r=t;if(n instanceof v)return r;{let s=n.head;e=n.tail,t=s+r}}}function ft(e){return ot(e,0)}function te(e,t){if(t===0)return new I(void 0);{let n=t;return new _(S(e,n))}}function _t(e,t){return e+t}function ne(e,t){return e*t}function pt(e,t){return e-t}function dt(e,t){return e===t?new fe:e<t?new oe:new Ge}function ht(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof v)return i;{let a=r.head;e=r.tail,t=s,n=i+s+a}}}function wt(e,t){if(e instanceof v)return"";{let n=e.head,r=e.tail;return ht(r,t,n)}}function K(e,t){if(e instanceof _){let n=e[0];return t(n)}else return e}const re="src/gleam_community/colour.gleam";class gt extends l{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class xt extends l{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function N(e){return e>1||e<0?new I(void 0):new _(e)}function H(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,a=s*2,u=s*3;return i<1?t+(n-t)*s*6:a<1?n:u<2?t+(n-t)*(2/3-s)*6:t}function mt(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let a=s,u=n*2-a,c=H(e+1/3,u,a),o=H(e,u,a),f=H(e-1/3,u,a);return[c,o,f,r]}function vt(e,t,n,r){return K(N(e),s=>K(N(t),i=>K(N(n),a=>K(N(r),u=>new _(new xt(s,i,a,u))))))}function de(e,t,n){return vt(e,t,n,1)}function $t(e){if(e instanceof gt){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return mt(t,n,r,s)}}function se(e){let t=$t(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let a=c=>{let o,w=ne(c,1e4),h=ee(w),g=h;o=te(g,100);let p=o,x;if(p instanceof _)x=p[0];else throw m("let_assert",re,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:p,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return x},u=c=>{let o,w=ne(c,1e3),h=ee(w),g=h;o=te(g,1e3);let p=o,x;if(p instanceof _)x=p[0];else throw m("let_assert",re,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:p,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return x};return wt(E(["rgba(",O(a(n))+"%,",O(a(r))+"%,",O(a(s))+"%,",O(u(i)),")"]),"")}function yt(e){return Math.sin(e)}function he(){return Math.PI}function bt(e,t){return Math.atan2(e,t)}function Pt(e){return Math.cos(e)}function Tt(e,t){return bt(e,t)}function Et(e){return Pt(e)}function we(e){return yt(e)}function ge(e,t){let n=e*Et(t),r=e*we(t);return[n,r]}function kt(e){return e*he()/180}function xe(){return he()}function R(){return 2*xe()}function At(){return Math.PI}class me extends l{}class ve extends l{constructor(t,n){super(),this[0]=t,this.closed=n}}class $e extends l{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class St extends l{constructor(t,n){super(),this.text=t,this.style=n}}class Lt extends l{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class ye extends l{constructor(t,n){super(),this[0]=t,this[1]=n}}class be extends l{constructor(t,n){super(),this[0]=t,this[1]=n}}class Mt extends l{constructor(t,n){super(),this[0]=t,this[1]=n}}class Pe extends l{constructor(t,n){super(),this[0]=t,this[1]=n}}class Te extends l{constructor(t,n){super(),this[0]=t,this[1]=n}}class It extends l{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ee extends l{constructor(t){super(),this[0]=t}}class Ot extends l{}class ke extends l{}class ie extends l{constructor(t){super(),this[0]=t}}function Kt(){return new me}function Nt(e){return new ve(e,!0)}function Rt(e,t){return Nt(E([[0,0],[e,0],[e,t],[0,t]]))}function Ae(e,t,n){return new Pe(e,[t,n])}function Ft(e,t){return new Te(e,[t,t])}function Se(e,t){return new ye(e,t)}function Le(e){return new be(e,new ke)}function ae(e){return new Ee(e)}function qt(e){return new $e(e,new ie(0),new ie(2*At()))}class Me extends l{constructor(t){super(),this[0]=t}}class Ie extends l{constructor(t){super(),this[0]=t}}class Ct extends l{constructor(t){super(),this[0]=t}}class Oe extends l{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ke extends l{constructor(t){super(),this[0]=t}}class Ne extends l{constructor(t){super(),this[0]=t}}class Re extends l{}class Fe extends l{}class qe extends l{}class Ce extends l{}class Bt extends l{}class Xt extends l{}class Dt extends l{}class Ht extends l{}class Yt extends l{}class jt extends l{}class Ut extends l{}class zt extends l{}class Vt extends l{}class Wt extends l{}class Gt extends l{}class j extends l{}class Zt extends l{}class Jt extends l{}function Qt(e){return document.querySelector(e).getContext("2d")}function Be(e){window.requestAnimationFrame(t=>{e(t)})}function Y(e,t){window.addEventListener(e,t)}function en(e){return e.keyCode}function k(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function A(e){return window.PAINT_STATE?e in window.PAINT_STATE?new _(window.PAINT_STATE[e]):new I(void 0):new I(void 0)}function tn(e){return e.canvas.clientWidth}function nn(e){return e.canvas.clientHeight}function rn(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function sn(e,t,n,r){let s=Ve(t)?We(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function an(e){e.reset()}function un(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function ln(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const a of t){let u=a[0],c=a[1];i?e.lineTo(u,c):(e.moveTo(u,c),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function cn(e,t,n){e.font=n,e.fillText(t,0,0)}function b(e){e.save()}function P(e){e.restore()}function on(e,t){e.fillStyle=t}function fn(e,t){e.strokeStyle=t}function _n(e,t){e.lineWidth=t}function pn(e,t,n){e.translate(t,n)}function dn(e,t,n){e.scale(t,n)}function hn(e,t){e.rotate(t)}function wn(e,t,n,r){e.drawImage(t,0,0,n,r)}function gn(e,t){e.imageSmoothingEnabled=t}const M="src/paint/canvas.gleam";class xn extends l{constructor(t,n){super(),this.width=t,this.height=n}}class F extends l{constructor(t,n){super(),this.fill=t,this.stroke=n}}function $(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof me)return;if(r instanceof ve){let a=r[0],u=r.closed;return ln(s,a,u,i.fill,i.stroke)}else if(r instanceof $e){let a=r.radius,u=r.start,c=r.end,o;o=u[0];let f;return f=c[0],un(s,a,o,f,i.fill,i.stroke)}else if(r instanceof St){let a=r.text,u=r.style,c,o;return c=u.size_px,o=u.font_family,b(s),cn(s,a,rt(c)+"px "+o),P(s)}else if(r instanceof Lt){let a=r.width_px,u=r.height_px,c=r[0].id,o=A(c),f;if(o instanceof _)f=o[0];else throw m("let_assert",M,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:o,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return wn(s,f,a,u)}else if(r instanceof ye){let a=r[0],u=r[1];return b(s),on(s,se(u)),$(a,s,new F(!0,i.stroke)),P(s)}else if(r instanceof be){let a=r[0],u=r[1];if(u instanceof ke)e=a,t=s,n=new F(i.fill,!1);else{let c=u[0],o=u[1];return b(s),fn(s,se(c)),_n(s,o),$(a,s,new F(i.fill,!0)),P(s)}}else if(r instanceof Mt){let a=r[0],u=r[1];return b(s),gn(s,u instanceof Ot),$(a,s,i),P(s)}else if(r instanceof Pe){let a=r[0],u=r[1],c,o;return c=u[0],o=u[1],b(s),pn(s,c,o),$(a,s,i),P(s)}else if(r instanceof Te){let a=r[0],u=r[1],c,o;return c=u[0],o=u[1],b(s),dn(s,c,o),$(a,s,i),P(s)}else if(r instanceof It){let a=r[0],u=r[1],c;return c=u[0],b(s),hn(s,c),$(a,s,i),P(s)}else{let a=r[0];if(a instanceof v)return;{let u=a.head,c=a.tail;$(u,s,i),e=new Ee(c),t=s,n=i}}}}function mn(e){return e===32?new d(new Bt):e===37?new d(new Re):e===38?new d(new qe):e===39?new d(new Fe):e===40?new d(new Ce):e===87?new d(new Xt):e===65?new d(new Dt):e===83?new d(new Ht):e===68?new d(new Yt):e===90?new d(new jt):e===88?new d(new Ut):e===67?new d(new zt):e===18?new d(new Vt):e===27?new d(new Wt):e===8?new d(new Gt):new Ze}const vn=new F(!1,!0);function Xe(e,t,n,r){return s=>{let i=A(r),a;if(i instanceof _)a=i[0];else throw m("let_assert",M,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let u=n(a,new Me(s));k(u,r);let c=t(u);return an(e),$(c,e,vn),Be(Xe(e,t,n,r))}}function $n(e,t,n,r){let s=Qt(r),i=e(new xn(tn(s),nn(s)));k(i,r);let a=(c,o)=>Y(c,f=>{let w=mn(en(f));if(w instanceof d){let h=w[0],g=A(r),p;if(g instanceof _)p=g[0];else throw m("let_assert",M,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:g,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let x=t(p,o(h));return k(x,r)}else return});a("keydown",c=>new Ie(c)),a("keyup",c=>new Ct(c)),Y("mousemove",c=>{let o=rn(s,c),f,w;f=o[0],w=o[1];let h=A(r),g;if(h instanceof _)g=h[0];else throw m("let_assert",M,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:h,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let p=t(g,new Oe(f,w));k(p,r)});let u=(c,o,f)=>Y(c,w=>{let h="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,g=A(h);k(w,h);let p=X=>sn(w,g,X,f),x=X=>{let D=A(r),Z;if(D instanceof _)Z=D[0];else throw m("let_assert",M,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:D,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let Ue=t(Z,o(X));return k(Ue,r)};p(0)&&x(new j),p(1)&&x(new Zt),p(2)&&x(new Jt)});return u("mousedown",c=>new Ke(c),!0),u("mouseup",c=>new Ne(c),!1),Be(Xe(s,n,t,r))}class y extends l{constructor(t,n){super(),this.x=t,this.y=n}}function yn(e){return E([e.x,e.y])}function De(e,t,n){return new y(n(e.x,t.x),n(e.y,t.y))}const bn="src/vec/vec2f.gleam";function Pn(e,t){return De(e,t,_t)}function Tn(e){let n=yn(e),r=V(n,s=>s*s);return ft(r)}function En(e,t){let r=De(e,t,pt);return Tn(r)}function kn(e,t){let n,r=En(e,t);n=ct(r);let s=n,i;if(s instanceof _)i=s[0];else throw m("let_assert",bn,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const He="src/app.gleam";class T extends l{constructor(t,n,r,s,i,a,u){super(),this.avatar=t,this.camera=n,this.speed=r,this.stars=s,this.mouse_pos=i,this.drag=a,this.current_time=u}}class B extends l{constructor(t,n){super(),this.pos=t,this.dir=n}}let An=class extends l{constructor(t,n){super(),this.pos=t,this.height=n}};class Ye extends l{constructor(t,n){super(),this.lagging_dir=t,this.start_move_time=n}}class W extends l{}class Sn extends l{constructor(t){super(),this.start_pos=t}}function Ln(e,t,n){let r=t*n,s=ge(r,e.dir),i,a;return i=s[0],a=s[1],new B(Pn(e.pos,new y(i,a)),e.dir)}function Mn(){let e=de(.12,1,.7),t;if(e instanceof _)t=e[0];else throw m("let_assert",He,"app",210,"view_star","Pattern match failed, no pattern matched the value.",{value:e,start:4536,end:4595,pattern_start:4547,pattern_end:4561});let n=qt(300),r=Se(n,t);return Le(r)}function je(e,t,n){let r=100,s=e.start_move_time,i=s+r;if(n>=i)return t;{let u=S(n-s,r);return t*u+e.lagging_dir*(1-u)}}function In(e){return S(1,S(e,.2)+1)}function On(e,t){let n=ge(e,t),r,s;return r=n[0],s=n[1],new y(r,s)}function Kn(e){let t=.8*R(),n,r=nt(0,200);n=V(r,i=>{let a=i;return new An(On((a+1)*2+10,a/20*R()),we(a/5*R()))});let s=n;return new T(new B(new y(0,0),t),new Ye(t,0),.01,s,new y(0,0),new W,0)}function ue(e,t,n,r){return Tt(r-t,n-e)}function Nn(e){for(;;){let t=e,n=R(),r=xe(),s=pe(r),i=t;if(i>r)e=i-n;else{let a=t;if(a<=s)e=a+n;else return t}}}const Rn=300,Fn=300;function qn(){let e=de(.85,.5,.96),t;if(e instanceof _)t=e[0];else throw m("let_assert",He,"app",202,"view_background","Pattern match failed, no pattern matched the value.",{value:e,start:4371,end:4429,pattern_start:4382,pattern_end:4394});let n=Rt(Rn,Fn),r=Se(n,t);return Le(r)}const q=new y(150,150);function Cn(e,t,n){let r=kt(45),s=ue(t.pos.x,t.pos.y,e.pos.x,e.pos.y),i=Nn(s-t.dir);if(Q(i)>r)return Kt();{let u=Q(kn(t.pos,e.pos)),c=ue(0,0,u,e.height),o=In(u),f=new y(S(i*q.x,r),S(c*q.x,r)),h=Ft(n,o);return Ae(h,f.x,f.y)}}function Bn(e){let t,n=e.avatar;t=new B(n.pos,je(e.camera,e.avatar.dir,e.current_time));let r=t,s=Mn(),i,a=ae((()=>{let c=e.stars;return V(c,o=>Cn(o,r,s))})());i=Ae(a,q.x,q.y);let u=i;return ae(E([qn(),u]))}const Xn=.005,Dn=.4;function le(e,t){return new T(e.avatar,e.camera,_e(e.speed+t*(e.speed*.05),Xn,Dn),e.stars,e.mouse_pos,e.drag,e.current_time)}const Hn=.09;function Yn(e,t){return new B(e.pos,e.dir+Hn*t)}function U(e,t){return new T(Yn(e.avatar,t),new Ye(je(e.camera,e.avatar.dir,e.current_time),e.current_time),e.speed,e.stars,e.mouse_pos,e.drag,e.current_time)}function jn(e,t){let n=e.drag;if(n instanceof W)return e;{let r=n.start_pos,s,i=(e.mouse_pos.x-r.x)*.001;s=_e(i,-.02,.02);let u=s*t;return U(e,u)}}function Un(e,t){if(t instanceof Me){let n=t[0],r=n-e.current_time,s=new T(Ln(e.avatar,e.speed,r),e.camera,e.speed,e.stars,e.mouse_pos,e.drag,n);return jn(s,r)}else if(t instanceof Ie){let n=t[0];return n instanceof Re?U(e,-1):n instanceof Fe?U(e,1):n instanceof qe?le(e,1):n instanceof Ce?le(e,-1):e}else if(t instanceof Oe){let n=t[0],r=t[1];return new T(e.avatar,e.camera,e.speed,e.stars,new y(n,r),e.drag,e.current_time)}else return t instanceof Ke?t[0]instanceof j?new T(e.avatar,e.camera,e.speed,e.stars,e.mouse_pos,new Sn(e.mouse_pos),e.current_time):e:t instanceof Ne&&t[0]instanceof j?new T(e.avatar,e.camera,e.speed,e.stars,e.mouse_pos,new W,e.current_time):e}function zn(){return $n(Kn,Un,Bn,"#app")}zn();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const G=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",G("mousedown",1));window.addEventListener("touchend",G("mouseup",0));window.addEventListener("touchmove",G("mousemove",void 0));
