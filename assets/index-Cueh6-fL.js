(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class f{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class ee{static fromArray(t,n){let r=n||new x;for(let s=t.length-1;s>=0;--s)r=new tt(t[s],r);return r}[Symbol.iterator](){return new It(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof x}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function g(e,t){return new tt(e,t)}function _(e,t){return ee.fromArray(e,t)}class It{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof x)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class x extends ee{}class tt extends ee{constructor(t,n){super(),this.head=t,this.tail=n}}class oe extends f{static isResult(t){return t instanceof oe}}class v extends oe{constructor(t){super(),this[0]=t}isOk(){return!0}}const Mt=e=>e instanceof v,Ot=e=>e[0];class V extends oe{constructor(t){super(),this[0]=t}isOk(){return!1}}function F(e,t){return t===0?0:e/t}function A(e,t,n,r,s,i,a){let l=new globalThis.Error(i);l.gleam_error=e,l.file=t,l.module=n,l.line=r,l.function=s,l.fn=s;for(let u in a)l[u]=a[u];return l}class S extends f{}class I extends f{}class Le extends f{}function jt(e){return e instanceof S?new Le:e instanceof I?e:new S}class k extends f{constructor(t){super(),this[0]=t}}class qt extends f{}class P extends f{}class Z extends f{}function W(e,t){for(;;){let n=e,r=t;if(n instanceof x)return r;{let s=n.head;e=n.tail,t=g(s,r)}}}function T(e){return W(e,_([]))}function Kt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return T(i);{let a=r.head,l=r.tail,u,c=s(a);if(c instanceof v){let p=c[0];u=g(p,i)}else u=i;let o=u;e=l,t=s,n=o}}}function Nt(e,t){return Kt(e,t,_([]))}function Rt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return T(i);{let a=r.head;e=r.tail,t=s,n=g(s(a),i)}}}function ne(e,t){return Rt(e,t,_([]))}function Ft(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof x)return T(l);{let u=s.head,c=s.tail,o=g(i(u,a),l);e=c,t=i,n=a+1,r=o}}}function Ct(e,t){return Ft(e,t,0,_([]))}function Bt(e,t){for(;;){let n=e,r=t;if(n instanceof x)return T(r);{let s=n.head;e=n.tail,t=W(s,r)}}}function Dt(e){return Bt(e,_([]))}function Xt(e,t){return Dt(ne(e,t))}function zt(e,t,n,r,s,i){for(;;){let a=e,l=t,u=n,c=r,o=s,p=i,h=g(o,u);if(a instanceof x)return c instanceof P?g(T(h),p):g(h,p);{let w=a.head,d=a.tail,b=l(o,w);if(c instanceof P)if(b instanceof S)e=d,t=l,n=h,r=c,s=w,i=p;else if(b instanceof I)e=d,t=l,n=h,r=c,s=w,i=p;else{let $;c instanceof P?$=g(T(h),p):$=g(h,p);let L=$;if(d instanceof x)return g(_([w]),L);{let O=d.head,j=d.tail,y,q=l(w,O);q instanceof S?y=new P:q instanceof I?y=new P:y=new Z;let B=y;e=j,t=l,n=_([w]),r=B,s=O,i=L}}else if(b instanceof S){let $;c instanceof P?$=g(T(h),p):$=g(h,p);let L=$;if(d instanceof x)return g(_([w]),L);{let O=d.head,j=d.tail,y,q=l(w,O);q instanceof S?y=new P:q instanceof I?y=new P:y=new Z;let B=y;e=j,t=l,n=_([w]),r=B,s=O,i=L}}else if(b instanceof I){let $;c instanceof P?$=g(T(h),p):$=g(h,p);let L=$;if(d instanceof x)return g(_([w]),L);{let O=d.head,j=d.tail,y,q=l(w,O);q instanceof S?y=new P:q instanceof I?y=new P:y=new Z;let B=y;e=j,t=l,n=_([w]),r=B,s=O,i=L}}else e=d,t=l,n=h,r=c,s=w,i=p}}}function Ht(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof x)return W(i,l);if(i instanceof x)return W(s,l);{let u=s.head,c=s.tail,o=i.head,p=i.tail,h=a(u,o);h instanceof S?(e=c,t=i,n=a,r=g(u,l)):(h instanceof I,e=s,t=p,n=a,r=g(o,l))}}}function Yt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return T(i);{let a=r.tail;if(a instanceof x){let l=r.head;return T(g(T(l),i))}else{let l=r.head,u=a.head,c=a.tail,o=Ht(l,u,s,_([]));e=c,t=s,n=g(o,i)}}}}function Ut(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof x)return W(i,l);if(i instanceof x)return W(s,l);{let u=s.head,c=s.tail,o=i.head,p=i.tail,h=a(u,o);h instanceof S?(e=s,t=p,n=a,r=g(o,l)):(h instanceof I,e=c,t=i,n=a,r=g(u,l))}}}function Vt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return T(i);{let a=r.tail;if(a instanceof x){let l=r.head;return T(g(T(l),i))}else{let l=r.head,u=a.head,c=a.tail,o=Ut(l,u,s,_([]));e=c,t=s,n=g(o,i)}}}}function Wt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return r;if(s instanceof P){if(r.tail instanceof x)return r.head;e=Yt(r,i,_([])),t=new Z,n=i}else if(r.tail instanceof x){let l=r.head;return T(l)}else e=Vt(r,i,_([])),t=new P,n=i}}function Gt(e,t){if(e instanceof x)return e;{let n=e.tail;if(n instanceof x)return e;{let r=e.head,s=n.head,i=n.tail,a,l=t(r,s);l instanceof S?a=new P:l instanceof I?a=new P:a=new Z;let u=a,c=zt(i,t,_([r]),u,s,_([]));return Wt(c,new P,t)}}}function Zt(e,t,n){for(;;){let r=e,s=t,i=n,a=hn(r,s);if(a instanceof S)e=r,t=s-1,n=g(s,i);else{if(a instanceof I)return g(s,i);e=r,t=s+1,n=g(s,i)}}}function Ie(e,t){return Zt(e,t,_([]))}function Jt(e){return e.toString()}function Qt(e){if(e==="")return 0;const t=nt(e);if(t){let n=0;for(const r of t)n++;return n}else return e.match(/./gsu).length}function en(e){const t=nt(e);return t?ee.fromArray(Array.from(t).map(n=>n.segment)):ee.fromArray(e.match(/./gsu))}let Be;function nt(e){if(globalThis.Intl&&Intl.Segmenter)return Be||=new Intl.Segmenter,Be.segment(e)[Symbol.iterator]()}function tn(e){return Math.ceil(e)}function nn(e){return Math.floor(e)}function De(e){return Math.round(e)}function rn(e,t){return Math.pow(e,t)}function re(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function sn(e,t){return e===t?new I:e<t?new S:new Le}function an(e,t){return e<t?e:t}function ln(e,t){return e>t?e:t}function rt(e,t,n){let s=an(e,n);return ln(s,t)}function Xe(e){return e>=0?e:0-e}function un(e,t){let n=tn(t)-t>0;return e<0&&n||e===0&&t<0?new V(void 0):new v(rn(e,t))}function cn(e){return un(e,.5)}function Me(e){return-1*e}function ze(e){return e>=0?De(e):0-De(Me(e))}function fn(e,t){for(;;){let n=e,r=t;if(n instanceof x)return r;{let s=n.head;e=n.tail,t=s+r}}}function on(e){return fn(e,0)}function He(e,t){if(t===0)return new V(void 0);{let n=t;return new v(F(e,n))}}function _n(e,t){return e+t}function Ye(e,t){return e*t}function pn(e,t){return e-t}function hn(e,t){return e===t?new I:e<t?new S:new Le}function dn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return i;{let a=r.head;e=r.tail,t=s,n=i+s+a}}}function wn(e,t){if(e instanceof x)return"";{let n=e.head,r=e.tail;return dn(r,t,n)}}function gn(e,t){return en(e)}function se(e,t){if(e instanceof v){let n=e[0];return t(n)}else return e}const Ue="src/gleam_community/colour.gleam";class st extends f{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class xn extends f{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function ie(e){return e>1||e<0?new V(void 0):new v(e)}function he(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,a=s*2,l=s*3;return i<1?t+(n-t)*s*6:a<1?n:l<2?t+(n-t)*(2/3-s)*6:t}function bn(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let a=s,l=n*2-a,u=he(e+1/3,l,a),c=he(e,l,a),o=he(e-1/3,l,a);return[u,c,o,r]}function ge(e,t,n,r){return se(ie(e),s=>se(ie(t),i=>se(ie(n),a=>se(ie(r),l=>new v(new xn(s,i,a,l))))))}function xe(e,t,n){return ge(e,t,n,1)}function vn(e){if(e instanceof st){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return bn(t,n,r,s)}}function Ve(e){let t=vn(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let a=u=>{let c,p=Ye(u,1e4),h=ze(p),w=h;c=He(w,100);let d=c,b;if(d instanceof v)b=d[0];else throw A("let_assert",Ue,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:d,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return b},l=u=>{let c,p=Ye(u,1e3),h=ze(p),w=h;c=He(w,1e3);let d=c,b;if(d instanceof v)b=d[0];else throw A("let_assert",Ue,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:d,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return b};return wn(_(["rgba(",re(a(n))+"%,",re(a(r))+"%,",re(a(s))+"%,",re(l(i)),")"]),"")}const yn=new st(.9607843137254902,.4745098039215686,0,1);function $n(e){return Math.sin(e)}function mn(){return Math.PI}function kn(e,t){return Math.atan2(e,t)}function Pn(e){return Math.cos(e)}function Tn(e,t){return kn(e,t)}function Sn(e){return Pn(e)}function ce(e){return $n(e)}function Oe(e,t){let n=e*Sn(t),r=e*ce(t);return[n,r]}function it(){return mn()}function J(){return 2*it()}function An(){return Math.PI}class at extends f{}class je extends f{constructor(t,n){super(),this[0]=t,this.closed=n}}class lt extends f{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class En extends f{constructor(t,n){super(),this.text=t,this.style=n}}class Ln extends f{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class ut extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class qe extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class In extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class ct extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class ft extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class ot extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class _t extends f{constructor(t){super(),this[0]=t}}class Mn extends f{}class pt extends f{}class On extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class be extends f{constructor(t){super(),this[0]=t}}function jn(e){return new be(e)}function Ke(){return new at}function Ne(e){return new je(e,!0)}function m(e){return new je(e,!1)}function Re(e,t){return Ne(_([[0,0],[e,0],[e,t],[0,t]]))}function M(e,t,n){return new ct(e,[t,n])}function Fe(e,t){return M(e,t,0)}function ht(e,t){return M(e,0,t)}function ve(e,t){return new ft(e,[t,t])}function qn(e,t){return new ot(e,t)}function C(e,t){return new ut(e,t)}function dt(e,t,n){return new qe(e,new On(t,n))}function H(e){return new qe(e,new pt)}function E(e){return new _t(e)}function wt(e){return new lt(e,new be(0),new be(2*An()))}class ye extends f{constructor(t){super(),this[0]=t}}class $e extends f{constructor(t){super(),this[0]=t}}class Kn extends f{constructor(t){super(),this[0]=t}}class me extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class ke extends f{constructor(t){super(),this[0]=t}}class gt extends f{constructor(t){super(),this[0]=t}}class xt extends f{}class bt extends f{}class vt extends f{}class yt extends f{}class Nn extends f{}class Rn extends f{}class Fn extends f{}class Cn extends f{}class Bn extends f{}class Dn extends f{}class Xn extends f{}class zn extends f{}class Hn extends f{}class Pe extends f{}class Yn extends f{}class le extends f{}class Un extends f{}class Vn extends f{}function Wn(e){return document.querySelector(e).getContext("2d")}function $t(e){window.requestAnimationFrame(t=>{e(t)})}function de(e,t){window.addEventListener(e,t)}function Gn(e){return e.keyCode}function Y(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function U(e){return window.PAINT_STATE?e in window.PAINT_STATE?new v(window.PAINT_STATE[e]):new V(void 0):new V(void 0)}function Zn(e){return e.canvas.clientWidth}function Jn(e){return e.canvas.clientHeight}function Qn(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function er(e,t,n,r){let s=Mt(t)?Ot(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function tr(e){e.reset()}function nr(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function rr(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const a of t){let l=a[0],u=a[1];i?e.lineTo(l,u):(e.moveTo(l,u),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function sr(e,t,n){e.font=n,e.fillText(t,0,0)}function D(e){e.save()}function X(e){e.restore()}function ir(e,t){e.fillStyle=t}function ar(e,t){e.strokeStyle=t}function lr(e,t){e.lineWidth=t}function ur(e,t,n){e.translate(t,n)}function cr(e,t,n){e.scale(t,n)}function fr(e,t){e.rotate(t)}function or(e,t,n,r){e.drawImage(t,0,0,n,r)}function _r(e,t){e.imageSmoothingEnabled=t}const Q="src/paint/canvas.gleam";class pr extends f{constructor(t,n){super(),this.width=t,this.height=n}}class ue extends f{constructor(t,n){super(),this.fill=t,this.stroke=n}}function R(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof at)return;if(r instanceof je){let a=r[0],l=r.closed;return rr(s,a,l,i.fill,i.stroke)}else if(r instanceof lt){let a=r.radius,l=r.start,u=r.end,c;c=l[0];let o;return o=u[0],nr(s,a,c,o,i.fill,i.stroke)}else if(r instanceof En){let a=r.text,l=r.style,u,c;return u=l.size_px,c=l.font_family,D(s),sr(s,a,Jt(u)+"px "+c),X(s)}else if(r instanceof Ln){let a=r.width_px,l=r.height_px,u=r[0].id,c=U(u),o;if(c instanceof v)o=c[0];else throw A("let_assert",Q,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:c,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return or(s,o,a,l)}else if(r instanceof ut){let a=r[0],l=r[1];return D(s),ir(s,Ve(l)),R(a,s,new ue(!0,i.stroke)),X(s)}else if(r instanceof qe){let a=r[0],l=r[1];if(l instanceof pt)e=a,t=s,n=new ue(i.fill,!1);else{let u=l[0],c=l[1];return D(s),ar(s,Ve(u)),lr(s,c),R(a,s,new ue(i.fill,!0)),X(s)}}else if(r instanceof In){let a=r[0],l=r[1];return D(s),_r(s,l instanceof Mn),R(a,s,i),X(s)}else if(r instanceof ct){let a=r[0],l=r[1],u,c;return u=l[0],c=l[1],D(s),ur(s,u,c),R(a,s,i),X(s)}else if(r instanceof ft){let a=r[0],l=r[1],u,c;return u=l[0],c=l[1],D(s),cr(s,u,c),R(a,s,i),X(s)}else if(r instanceof ot){let a=r[0],l=r[1],u;return u=l[0],D(s),fr(s,u),R(a,s,i),X(s)}else{let a=r[0];if(a instanceof x)return;{let l=a.head,u=a.tail;R(l,s,i),e=new _t(u),t=s,n=i}}}}function hr(e){return e===32?new k(new Nn):e===37?new k(new xt):e===38?new k(new vt):e===39?new k(new bt):e===40?new k(new yt):e===87?new k(new Rn):e===65?new k(new Fn):e===83?new k(new Cn):e===68?new k(new Bn):e===90?new k(new Dn):e===88?new k(new Xn):e===67?new k(new zn):e===18?new k(new Hn):e===27?new k(new Pe):e===8?new k(new Yn):new qt}const dr=new ue(!1,!0);function mt(e,t,n,r){return s=>{let i=U(r),a;if(i instanceof v)a=i[0];else throw A("let_assert",Q,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let l=n(a,new ye(s));Y(l,r);let u=t(l);return tr(e),R(u,e,dr),$t(mt(e,t,n,r))}}function wr(e,t,n,r){let s=Wn(r),i=e(new pr(Zn(s),Jn(s)));Y(i,r);let a=(u,c)=>de(u,o=>{let p=hr(Gn(o));if(p instanceof k){let h=p[0],w=U(r),d;if(w instanceof v)d=w[0];else throw A("let_assert",Q,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:w,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let b=t(d,c(h));return Y(b,r)}else return});a("keydown",u=>new $e(u)),a("keyup",u=>new Kn(u)),de("mousemove",u=>{let c=Qn(s,u),o,p;o=c[0],p=c[1];let h=U(r),w;if(h instanceof v)w=h[0];else throw A("let_assert",Q,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:h,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let d=t(w,new me(o,p));Y(d,r)});let l=(u,c,o)=>de(u,p=>{let h="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,w=U(h);Y(p,h);let d=j=>er(p,w,j,o),b=j=>{let y=U(r),q;if(y instanceof v)q=y[0];else throw A("let_assert",Q,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:y,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let B=t(q,c(j));return Y(B,r)};d(0)&&b(new le),d(1)&&b(new Un),d(2)&&b(new Vn)});return l("mousedown",u=>new ke(u),!0),l("mouseup",u=>new gt(u),!1),$t(mt(s,n,t,r))}class N extends f{constructor(t,n){super(),this.x=t,this.y=n}}function gr(e){return _([e.x,e.y])}function kt(e,t,n){return new N(n(e.x,t.x),n(e.y,t.y))}const xr="src/vec/vec2f.gleam";function br(e,t){return kt(e,t,_n)}function vr(e){let n=gr(e),r=ne(n,s=>s*s);return on(r)}function yr(e,t){let r=kt(e,t,pn);return vr(r)}function $r(e,t){let n,r=yr(e,t);n=cn(r);let s=n,i;if(s instanceof v)i=s[0];else throw A("let_assert",xr,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const G="src/app.gleam";class K extends f{constructor(t,n,r,s,i,a,l,u,c){super(),this.avatar=t,this.camera=n,this.speed=r,this.objects=s,this.mouse_pos=i,this.drag=a,this.current_time=l,this.paused=u,this.consts=c}}class _e extends f{constructor(t,n){super(),this.pos=t,this.dir=n}}let We=class extends f{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class Pt extends f{}class mr extends f{}class Tt extends f{constructor(t,n){super(),this.lagging_dir=t,this.start_move_time=n}}class pe extends f{}class kr extends f{constructor(t){super(),this.start_pos=t}}class z extends f{}class St extends f{}class Pr extends f{constructor(t,n,r,s,i,a,l){super(),this.background_picture=t,this.shadow_picture=n,this.color_dark_blue=r,this.color_white_transparent=s,this.color_yellow=i,this.color_orange=a,this.color_dark_blue_transparent=l}}function ae(e,t){return new K(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new pe,e.current_time,t,e.consts)}function Ge(e){return e instanceof z?new St:new z}function Tr(e,t){let n=e.speed*t,r=Oe(n,e.avatar.dir),s,i;return s=r[0],i=r[1],new K((()=>{let a=e.avatar;return new _e(br(e.avatar.pos,new N(s,i)),a.dir)})(),e.camera,e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function Sr(e,t){let n;return e==="a"?n=m(_([[3,1],[11,1],[11,11],[1,11],[1,5],[11,5]])):e==="b"?n=m(_([[1,3],[11,3],[11,11],[1,11],[1,-1]])):e==="c"?n=m(_([[11,11],[1,11],[1,1],[11,1],[11,3]])):e==="e"?n=m(_([[9,11],[1,11],[1,1],[11,1],[11,7],[1,7]])):e==="g"?n=E(_([m(_([[0,1],[11,1],[11,7],[1,7],[1,1]])),m(_([[3,7],[3,11],[11,11],[11,13]]))])):e==="i"?n=E(_([m(_([[6,-2],[6,0]])),m(_([[2,3],[6,3],[6,11]])),m(_([[0,11],[12,11]]))])):e==="j"?n=E(_([m(_([[11,-2],[11,0]])),m(_([[11,2],[11,11],[1,11],[1,9]]))])):e==="l"?n=m(_([[12,11],[1,11],[1,0]])):e==="o"?n=m(_([[0,1],[11,1],[11,11],[1,11],[1,1]])):e==="s"?n=m(_([[11,1],[2,1],[2,6],[11,6],[11,11],[1,11],[1,9]])):e==="y"?n=E(_([m(_([[11,0],[11,13],[1,13]])),m(_([[11,9],[1,9],[1,0]]))])):n=Ke(),dt(n,t,2)}function Ar(e,t,n){let r=ce(t/400)*.1,s=ce(t/1600)*6,i=Sr(e,n),a=C(i,n),l=H(a),u=M(l,-6,-6),c=qn(u,jn(r));return M(c,6,6+s)}function Er(e,t){let n=e/2e3,r=Ne((()=>{let i=Ie(0,10);return ne(i,a=>{let l=J()/10*a+n,u;return a%2===0?u=250:u=140,Oe(u,l)})})()),s=C(r,t.color_yellow);return dt(s,t.color_orange,10)}function Lr(e){let t=wt(1),n=C(t,e.color_yellow);return H(n)}function Ir(e,t,n,r){return e instanceof Pt?n?Lr(r):Er(t,r):n?Ke():r.shadow_picture}function Mr(e){let t=Re(200,5e3),n=Fe(t,-100),r=C(n,e);return H(r)}function Or(e){let t=Re(4,12),n=E(_([t,M(t,8,0)])),r=C(n,e);return H(r)}function jr(e){let t=Ne(_([[2,0],[11,6],[2,12]])),n=C(t,e);return H(n)}function qr(e,t){return E(_([(()=>{let n=wt(15),r=C(n,t.color_white_transparent);return H(r)})(),(()=>{if(e instanceof z){let n=jr(t.color_dark_blue);return M(n,-6,-6)}else{let n=Or(t.color_dark_blue);return M(n,-6,-6)}})()]))}function At(e,t,n){let r=100,s=e.start_move_time,i=s+r;if(n>=i)return t;{let l=F(n-s,r);return t*l+e.lagging_dir*(1-l)}}function Kr(e){return F(1,F(e,.2)+1)}function Nr(e,t){let n=Oe(e,t),r,s;return r=n[0],s=n[1],new N(r,s)}function Et(e,t,n,r){return Tn(r-t,n-e)}function Rr(e){for(;;){let t=e,n=J(),r=it(),s=Me(r),i=t;if(i>r)e=i-n;else{let a=t;if(a<=s)e=a+n;else return t}}}function we(e,t,n){return(t-e)*n+e}function Ze(e,t,n,r,s,i,a,l,u){let c=u,o=nn(F(l,c)),p=Ie(0,u),h=ne(p,w=>{let d=w,b=F(d,c-1),$=xe(we(e,r,b),we(t,s,b),we(n,i,b)),L;if($ instanceof v)L=$[0];else throw A("let_assert",G,"app",692,"view_gradient","Pattern match failed, no pattern matched the value.",{value:$,start:16049,end:16276,pattern_start:16060,pattern_end:16072});let O=Re(a,o),j=ht(O,o*d),y=C(j,L);return H(y)});return E(h)}const Te=300,fe=300,te=new N(150,150);function Fr(){let e=_([Ze(.85,.6,.9,.7,.4,.98,Te,fe/2,50),(()=>{let t=Ze(.6,.4,.95,.6,.7,.8,Te,fe/2,50);return ht(t,te.y)})()]);return E(e)}function Cr(e){let t=.8*J(),n=ge(0,1,1,.5),r;if(n instanceof v)r=n[0];else throw A("let_assert",G,"app",21,"init","Pattern match failed, no pattern matched the value.",{value:n,start:461,end:538,pattern_start:472,pattern_end:499});let s=xe(.6,.7,.7),i;if(s instanceof v)i=s[0];else throw A("let_assert",G,"app",22,"init","Pattern match failed, no pattern matched the value.",{value:s,start:541,end:604,pattern_start:552,pattern_end:571});let a=ge(.75,.5,.4,.05),l;if(a instanceof v)l=a[0];else throw A("let_assert",G,"app",23,"init","Pattern match failed, no pattern matched the value.",{value:a,start:607,end:694,pattern_start:618,pattern_end:649});let u=xe(.12,1,.7),c;if(u instanceof v)c=u[0];else throw A("let_assert",G,"app",25,"init","Pattern match failed, no pattern matched the value.",{value:u,start:697,end:758,pattern_start:708,pattern_end:724});let o,p=Ie(0,200);o=Xt(p,w=>{let d=w,b=Nr((d+1)*2+10,d/20*J()),$=ce(d/5*J());return _([new We(b,$,new Pt),new We(b,-10,new mr)])});let h=o;return new K(new _e(new N(0,0),t),new Tt(t,0),.01,h,new N(0,0),new pe,0,new z,new Pr(Fr(),Mr(l),i,r,c,yn,l))}const Br=.005,Dr=.4;function Je(e,t){return new K(e.avatar,e.camera,rt(e.speed+t*(e.speed*.05),Br,Dr),e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}const Xr=.09;function zr(e,t){return new _e(e.pos,e.dir+Xr*t)}function Se(e,t){return new K(zr(e.avatar,t),new Tt(At(e.camera,e.avatar.dir,e.current_time),e.current_time),e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function Hr(e,t){let n=e.drag;if(n instanceof pe)return e;{let r=n.start_pos,s,i=(e.mouse_pos.x-r.x)*.001;s=rt(i,-.02,.02);let l=s*t;return Se(e,l)}}function Yr(e,t){if(e.paused instanceof z)if(t instanceof ye){let r=t[0];return new K(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.consts)}else{if(t instanceof $e)return t[0]instanceof Pe?ae(e,Ge(e.paused)):e;if(t instanceof me){let r=t[0],s=t[1];return new K(e.avatar,e.camera,e.speed,e.objects,new N(r,s),e.drag,e.current_time,e.paused,e.consts)}else return t instanceof ke&&t[0]instanceof le?ae(e,new St):e}else if(t instanceof ye){let r=t[0],s=r-e.current_time,i=new K(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.consts),a=Tr(i,s);return Hr(a,s)}else if(t instanceof $e){let r=t[0];return r instanceof xt?Se(e,-1):r instanceof bt?Se(e,1):r instanceof vt?Je(e,1):r instanceof yt?Je(e,-1):r instanceof Pe?ae(e,Ge(e.paused)):e}else if(t instanceof me){let r=t[0],s=t[1];return new K(e.avatar,e.camera,e.speed,e.objects,new N(r,s),e.drag,e.current_time,e.paused,e.consts)}else return t instanceof ke?t[0]instanceof le?e.mouse_pos.x<=30&&e.mouse_pos.y>=fe-30?ae(e,new z):new K(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new kr(e.mouse_pos),e.current_time,e.paused,e.consts):e:t instanceof gt&&t[0]instanceof le?new K(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new pe,e.current_time,e.paused,e.consts):e}const Ae=.7853981634;function Ur(e,t,n,r,s){let i=Et(0,0,n,e.height),a=n>50,l;a?l=1:l=Kr(n);let u=l,c=new N(F(t*te.x,Ae),Me(F(i*te.x,Ae))),o=Ir(e.kind,r,a,s),p=ve(o,u);return M(p,c.x,c.y)}const Lt=12,Ee=3;function Qe(e,t){let n=Qt(e);return((Lt+Ee)*n-Ee)*t}function et(e,t,n){let r=gn(e),s=Ct(r,(i,a)=>{let l=Ar(i,t+a*8e3,n);return Fe(l,a*(Lt+Ee))});return E(s)}function Vr(e,t){let n="cielos",r=1.5,s=Qe(n,r),i="by agj",a=.75,l=Qe(i,a),u=E(_([(()=>{let c=et(n,e,t.color_dark_blue);return ve(c,r)})(),(()=>{let c=et(i,e,t.color_dark_blue),o=ve(c,a);return M(o,s-l,40)})()]));return Fe(u,Te*.5-s*.5)}function Wr(e){return E(_([(()=>{if(e.paused instanceof z){let n=Vr(e.current_time,e.consts);return M(n,0,80)}else return Ke()})(),(()=>{let t=qr(e.paused,e.consts);return M(t,17,fe-17)})()]))}function Gr(e){let t,n=e.avatar;t=new _e(n.pos,At(e.camera,e.avatar.dir,e.current_time));let r=t,s,i=E((()=>{let l=e.objects,u=Nt(l,o=>{let p=Et(r.pos.x,r.pos.y,o.pos.x,o.pos.y),h=Rr(p-r.dir),w=Xe($r(r.pos,o.pos));return Xe(h)<=Ae?new v([o,h,w]):new V(void 0)}),c=Gt(u,(o,p)=>jt(sn(o[2],p[2])));return ne(c,o=>Ur(o[0],o[1],o[2],e.current_time,e.consts))})());s=M(i,te.x,te.y);let a=s;return E(_([e.consts.background_picture,a,Wr(e)]))}function Zr(){return wr(Cr,Yr,Gr,"#app")}Zr();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const Ce=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",Ce("mousedown",1));window.addEventListener("touchend",Ce("mouseup",0));window.addEventListener("touchmove",Ce("mousemove",void 0));
