(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();class _{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class le{static fromArray(t,n){let r=n||new d;for(let i=t.length-1;i>=0;--i)r=new kt(t[i],r);return r}[Symbol.iterator](){return new Bn(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof d}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function y(e,t){return new kt(e,t)}function l(e,t){return le.fromArray(e,t)}class Bn{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof d)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class d extends le{}class kt extends le{constructor(t,n){super(),this.head=t,this.tail=n}}class un{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return we(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;const n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<n;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;const r=this.bitSize%8;if(r){const i=8-r;if(this.rawBuffer[n]>>i!==t.rawBuffer[n]>>i)return!1}}else{for(let i=0;i<n;i++){const s=we(this.rawBuffer,this.bitOffset,i),a=we(t.rawBuffer,t.bitOffset,i);if(s!==a)return!1}const r=this.bitSize%8;if(r){const i=we(this.rawBuffer,this.bitOffset,n),s=we(t.rawBuffer,t.bitOffset,n),a=8-r;if(i>>a!==s>>a)return!1}}return!0}get buffer(){if(Kt("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Kt("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function we(e,t,n){if(t===0)return e[n]??0;{const r=e[n]<<t&255,i=e[n+1]>>8-t;return r|i}}class Mn{constructor(t){this.value=t}}const Dt={};function Kt(e,t){Dt[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Dt[e]=!0)}class We extends _{static isResult(t){return t instanceof We}}class $ extends We{constructor(t){super(),this[0]=t}isOk(){return!0}}const In=e=>e instanceof $,Cn=e=>e[0];class J extends We{constructor(t){super(),this[0]=t}isOk(){return!1}}function V(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!Ft(r)||!Ft(i)||!Un(r,i)||qn(r,i)||Rn(r,i)||Ln(r,i)||Dn(r,i)||Kn(r,i)||Fn(r,i))return!1;const a=Object.getPrototypeOf(r);if(a!==null&&typeof a.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[u,c]=Nn(r);const f=u(r),o=u(i);if(f.length!==o.length)return!1;for(let p of f)n.push(c(r,p),c(i,p))}return!0}function Nn(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function qn(e,t){return e instanceof Date&&(e>t||e<t)}function Rn(e,t){return!(e instanceof un)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function Ln(e,t){return Array.isArray(e)&&e.length!==t.length}function Dn(e,t){return e instanceof Map&&e.size!==t.size}function Kn(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function Fn(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Ft(e){return typeof e=="object"&&e!==null}function Un(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function D(e,t){return t===0?0:e/t}function C(e,t,n,r,i,s,a){let u=new globalThis.Error(s);u.gleam_error=e,u.file=t,u.module=n,u.line=r,u.function=i,u.fn=i;for(let c in a)u[c]=a[c];return u}class I extends _{}class R extends _{}class vt extends _{}function cn(e){return e instanceof I?new vt:e instanceof R?e:new I}class T extends _{constructor(t){super(),this[0]=t}}class fn extends _{}const Ut=new WeakMap,Je=new DataView(new ArrayBuffer(8));let Qe=0;function rt(e){const t=Ut.get(e);if(t!==void 0)return t;const n=Qe++;return Qe===2147483647&&(Qe=0),Ut.set(e,n),n}function it(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function St(e){let t=0;const n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function ln(e){Je.setFloat64(0,e);const t=Je.getInt32(0),n=Je.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function Yn(e){return St(e.toString())}function Xn(e){const t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{const r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return rt(e);if(e instanceof Date)return ln(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+q(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+q(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+it(q(r),q(i))|0});else{const r=Object.keys(e);for(let i=0;i<r.length;i++){const s=r[i],a=e[s];n=n+it(q(a),St(s))|0}}return n}function q(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return ln(e);case"string":return St(e);case"bigint":return Yn(e);case"object":return Xn(e);case"symbol":return rt(e);case"function":return rt(e);default:return 0}}const Y=5,At=Math.pow(2,Y),Wn=At-1,Hn=At/2,Vn=At/4,O=0,U=1,N=2,ie=3,Et={type:N,bitmap:0,array:[]};function je(e,t){return e>>>t&Wn}function He(e,t){return 1<<je(e,t)}function mn(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Tt(e,t){return mn(e&t-1)}function L(e,t,n){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function Zn(e,t,n){const r=e.length,i=new Array(r+1);let s=0,a=0;for(;s<t;)i[a++]=e[s++];for(i[a++]=n;s<r;)i[a++]=e[s++];return i}function st(e,t){const n=e.length,r=new Array(n-1);let i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function on(e,t,n,r,i,s){const a=q(t);if(a===r)return{type:ie,hash:a,array:[{type:O,k:t,v:n},{type:O,k:i,v:s}]};const u={val:!1};return ze(jt(Et,e,a,t,n,u),e,r,i,s,u)}function ze(e,t,n,r,i,s){switch(e.type){case U:return Gn(e,t,n,r,i,s);case N:return jt(e,t,n,r,i,s);case ie:return Jn(e,t,n,r,i,s)}}function Gn(e,t,n,r,i,s){const a=je(n,t),u=e.array[a];if(u===void 0)return s.val=!0,{type:U,size:e.size+1,array:L(e.array,a,{type:O,k:r,v:i})};if(u.type===O)return V(r,u.k)?i===u.v?e:{type:U,size:e.size,array:L(e.array,a,{type:O,k:r,v:i})}:(s.val=!0,{type:U,size:e.size,array:L(e.array,a,on(t+Y,u.k,u.v,n,r,i))});const c=ze(u,t+Y,n,r,i,s);return c===u?e:{type:U,size:e.size,array:L(e.array,a,c)}}function jt(e,t,n,r,i,s){const a=He(n,t),u=Tt(e.bitmap,a);if((e.bitmap&a)!==0){const c=e.array[u];if(c.type!==O){const o=ze(c,t+Y,n,r,i,s);return o===c?e:{type:N,bitmap:e.bitmap,array:L(e.array,u,o)}}const f=c.k;return V(r,f)?i===c.v?e:{type:N,bitmap:e.bitmap,array:L(e.array,u,{type:O,k:r,v:i})}:(s.val=!0,{type:N,bitmap:e.bitmap,array:L(e.array,u,on(t+Y,f,c.v,n,r,i))})}else{const c=e.array.length;if(c>=Hn){const f=new Array(32),o=je(n,t);f[o]=jt(Et,t+Y,n,r,i,s);let p=0,h=e.bitmap;for(let g=0;g<32;g++){if((h&1)!==0){const w=e.array[p++];f[g]=w}h=h>>>1}return{type:U,size:c+1,array:f}}else{const f=Zn(e.array,u,{type:O,k:r,v:i});return s.val=!0,{type:N,bitmap:e.bitmap|a,array:f}}}}function Jn(e,t,n,r,i,s){if(n===e.hash){const a=zt(e,r);if(a!==-1)return e.array[a].v===i?e:{type:ie,hash:n,array:L(e.array,a,{type:O,k:r,v:i})};const u=e.array.length;return s.val=!0,{type:ie,hash:n,array:L(e.array,u,{type:O,k:r,v:i})}}return ze({type:N,bitmap:He(e.hash,t),array:[e]},t,n,r,i,s)}function zt(e,t){const n=e.array.length;for(let r=0;r<n;r++)if(V(t,e.array[r].k))return r;return-1}function De(e,t,n,r){switch(e.type){case U:return Qn(e,t,n,r);case N:return er(e,t,n,r);case ie:return tr(e,r)}}function Qn(e,t,n,r){const i=je(n,t),s=e.array[i];if(s!==void 0){if(s.type!==O)return De(s,t+Y,n,r);if(V(r,s.k))return s}}function er(e,t,n,r){const i=He(n,t);if((e.bitmap&i)===0)return;const s=Tt(e.bitmap,i),a=e.array[s];if(a.type!==O)return De(a,t+Y,n,r);if(V(r,a.k))return a}function tr(e,t){const n=zt(e,t);if(!(n<0))return e.array[n]}function Ot(e,t,n,r){switch(e.type){case U:return nr(e,t,n,r);case N:return rr(e,t,n,r);case ie:return ir(e,r)}}function nr(e,t,n,r){const i=je(n,t),s=e.array[i];if(s===void 0)return e;let a;if(s.type===O){if(!V(s.k,r))return e}else if(a=Ot(s,t+Y,n,r),a===s)return e;if(a===void 0){if(e.size<=Vn){const u=e.array,c=new Array(e.size-1);let f=0,o=0,p=0;for(;f<i;){const h=u[f];h!==void 0&&(c[o]=h,p|=1<<f,++o),++f}for(++f;f<u.length;){const h=u[f];h!==void 0&&(c[o]=h,p|=1<<f,++o),++f}return{type:N,bitmap:p,array:c}}return{type:U,size:e.size-1,array:L(e.array,i,a)}}return{type:U,size:e.size,array:L(e.array,i,a)}}function rr(e,t,n,r){const i=He(n,t);if((e.bitmap&i)===0)return e;const s=Tt(e.bitmap,i),a=e.array[s];if(a.type!==O){const u=Ot(a,t+Y,n,r);return u===a?e:u!==void 0?{type:N,bitmap:e.bitmap,array:L(e.array,s,u)}:e.bitmap===i?void 0:{type:N,bitmap:e.bitmap^i,array:st(e.array,s)}}return V(r,a.k)?e.bitmap===i?void 0:{type:N,bitmap:e.bitmap^i,array:st(e.array,s)}:e}function ir(e,t){const n=zt(e,t);if(n<0)return e;if(e.array.length!==1)return{type:ie,hash:e.hash,array:st(e.array,n)}}function _n(e,t){if(e===void 0)return;const n=e.array,r=n.length;for(let i=0;i<r;i++){const s=n[i];if(s!==void 0){if(s.type===O){t(s.v,s.k);continue}_n(s,t)}}}class W{static fromObject(t){const n=Object.keys(t);let r=W.new();for(let i=0;i<n.length;i++){const s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=W.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new W(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;const r=De(this.root,0,q(t),t);return r===void 0?n:r.v}set(t,n){const r={val:!1},i=this.root===void 0?Et:this.root,s=ze(i,0,q(t),t,n,r);return s===this.root?this:new W(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;const n=Ot(this.root,0,q(t),t);return n===this.root?this:n===void 0?W.new():new W(n,this.size-1)}has(t){return this.root===void 0?!1:De(this.root,0,q(t),t)!==void 0}entries(){if(this.root===void 0)return[];const t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){_n(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+it(q(n),q(r))|0}),t}equals(t){if(!(t instanceof W)||this.size!==t.size)return!1;try{return this.forEach((n,r)=>{if(!V(t.get(r,!n),n))throw Yt}),!0}catch(n){if(n===Yt)return!1;throw n}}}const Yt=Symbol();class j extends _{}class $e extends _{}function oe(e,t){for(;;){let n=e,r=t;if(n instanceof d)return r;{let i=n.head;e=n.tail,t=y(i,r)}}}function z(e){return oe(e,l([]))}function sr(e){if(e instanceof d)return new J(void 0);{let t=e.head;return new $(t)}}function ar(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof d)return z(s);{let a=r.head,u=r.tail,c,f=i(a);if(f instanceof $){let p=f[0];c=y(p,s)}else c=s;let o=c;e=u,t=i,n=o}}}function ur(e,t){return ar(e,t,l([]))}function cr(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof d)return z(s);{let a=r.head;e=r.tail,t=i,n=y(i(a),s)}}}function he(e,t){return cr(e,t,l([]))}function fr(e,t,n,r){for(;;){let i=e,s=t,a=n,u=r;if(i instanceof d)return z(u);{let c=i.head,f=i.tail,o=y(s(c,a),u);e=f,t=s,n=a+1,r=o}}}function pn(e,t){return fr(e,t,0,l([]))}function lr(e,t){for(;;){let n=e,r=t;if(n instanceof d)return z(r);{let i=n.head;e=n.tail,t=oe(i,r)}}}function or(e){return lr(e,l([]))}function _r(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof d)return i;{let a=r.head;e=r.tail,t=s(i,a),n=s}}}function Xt(e,t){for(;;){let n=e,r=t;if(n instanceof d)return new J(void 0);{let i=n.head,s=n.tail;if(r(i))return new $(i);e=s,t=r}}}function pr(e,t,n,r,i,s){for(;;){let a=e,u=t,c=n,f=r,o=i,p=s,h=y(o,c);if(a instanceof d)return f instanceof j?y(z(h),p):y(h,p);{let g=a.head,w=a.tail,v=u(o,g);if(f instanceof j)if(v instanceof I)e=w,t=u,n=h,r=f,i=g,s=p;else if(v instanceof R)e=w,t=u,n=h,r=f,i=g,s=p;else{let A;f instanceof j?A=y(z(h),p):A=y(h,p);let P=A;if(w instanceof d)return y(l([g]),P);{let B=w.head,M=w.tail,S,K=u(g,B);K instanceof I?S=new j:K instanceof R?S=new j:S=new $e;let Q=S;e=M,t=u,n=l([g]),r=Q,i=B,s=P}}else if(v instanceof I){let A;f instanceof j?A=y(z(h),p):A=y(h,p);let P=A;if(w instanceof d)return y(l([g]),P);{let B=w.head,M=w.tail,S,K=u(g,B);K instanceof I?S=new j:K instanceof R?S=new j:S=new $e;let Q=S;e=M,t=u,n=l([g]),r=Q,i=B,s=P}}else if(v instanceof R){let A;f instanceof j?A=y(z(h),p):A=y(h,p);let P=A;if(w instanceof d)return y(l([g]),P);{let B=w.head,M=w.tail,S,K=u(g,B);K instanceof I?S=new j:K instanceof R?S=new j:S=new $e;let Q=S;e=M,t=u,n=l([g]),r=Q,i=B,s=P}}else e=w,t=u,n=h,r=f,i=g,s=p}}}function hr(e,t,n,r){for(;;){let i=e,s=t,a=n,u=r;if(i instanceof d)return oe(s,u);if(s instanceof d)return oe(i,u);{let c=i.head,f=i.tail,o=s.head,p=s.tail,h=a(c,o);h instanceof I?(e=f,t=s,n=a,r=y(c,u)):(h instanceof R,e=i,t=p,n=a,r=y(o,u))}}}function wr(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof d)return z(s);{let a=r.tail;if(a instanceof d){let u=r.head;return z(y(z(u),s))}else{let u=r.head,c=a.head,f=a.tail,o=hr(u,c,i,l([]));e=f,t=i,n=y(o,s)}}}}function gr(e,t,n,r){for(;;){let i=e,s=t,a=n,u=r;if(i instanceof d)return oe(s,u);if(s instanceof d)return oe(i,u);{let c=i.head,f=i.tail,o=s.head,p=s.tail,h=a(c,o);h instanceof I?(e=i,t=p,n=a,r=y(o,u)):(h instanceof R,e=f,t=s,n=a,r=y(c,u))}}}function br(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof d)return z(s);{let a=r.tail;if(a instanceof d){let u=r.head;return z(y(z(u),s))}else{let u=r.head,c=a.head,f=a.tail,o=gr(u,c,i,l([]));e=f,t=i,n=y(o,s)}}}}function dr(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof d)return r;if(i instanceof j){if(r.tail instanceof d)return r.head;e=wr(r,s,l([])),t=new $e,n=s}else if(r.tail instanceof d){let u=r.head;return z(u)}else e=br(r,s,l([])),t=new j,n=s}}function hn(e,t){if(e instanceof d)return e;{let n=e.tail;if(n instanceof d)return e;{let r=e.head,i=n.head,s=n.tail,a,u=t(r,i);u instanceof I?a=new j:u instanceof R?a=new j:a=new $e;let c=a,f=pr(s,t,l([r]),c,i,l([]));return dr(f,new j,t)}}}function yr(e,t,n){for(;;){let r=e,i=t,s=n,a=bn(r,i);if(a instanceof I)e=r,t=i-1,n=y(i,s);else{if(a instanceof R)return y(i,s);e=r,t=i+1,n=y(i,s)}}}function Pt(e,t){return yr(e,t,l([]))}function wn(e){return e.toString()}function at(e){if(e==="")return 0;const t=gn(e);if(t){let n=0;for(const r of t)n++;return n}else return e.match(/./gsu).length}function $r(e){const t=gn(e);return t?le.fromArray(Array.from(t).map(n=>n.segment)):le.fromArray(e.match(/./gsu))}let Wt;function gn(e){if(globalThis.Intl&&Intl.Segmenter)return Wt||=new Intl.Segmenter,Wt.segment(e)[Symbol.iterator]()}function xr(e){return Math.ceil(e)}function kr(e){return Math.floor(e)}function Ht(e){return Math.round(e)}function vr(e,t){return Math.pow(e,t)}function Pe(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function Sr(e,t){return e===t?new R:e<t?new I:new vt}function Ke(e,t){return e<t?e:t}function Ar(e,t){return e>t?e:t}function Er(e,t,n){let i=Ke(e,n);return Ar(i,t)}function Fe(e){return e>=0?e:0-e}function Tr(e,t){let n=xr(t)-t>0;return e<0&&n||e===0&&t<0?new J(void 0):new $(vr(e,t))}function jr(e){return Tr(e,.5)}function Ue(e){return-1*e}function Vt(e){return e>=0?Ht(e):0-Ht(Ue(e))}function zr(e,t){for(;;){let n=e,r=t;if(n instanceof d)return r;{let i=n.head;e=n.tail,t=i+r}}}function Or(e){return zr(e,0)}function mt(e,t){if(t===0)return new J(void 0);{let n=t;return new $(D(e,n))}}function Pr(e,t){return e+t}function Zt(e,t){return e*t}function Br(e,t){return e-t}function bn(e,t){return e===t?new R:e<t?new I:new vt}function Mr(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof d)return s;{let a=r.head;e=r.tail,t=i,n=s+i+a}}}function Ir(e,t){if(e instanceof d)return"";{let n=e.head,r=e.tail;return Mr(r,t,n)}}function Cr(e,t){return $r(e)}function Nr(e,t){if(e instanceof $){let n=e[0];return new $(t(n))}else return e}function Be(e,t){if(e instanceof $){let n=e[0];return t(n)}else return e}function qr(e,t){return e instanceof $?e[0]:t}const Gt="src/gleam_community/colour.gleam";class Bt extends _{constructor(t,n,r,i){super(),this.r=t,this.g=n,this.b=r,this.a=i}}class Rr extends _{constructor(t,n,r,i){super(),this.h=t,this.s=n,this.l=r,this.a=i}}function Me(e){return e>1||e<0?new J(void 0):new $(e)}function et(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let i=r,s=i*6,a=i*2,u=i*3;return s<1?t+(n-t)*i*6:a<1?n:u<2?t+(n-t)*(2/3-i)*6:t}function Lr(e,t,n,r){let i;n<=.5?i=n*(t+1):i=n+t-n*t;let a=i,u=n*2-a,c=et(e+1/3,u,a),f=et(e,u,a),o=et(e-1/3,u,a);return[c,f,o,r]}function ut(e,t,n,r){return Be(Me(e),i=>Be(Me(t),s=>Be(Me(n),a=>Be(Me(r),u=>new $(new Rr(i,s,a,u))))))}function ct(e,t,n){return ut(e,t,n,1)}function Dr(e){if(e instanceof Bt){let t=e.r,n=e.g,r=e.b,i=e.a;return[t,n,r,i]}else{let t=e.h,n=e.s,r=e.l,i=e.a;return Lr(t,n,r,i)}}function Jt(e){let t=Dr(e),n,r,i,s;n=t[0],r=t[1],i=t[2],s=t[3];let a=c=>{let f,p=Zt(c,1e4),h=Vt(p),g=h;f=mt(g,100);let w=f,v;if(w instanceof $)v=w[0];else throw C("let_assert",Gt,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:w,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return v},u=c=>{let f,p=Zt(c,1e3),h=Vt(p),g=h;f=mt(g,1e3);let w=f,v;if(w instanceof $)v=w[0];else throw C("let_assert",Gt,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:w,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return v};return Ir(l(["rgba(",Pe(a(n))+"%,",Pe(a(r))+"%,",Pe(a(i))+"%,",Pe(u(s)),")"]),"")}const Kr=new Bt(.9607843137254902,.4745098039215686,0,1),Fr=new Bt(1,1,1,1);function Ur(e){return Math.sin(e)}function Yr(){return Math.PI}function Xr(e,t){return Math.atan2(e,t)}function Wr(e){return Math.cos(e)}function Hr(e,t){return Xr(e,t)}function Vr(e){return Wr(e)}function ke(e){return Ur(e)}function Mt(e,t){let n=e*Vr(t),r=e*ke(t);return[n,r]}function Ye(){return Yr()}function ce(){return 2*Ye()}function mr(){return Math.PI}class dn extends _{}class It extends _{constructor(t,n){super(),this[0]=t,this.closed=n}}class yn extends _{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class Zr extends _{constructor(t,n){super(),this.text=t,this.style=n}}class Gr extends _{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class $n extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ct extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class Jr extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class xn extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ve extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class kn extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class vn extends _{constructor(t){super(),this[0]=t}}class Qr extends _{}class Sn extends _{}class ei extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class ft extends _{constructor(t){super(),this[0]=t}}function lt(e){return new ft(e)}function Nt(){return new dn}function qt(e){return new It(e,!0)}function b(e){return new It(e,!1)}function me(e,t){return qt(l([[0,0],[e,0],[e,t],[0,t]]))}function E(e,t,n){return new xn(e,[t,n])}function Oe(e,t){return E(e,t,0)}function Ze(e,t){return E(e,0,t)}function ti(e,t){return new Ve(e,[t,1])}function ni(e,t){return new Ve(e,[1,t])}function se(e,t){return new Ve(e,[t,t])}function ot(e,t){return new kn(e,t)}function X(e,t){return new $n(e,t)}function An(e,t,n){return new Ct(e,new ei(t,n))}function m(e){return new Ct(e,new Sn)}function x(e){return new vn(e)}function Rt(e){return new yn(e,new ft(0),new ft(2*mr()))}class _t extends _{constructor(t){super(),this[0]=t}}class pt extends _{constructor(t){super(),this[0]=t}}class ht extends _{constructor(t){super(),this[0]=t}}class wt extends _{constructor(t,n){super(),this[0]=t,this[1]=n}}class gt extends _{constructor(t){super(),this[0]=t}}class ri extends _{constructor(t){super(),this[0]=t}}class Ce extends _{}class Ne extends _{}class ii extends _{}class si extends _{}class ai extends _{}class ui extends _{}class ci extends _{}class fi extends _{}class li extends _{}class oi extends _{}class _i extends _{}class pi extends _{}class hi extends _{}class bt extends _{}class wi extends _{}class qe extends _{}class gi extends _{}class bi extends _{}function di(e){return document.querySelector(e).getContext("2d")}function En(e){window.requestAnimationFrame(t=>{e(t)})}function tt(e,t){window.addEventListener(e,t)}function yi(e){return e.keyCode}function ae(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function ue(e){return window.PAINT_STATE?e in window.PAINT_STATE?new $(window.PAINT_STATE[e]):new J(void 0):new J(void 0)}function $i(e){return e.canvas.clientWidth}function xi(e){return e.canvas.clientHeight}function ki(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,i=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*i]}function vi(e,t,n,r){let i=In(t)?Cn(t).buttons:0,s=e.buttons;return r?i=~i:s=~s,!!(i&s&1<<n)}function Si(e){e.reset()}function Ai(e,t,n,r,i,s){e.beginPath(),e.arc(0,0,t,n,r),i&&e.fill(),s&&e.stroke()}function Ei(e,t,n,r,i){e.beginPath(),e.moveTo(0,0);let s=!1;for(const a of t){let u=a[0],c=a[1];s?e.lineTo(u,c):(e.moveTo(u,c),s=!0)}n&&e.closePath(),r&&n&&e.fill(),i&&e.stroke()}function Ti(e,t,n){e.font=n,e.fillText(t,0,0)}function ee(e){e.save()}function te(e){e.restore()}function ji(e,t){e.fillStyle=t}function zi(e,t){e.strokeStyle=t}function Oi(e,t){e.lineWidth=t}function Pi(e,t,n){e.translate(t,n)}function Bi(e,t,n){e.scale(t,n)}function Mi(e,t){e.rotate(t)}function Ii(e,t,n,r){e.drawImage(t,0,0,n,r)}function Ci(e,t){e.imageSmoothingEnabled=t}const xe="src/paint/canvas.gleam";class Ni extends _{constructor(t,n){super(),this.width=t,this.height=n}}class Re extends _{constructor(t,n){super(),this.fill=t,this.stroke=n}}function Z(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof dn)return;if(r instanceof It){let a=r[0],u=r.closed;return Ei(i,a,u,s.fill,s.stroke)}else if(r instanceof yn){let a=r.radius,u=r.start,c=r.end,f;f=u[0];let o;return o=c[0],Ai(i,a,f,o,s.fill,s.stroke)}else if(r instanceof Zr){let a=r.text,u=r.style,c,f;return c=u.size_px,f=u.font_family,ee(i),Ti(i,a,wn(c)+"px "+f),te(i)}else if(r instanceof Gr){let a=r.width_px,u=r.height_px,c=r[0].id,f=ue(c),o;if(f instanceof $)o=f[0];else throw C("let_assert",xe,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:f,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return Ii(i,o,a,u)}else if(r instanceof $n){let a=r[0],u=r[1];return ee(i),ji(i,Jt(u)),Z(a,i,new Re(!0,s.stroke)),te(i)}else if(r instanceof Ct){let a=r[0],u=r[1];if(u instanceof Sn)e=a,t=i,n=new Re(s.fill,!1);else{let c=u[0],f=u[1];return ee(i),zi(i,Jt(c)),Oi(i,f),Z(a,i,new Re(s.fill,!0)),te(i)}}else if(r instanceof Jr){let a=r[0],u=r[1];return ee(i),Ci(i,u instanceof Qr),Z(a,i,s),te(i)}else if(r instanceof xn){let a=r[0],u=r[1],c,f;return c=u[0],f=u[1],ee(i),Pi(i,c,f),Z(a,i,s),te(i)}else if(r instanceof Ve){let a=r[0],u=r[1],c,f;return c=u[0],f=u[1],ee(i),Bi(i,c,f),Z(a,i,s),te(i)}else if(r instanceof kn){let a=r[0],u=r[1],c;return c=u[0],ee(i),Mi(i,c),Z(a,i,s),te(i)}else{let a=r[0];if(a instanceof d)return;{let u=a.head,c=a.tail;Z(u,i,s),e=new vn(c),t=i,n=s}}}}function qi(e){return e===32?new T(new ai):e===37?new T(new Ce):e===38?new T(new ii):e===39?new T(new Ne):e===40?new T(new si):e===87?new T(new ui):e===65?new T(new ci):e===83?new T(new fi):e===68?new T(new li):e===90?new T(new oi):e===88?new T(new _i):e===67?new T(new pi):e===18?new T(new hi):e===27?new T(new bt):e===8?new T(new wi):new fn}const Ri=new Re(!1,!0);function Tn(e,t,n,r){return i=>{let s=ue(r),a;if(s instanceof $)a=s[0];else throw C("let_assert",xe,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:s,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let u=n(a,new _t(i));ae(u,r);let c=t(u);return Si(e),Z(c,e,Ri),En(Tn(e,t,n,r))}}function Li(e,t,n,r){let i=di(r),s=e(new Ni($i(i),xi(i)));ae(s,r);let a=(c,f)=>tt(c,o=>{let p=qi(yi(o));if(p instanceof T){let h=p[0],g=ue(r),w;if(g instanceof $)w=g[0];else throw C("let_assert",xe,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:g,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let v=t(w,f(h));return ae(v,r)}else return});a("keydown",c=>new pt(c)),a("keyup",c=>new ht(c)),tt("mousemove",c=>{let f=ki(i,c),o,p;o=f[0],p=f[1];let h=ue(r),g;if(h instanceof $)g=h[0];else throw C("let_assert",xe,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:h,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let w=t(g,new wt(o,p));ae(w,r)});let u=(c,f,o)=>tt(c,p=>{let h="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,g=ue(h);ae(p,h);let w=M=>vi(p,g,M,o),v=M=>{let S=ue(r),K;if(S instanceof $)K=S[0];else throw C("let_assert",xe,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:S,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let Q=t(K,f(M));return ae(Q,r)};w(0)&&v(new qe),w(1)&&v(new gi),w(2)&&v(new bi)});return u("mousedown",c=>new gt(c),!0),u("mouseup",c=>new ri(c),!1),En(Tn(i,n,t,r))}class F extends _{constructor(t,n){super(),this.x=t,this.y=n}}function Di(e){return l([e.x,e.y])}function jn(e,t,n){return new F(n(e.x,t.x),n(e.y,t.y))}const Ki="src/vec/vec2f.gleam";function Fi(e,t){return jn(e,t,Pr)}function Ui(e){let n=Di(e),r=he(n,i=>i*i);return Or(r)}function Yi(e,t){let r=jn(e,t,Br);return Ui(r)}function zn(e,t){let n,r=Yi(e,t);n=jr(r);let i=n,s;if(i instanceof $)s=i[0];else throw C("let_assert",Ki,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:i,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return s}const Xi=e=>{window.open(e,"_blank")},_e=300,pe=300,fe=new F(150,150),Wi=.01,Hi=5e-6,Vi=5,Le=.7853981634,Ge=12,dt=3,Qt=2e3;function ge(e,t){let n;if(e==="a")n=b(l([[3,1],[11,1],[11,11],[1,11],[1,5],[11,5]]));else if(e==="b")n=b(l([[1,3],[11,3],[11,11],[1,11],[1,-1]]));else if(e==="c")n=b(l([[11,11],[1,11],[1,1],[11,1],[11,3]]));else if(e==="d"){let i=ge("b",t),s=ti(i,-1);n=Oe(s,12)}else if(e==="e")n=b(l([[9,11],[1,11],[1,1],[11,1],[11,7],[1,7]]));else if(e==="f")n=x(l([b(l([[0,5],[11,5]])),b(l([[5,12],[5,-1],[12,-1]]))]));else if(e==="g")n=x(l([b(l([[0,1],[10,1],[10,7],[1,7],[1,1]])),b(l([[3,7],[3,11],[11,11],[11,13]]))]));else if(e==="i")n=x(l([b(l([[6,-2],[6,0]])),b(l([[2,3],[6,3],[6,11]])),b(l([[0,11],[12,11]]))]));else if(e==="j")n=x(l([b(l([[11,-2],[11,0]])),b(l([[11,2],[11,11],[1,11],[1,9]]))]));else if(e==="k")n=x(l([b(l([[1,0],[1,12]])),b(l([[1,6],[11,6],[11,12]])),b(l([[11,0],[11,1],[6,6],[5,6]]))]));else if(e==="l")n=b(l([[12,11],[1,11],[1,0]]));else if(e==="m")n=x(l([b(l([[1,12],[1,1],[11,1],[11,12]])),b(l([[6,1],[6,12]]))]));else if(e==="n")n=b(l([[1,12],[1,1],[9,1],[9,3],[11,3],[11,12]]));else if(e==="o")n=b(l([[0,1],[11,1],[11,11],[1,11],[1,1]]));else if(e==="r")n=b(l([[1,12],[1,1],[11,1],[11,3]]));else if(e==="s")n=b(l([[11,1],[2,1],[2,6],[11,6],[11,11],[1,11],[1,9]]));else if(e==="t")n=x(l([b(l([[0,2],[12,2]])),b(l([[5,-1],[5,11],[12,11]]))]));else if(e==="u")n=b(l([[11,0],[11,11],[1,11],[1,0]]));else if(e==="v")n=b(l([[11,0],[11,11],[4,11],[1,8],[1,0]]));else if(e==="y")n=x(l([b(l([[11,0],[11,13],[1,13]])),b(l([[11,9],[1,9],[1,0]]))]));else if(e==="0")n=x(l([b(l([[0,1],[11,1],[11,11],[1,11],[1,1]])),b(l([[5,6],[7,6]]))]));else if(e==="1")n=x(l([b(l([[6,0],[6,11]])),b(l([[0,11],[12,11]])),b(l([[1,3],[6,3]]))]));else if(e==="2")n=b(l([[1,3],[1,1],[11,1],[11,7],[1,7],[1,11],[12,11]]));else if(e==="3")n=x(l([b(l([[1,3],[1,1],[11,1],[11,11],[1,11],[1,9]])),b(l([[5,6],[11,6]]))]));else if(e==="4")n=x(l([b(l([[11,7],[1,7],[1,0]])),b(l([[11,0],[11,12]]))]));else if(e==="5"){let i=ge("2",t),s=ni(i,-1);n=Ze(s,12)}else if(e==="6")n=b(l([[1,5],[11,5],[11,11],[1,11],[1,1],[12,1]]));else if(e==="7")n=b(l([[0,1],[11,1],[11,3],[7,7],[7,12]]));else if(e==="8")n=x(l([b(l([[2,6],[2,1],[10,1],[10,6]])),b(l([[0,6],[11,6],[11,11],[1,11],[1,6]]))]));else if(e==="9"){let i=ge("6",t),s=ot(i,lt(Ye()));n=E(s,12,12)}else if(e==="←")n=x(l([b(l([[6,11],[5,11],[1,7],[1,5],[5,1],[6,1]])),b(l([[1,6],[12,6]]))]));else if(e==="→"){let i=ge("←",t),s=ot(i,lt(Ye()));n=E(s,12,12)}else n=Nt();return An(n,t,2)}function mi(e,t,n){let r=ke(t/400)*.1,i=ke(t/1600)*6,s=ge(e,n),a=X(s,n),u=m(a),c=E(u,-6,-6),f=ot(c,lt(r));return E(f,6,6+i)}function ve(e,t,n){let r=Cr(e),i=pn(r,(s,a)=>{let u=mi(s,t+a*8e3,n);return Oe(u,a*(Ge+dt))});return x(i)}function Se(e,t){let n=at(e);return((Ge+dt)*n-dt)*t}const be="src/app.gleam";class k extends _{constructor(t,n,r,i,s,a,u,c,f,o,p){super(),this.avatar=t,this.rotation_force=n,this.objects=r,this.mouse=i,this.keyboard=s,this.drag=a,this.current_time=u,this.prev_tick_time=c,this.paused=f,this.press_regions=o,this.consts=p}}class re extends _{constructor(t,n){super(),this.pos=t,this.dir=n}}let On=class extends _{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class Ae extends _{}class Zi extends _{constructor(t){super(),this.collected_time=t}}class de extends _{constructor(t,n){super(),this.pos=t,this.prev_pos=n}}class ne extends _{constructor(t,n){super(),this.left=t,this.right=n}}class H extends _{}class Ee extends _{constructor(t,n){super(),this.start_pos=t,this.start_avatar_dir=n}}class Gi extends _{constructor(t,n){super(),this.force=t,this.released_time=n}}class G extends _{}class yt extends _{}class Pn extends _{constructor(t,n,r,i,s){super(),this.x=t,this.y=n,this.width=r,this.height=i,this.on_press=s}}class Ji extends _{constructor(t,n,r,i,s,a,u,c){super(),this.background_picture=t,this.shadow_picture=n,this.color_dark_blue=r,this.color_white=i,this.color_white_transparent=s,this.color_yellow=a,this.color_orange=u,this.color_dark_blue_transparent=c}}function Qi(e){let t,n=e.objects;t=he(n,i=>V(i.kind,new Ae)&&zn(e.avatar.pos,i.pos)<.8?new On(i.pos,i.height,new Zi(e.current_time)):i);let r=t;return new k(e.avatar,e.rotation_force,r,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}function ye(e,t){return new k(e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new H,e.current_time,e.prev_tick_time,t,e.press_regions,e.consts)}function $t(e){return e instanceof G?new yt:new G}function es(e){let t=e.current_time-e.prev_tick_time,n=Wi*t,r=Mt(n,e.avatar.dir),i,s;return i=r[0],s=r[1],new k((()=>{let a=e.avatar;return new re(Fi(e.avatar.pos,new F(i,s)),a.dir)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}function en(e,t){let n=e.current_time-e.prev_tick_time,r=t*n*Hi,i=Er(e.rotation_force+r,-2,2);return As(i,void 0,"src/app.gleam",317),new k(e.avatar,i,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}function ts(e){if(Fe(e.rotation_force)>1e-8){let n=e.current_time-e.prev_tick_time,r=e.rotation_force*n,i=Ke(1,1-D(1,n*Vi)),s=e.rotation_force*i;return new k((()=>{let a=e.avatar;return new re(a.pos,e.avatar.dir+r)})(),s,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else return e}function ns(e){let t=e.drag;if(t instanceof H)return e;if(t instanceof Ee){let n=e.mouse.pos.x-e.mouse.prev_pos.x,r=e.current_time-e.prev_tick_time,i=D(n,r);return Fe(i)>.01?new k(e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new Gi(i,e.current_time),e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts):new k(e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new H,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else return e}function rs(e,t){let n="cielos",r=1.5,i=Se(n,r),s="by agj",a=.75,u=Se(s,a),c=x(l([(()=>{let f=ve(n,e,t.color_dark_blue);return se(f,r)})(),(()=>{let f=ve(s,e,t.color_dark_blue),o=se(f,a);return E(o,i-u,40)})()]));return Oe(c,_e*.5-i*.5)}function is(e,t,n){let r=l(["←→ drag or keys to turn","collect "+wn(t)+" stars"]),i=.75,s,u=hn(r,(g,w)=>cn(bn(at(g),at(w)))),c=sr(u),f=Nr(c,g=>Se(g,i));s=qr(f,0);let o=s,p=x(pn(r,(w,v)=>{let A=ve(w,e,n.color_dark_blue);return Ze(A,Ge*2.5*v)})),h=se(p,i);return Oe(h,_e*.5-o*.5)}function ss(){return new Pn(0,pe-30,30,30,e=>ye(e,$t(e.paused)))}function tn(e,t,n){let r=qt((()=>{let s=Pt(0,10);return he(s,a=>{let u=ce()/10*a+n,c;return a%2===0?c=250:c=140,Mt(c,u)})})()),i=X(r,e);return An(i,t,10)}function nn(e,t,n){let r=e/2e3;if(n instanceof T){let i=n[0];if(e-i<=1e3){let s=Rt(1e3),a=X(s,t.color_white);return m(a)}else return tn(t.color_white,t.color_yellow,r)}else return tn(t.color_yellow,t.color_orange,r)}function rn(e,t){let n;t?n=e.color_white:n=e.color_yellow;let r=n,i=Rt(1),s=X(i,r);return m(s)}function as(e,t,n,r){if(n)return e instanceof Ae?rn(r,!1):rn(r,!0);if(e instanceof Ae)return nn(t,r,new fn);{let i=e.collected_time;return nn(t,r,new T(i))}}function us(e){let t=me(200,5e3),n=Oe(t,-100),r=X(n,e);return m(r)}function cs(e){let t=me(4,12),n=x(l([t,E(t,8,0)])),r=X(n,e);return m(r)}function fs(e){let t=qt(l([[2,0],[11,6],[2,12]])),n=X(t,e);return m(n)}function ls(e,t,n){return x(l([(()=>{let r=Rt(15),i=X(r,n.color_white_transparent);return m(i)})(),(()=>{if(e instanceof G){let r="esc",i=.5,s,a=ve(r,t,n.color_white_transparent);s=se(a,i);let u=s;return x(l([(()=>{let c=fs(n.color_dark_blue);return E(c,-6,-6)})(),E(u,Se(r,i)*-.5,-27)]))}else{let r=cs(n.color_dark_blue);return E(r,-6,-6)}})()]))}function os(e){return D(1,D(e,.2)+1)}function _s(e,t){let n=Mt(e,t),r,i;return r=n[0],i=n[1],new F(r,i)}function xt(e,t,n,r){return Hr(r-t,n-e)}function ps(e,t,n,r,i){let s=xt(0,0,n,e.height),a=n>50,u;a?u=1:u=os(n);let c=u,f=new F(D(t*fe.x,Le),Ue(D(s*fe.x,Le))),o,p=as(e.kind,r,a,i),h=se(p,c);o=E(h,f.x,f.y);let g=o,w;if(a)w=Nt();else{let P=xt(0,0,n,-10),B=new F(f.x,Ue(D(P*fe.x,Le))),M=i.shadow_picture,S=se(M,c);w=E(S,B.x,B.y)}return x(l([w,g]))}function hs(e){for(;;){let t=e,n=ce(),r=Ye(),i=Ue(r),s=t;if(s>r)e=s-n;else{let a=t;if(a<=i)e=a+n;else return t}}}function Ie(e){return e*.005}function nt(e,t,n){return(t-e)*n+e}function sn(e,t,n,r,i,s,a,u,c){let f=c,o=kr(D(u,f)),p=Pt(0,c),h=he(p,g=>{let w=g,v=D(w,f-1),A=ct(nt(e,r,v),nt(t,i,v),nt(n,s,v)),P;if(A instanceof $)P=A[0];else throw C("let_assert",be,"app",787,"view_gradient","Pattern match failed, no pattern matched the value.",{value:A,start:20484,end:20711,pattern_start:20495,pattern_end:20507});let B=me(a,o),M=Ze(B,o*w),S=X(M,P);return m(S)});return x(h)}function ws(){let e=l([sn(.85,.6,.9,.7,.4,.98,_e,pe/2,50),(()=>{let t=sn(.6,.4,.95,.6,.7,.8,_e,pe/2,50);return Ze(t,fe.y)})()]);return x(e)}function an(e){return ke(e*(ce()/4))}function gs(e){let t=e.keyboard,n=e.drag;if(t.left)if(t.right){if(n instanceof H)return e;if(n instanceof Ee){let s=n.start_pos,a=n.start_avatar_dir,u=Ie(e.mouse.pos.x-s.x);return new k((()=>{let c=e.avatar;return new re(c.pos,a-u)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else{let s=n.force,a=n.released_time,u=e.current_time-a,c=Ke(1,D(u,Qt));if(c>=1)return new k(e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new H,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts);{let o=1-an(c),p=e.current_time-e.prev_tick_time,h=Ie(p*s)*o;return new k((()=>{let g=e.avatar;return new re(g.pos,e.avatar.dir-h)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}}}else return en(e,-1);else{if(t.right)return en(e,1);if(n instanceof H)return e;if(n instanceof Ee){let s=n.start_pos,a=n.start_avatar_dir,u=Ie(e.mouse.pos.x-s.x);return new k((()=>{let c=e.avatar;return new re(c.pos,a-u)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else{let s=n.force,a=n.released_time,u=e.current_time-a,c=Ke(1,D(u,Qt));if(c>=1)return new k(e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new H,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts);{let o=1-an(c),p=e.current_time-e.prev_tick_time,h=Ie(p*s)*o;return new k((()=>{let g=e.avatar;return new re(g.pos,e.avatar.dir-h)})(),e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}}}}function bs(e,t){if(e.paused instanceof G)if(t instanceof _t){let r=t[0];return new k(e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,new H,r,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else{if(t instanceof pt)return t[0]instanceof bt?ye(e,$t(e.paused)):e;if(t instanceof ht){let r=t[0];return r instanceof Ce?new k(e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let i=e.keyboard;return new ne(!1,i.right)})(),e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts):r instanceof Ne?new k(e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let i=e.keyboard;return new ne(i.left,!1)})(),e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts):e}else if(t instanceof wt){let r=t[0],i=t[1];return new k(e.avatar,e.rotation_force,e.objects,new de(new F(r,i),e.mouse.pos),e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else if(t instanceof gt)if(t[0]instanceof qe){let i,s=e.press_regions;i=Xt(s,u=>e.mouse.pos.x>=u.x&&e.mouse.pos.x<u.x+u.width&&e.mouse.pos.y>=u.y&&e.mouse.pos.y<u.y+u.height);let a=i;return a instanceof $?a[0].on_press(e):e.paused instanceof G?ye(e,new yt):new k(e.avatar,e.rotation_force,e.objects,(()=>{let c=e.mouse;return new de(c.pos,e.mouse.pos)})(),e.keyboard,new Ee(e.mouse.pos,e.avatar.dir),e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else return e;else return e}else if(t instanceof _t){let r=t[0],i=new k(e.avatar,e.rotation_force,e.objects,e.mouse,e.keyboard,e.drag,r,e.current_time,e.paused,e.press_regions,e.consts),s=es(i),a=gs(s),u=ts(a);return Qi(u)}else if(t instanceof pt){let r=t[0];return r instanceof Ce?new k(e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let i=e.keyboard;return new ne(!0,i.right)})(),e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts):r instanceof Ne?new k(e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let i=e.keyboard;return new ne(i.left,!0)})(),e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts):r instanceof bt?ye(e,$t(e.paused)):e}else if(t instanceof ht){let r=t[0];return r instanceof Ce?new k(e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let i=e.keyboard;return new ne(!1,i.right)})(),e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts):r instanceof Ne?new k(e.avatar,e.rotation_force,e.objects,e.mouse,(()=>{let i=e.keyboard;return new ne(i.left,!1)})(),e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts):e}else if(t instanceof wt){let r=t[0],i=t[1];return new k(e.avatar,e.rotation_force,e.objects,new de(new F(r,i),e.mouse.pos),e.keyboard,e.drag,e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else if(t instanceof gt)if(t[0]instanceof qe){let i,s=e.press_regions;i=Xt(s,u=>e.mouse.pos.x>=u.x&&e.mouse.pos.x<u.x+u.width&&e.mouse.pos.y>=u.y&&e.mouse.pos.y<u.y+u.height);let a=i;return a instanceof $?a[0].on_press(e):e.paused instanceof G?ye(e,new yt):new k(e.avatar,e.rotation_force,e.objects,(()=>{let c=e.mouse;return new de(c.pos,e.mouse.pos)})(),e.keyboard,new Ee(e.mouse.pos,e.avatar.dir),e.current_time,e.prev_tick_time,e.paused,e.press_regions,e.consts)}else return e;else return t[0]instanceof qe?ns(e):e}const Te=60,Xe=20;function ds(){return l([new Pn(_e-Te-2,pe-Xe-2,Te,Xe,e=>(Xi("https://github.com/agj/cielos"),e))])}function ys(e){let t=.8*ce(),n=ut(0,1,1,.5),r;if(n instanceof $)r=n[0];else throw C("let_assert",be,"app",25,"init","Pattern match failed, no pattern matched the value.",{value:n,start:533,end:610,pattern_start:544,pattern_end:571});let i=ct(.6,.7,.7),s;if(i instanceof $)s=i[0];else throw C("let_assert",be,"app",26,"init","Pattern match failed, no pattern matched the value.",{value:i,start:613,end:676,pattern_start:624,pattern_end:643});let a=ut(.75,.5,.4,.05),u;if(a instanceof $)u=a[0];else throw C("let_assert",be,"app",27,"init","Pattern match failed, no pattern matched the value.",{value:a,start:679,end:766,pattern_start:690,pattern_end:721});let c=ct(.12,1,.7),f;if(c instanceof $)f=c[0];else throw C("let_assert",be,"app",29,"init","Pattern match failed, no pattern matched the value.",{value:c,start:769,end:830,pattern_start:780,pattern_end:796});let o,p=Pt(0,200);o=he(p,g=>{let w=g,v=_s((w+1)*2+10,w/20*ce()),A=ke(w/5*ce());return new On(v,A,new Ae)});let h=o;return new k(new re(new F(0,0),t),0,h,new de(new F(0,0),new F(0,0)),new ne(!1,!1),new H,0,0,new G,or(l([l([ss()]),ds()])),new Ji(ws(),us(u),s,Fr,r,f,Kr,u))}function $s(e,t,n){let r=.5,i=Se(e,r),s=x(l([me(Te,20),(()=>{let u=ve(e,t,n.color_dark_blue),c=se(u,r);return E(c,Te*.5-i*.5,Xe*.5-Ge*r*.5)})()])),a=X(s,n.color_white_transparent);return m(a)}function xs(e,t){let n=$s("about",e,t);return E(n,_e-Te-2,pe-Xe-2)}function ks(e){return x(l([(()=>{if(e.paused instanceof G){let n,r=e.objects;n=_r(r,0,(s,a)=>a.kind instanceof Ae?s+1:s);let i=n;return x(l([(()=>{let s=rs(e.current_time,e.consts);return E(s,0,80)})(),(()=>{let s=is(e.current_time,i,e.consts);return E(s,0,200)})(),xs(e.current_time,e.consts)]))}else return Nt()})(),(()=>{let t=ls(e.paused,e.current_time,e.consts);return E(t,17,pe-17)})()]))}function vs(e){let t=e.avatar,n,r=x((()=>{let s=e.objects,a=ur(s,c=>{let f=xt(t.pos.x,t.pos.y,c.pos.x,c.pos.y),o=hs(f-t.dir),p=Fe(zn(t.pos,c.pos));return Fe(o)<=Le?new $([c,o,p]):new J(void 0)}),u=hn(a,(c,f)=>cn(Sr(c[2],f[2])));return he(u,c=>ps(c[0],c[1],c[2],e.current_time,e.consts))})());n=E(r,fe.x,fe.y);let i=n;return x(l([e.consts.background_picture,i,ks(e)]))}function Ss(){return Li(ys,bs,vs,"#app")}function As(e,t,n,r){const i="\x1B[90m",s="\x1B[39m",a=`${n}:${r}`,c=new Es().inspect(e),f="";if(globalThis.process?.stderr?.write){const o=`${i}${a}${s}${f}
${c}
`;globalThis.process.stderr.write(o)}else if(globalThis.Deno){const o=`${i}${a}${s}${f}
${c}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(o))}else{const o=`${a}${f}
${c}`;globalThis.console.log(o)}return e}class Es{#e=new globalThis.Set;#t(t){try{return t instanceof W}catch{return!1}}#n(t){const n=t.toString().replace("+","");if(n.indexOf(".")>=0)return n;{const r=n.indexOf("e");return r>=0?n.slice(0,r)+".0"+n.slice(r):n+".0"}}inspect(t){const n=typeof t;if(t===!0)return"True";if(t===!1)return"False";if(t===null)return"//js(null)";if(t===void 0)return"Nil";if(n==="string")return this.#u(t);if(n==="bigint"||globalThis.Number.isInteger(t))return t.toString();if(n==="number")return this.#n(t);if(t instanceof Mn)return this.#c(t);if(t instanceof un)return this.#f(t);if(t instanceof globalThis.RegExp)return`//js(${t})`;if(t instanceof globalThis.Date)return`//js(Date("${t.toISOString()}"))`;if(t instanceof globalThis.Error)return`//js(${t.toString()})`;if(t instanceof globalThis.Function){const i=[];for(const s of globalThis.Array(t.length).keys())i.push(globalThis.String.fromCharCode(s+97));return`//fn(${i.join(", ")}) { ... }`}if(this.#e.size===this.#e.add(t).size)return"//js(circular reference)";let r;if(globalThis.Array.isArray(t))r=`#(${t.map(i=>this.inspect(i)).join(", ")})`;else if(t instanceof le)r=this.#a(t);else if(t instanceof _)r=this.#s(t);else if(this.#t(t))r=this.#i(t);else{if(t instanceof Set)return`//js(Set(${[...t].map(i=>this.inspect(i)).join(", ")}))`;r=this.#r(t)}return this.#e.delete(t),r}#r(t){const n=globalThis.Object.getPrototypeOf(t)?.constructor?.name||"Object",r=[];for(const a of globalThis.Object.keys(t))r.push(`${this.inspect(a)}: ${this.inspect(t[a])}`);const i=r.length?" "+r.join(", ")+" ":"";return`//js(${n==="Object"?"":n+" "}{${i}})`}#i(t){let n="dict.from_list([",r=!0,i=[];return t.forEach((s,a)=>{i.push([a,s])}),i.sort(),i.forEach(([s,a])=>{r||(n=n+", "),n=n+"#("+this.inspect(s)+", "+this.inspect(a)+")",r=!1}),n+"])"}#s(t){const n=globalThis.Object.keys(t).map(r=>{const i=this.inspect(t[r]);return isNaN(parseInt(r))?`${r}: ${i}`:i}).join(", ");return n?`${t.constructor.name}(${n})`:t.constructor.name}#a(t){if(t instanceof d)return"[]";let n='charlist.from_string("',r="[",i=t;for(;i instanceof kt;){let s=i.head;i=i.tail,r!=="["&&(r+=", "),r+=this.inspect(s),n&&(globalThis.Number.isInteger(s)&&s>=32&&s<=126?n+=globalThis.String.fromCharCode(s):n=null)}return n?n+'")':r+"]"}#u(t){let n='"';for(let r=0;r<t.length;r++){const i=t[r];switch(i){case`
`:n+="\\n";break;case"\r":n+="\\r";break;case"	":n+="\\t";break;case"\f":n+="\\f";break;case"\\":n+="\\\\";break;case'"':n+='\\"';break;default:i<" "||i>"~"&&i<" "?n+="\\u{"+i.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":n+=i}}return n+='"',n}#c(t){return`//utfcodepoint(${globalThis.String.fromCodePoint(t.value)})`}#f(t){if(t.bitSize===0)return"<<>>";let n="<<";for(let r=0;r<t.byteSize-1;r++)n+=t.byteAt(r).toString(),n+=", ";if(t.byteSize*8===t.bitSize)n+=t.byteAt(t.byteSize-1).toString();else{const r=t.bitSize%8;n+=t.byteAt(t.byteSize-1)>>8-r,n+=`:size(${r})`}return n+=">>",n}}Ss();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const Lt=(e,t)=>n=>{const r=n.touches?.item(0),i=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...i})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...i}))};window.addEventListener("touchstart",Lt("mousedown",1));window.addEventListener("touchend",Lt("mouseup",0));window.addEventListener("touchmove",Lt("mousemove",void 0));
