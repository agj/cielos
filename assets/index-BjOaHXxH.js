(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class f{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class pe{static fromArray(t,n){let r=n||new g;for(let s=t.length-1;s>=0;--s)r=new Ne(t[s],r);return r}[Symbol.iterator](){return new dt(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof g}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function p(e,t){return new Ne(e,t)}function x(e,t){return pe.fromArray(e,t)}class dt{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof g)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class g extends pe{}class Ne extends pe{constructor(t,n){super(),this.head=t,this.tail=n}}class ne extends f{static isResult(t){return t instanceof ne}}class b extends ne{constructor(t){super(),this[0]=t}isOk(){return!0}}const ht=e=>e instanceof b,wt=e=>e[0];class D extends ne{constructor(t){super(),this[0]=t}isOk(){return!1}}function K(e,t){return t===0?0:e/t}function I(e,t,n,r,s,i,l){let a=new globalThis.Error(i);a.gleam_error=e,a.file=t,a.module=n,a.line=r,a.function=s,a.fn=s;for(let u in l)a[u]=l[u];return a}class T extends f{}class S extends f{}class ge extends f{}function pt(e){return e instanceof T?new ge:e instanceof S?e:new T}class $ extends f{constructor(t){super(),this[0]=t}}class gt extends f{}class k extends f{}class H extends f{}function X(e,t){for(;;){let n=e,r=t;if(n instanceof g)return r;{let s=n.head;e=n.tail,t=p(s,r)}}}function P(e){return X(e,x([]))}function xt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let l=r.head,a=r.tail,u,c=s(l);if(c instanceof b){let _=c[0];u=p(_,i)}else u=i;let o=u;e=a,t=s,n=o}}}function vt(e,t){return xt(e,t,x([]))}function yt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let l=r.head;e=r.tail,t=s,n=p(s(l),i)}}}function G(e,t){return yt(e,t,x([]))}function bt(e,t){for(;;){let n=e,r=t;if(n instanceof g)return P(r);{let s=n.head;e=n.tail,t=X(s,r)}}}function mt(e){return bt(e,x([]))}function $t(e,t){return mt(G(e,t))}function kt(e,t,n,r,s,i){for(;;){let l=e,a=t,u=n,c=r,o=s,_=i,d=p(o,u);if(l instanceof g)return c instanceof k?p(P(d),_):p(d,_);{let w=l.head,h=l.tail,v=a(o,w);if(c instanceof k)if(v instanceof T)e=h,t=a,n=d,r=c,s=w,i=_;else if(v instanceof S)e=h,t=a,n=d,r=c,s=w,i=_;else{let m;c instanceof k?m=p(P(d),_):m=p(d,_);let E=m;if(h instanceof g)return p(x([w]),E);{let A=h.head,L=h.tail,y,M=a(w,A);M instanceof T?y=new k:M instanceof S?y=new k:y=new H;let N=y;e=L,t=a,n=x([w]),r=N,s=A,i=E}}else if(v instanceof T){let m;c instanceof k?m=p(P(d),_):m=p(d,_);let E=m;if(h instanceof g)return p(x([w]),E);{let A=h.head,L=h.tail,y,M=a(w,A);M instanceof T?y=new k:M instanceof S?y=new k:y=new H;let N=y;e=L,t=a,n=x([w]),r=N,s=A,i=E}}else if(v instanceof S){let m;c instanceof k?m=p(P(d),_):m=p(d,_);let E=m;if(h instanceof g)return p(x([w]),E);{let A=h.head,L=h.tail,y,M=a(w,A);M instanceof T?y=new k:M instanceof S?y=new k:y=new H;let N=y;e=L,t=a,n=x([w]),r=N,s=A,i=E}}else e=h,t=a,n=d,r=c,s=w,i=_}}}function Pt(e,t,n,r){for(;;){let s=e,i=t,l=n,a=r;if(s instanceof g)return X(i,a);if(i instanceof g)return X(s,a);{let u=s.head,c=s.tail,o=i.head,_=i.tail,d=l(u,o);d instanceof T?(e=c,t=i,n=l,r=p(u,a)):(d instanceof S,e=s,t=_,n=l,r=p(o,a))}}}function Tt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let l=r.tail;if(l instanceof g){let a=r.head;return P(p(P(a),i))}else{let a=r.head,u=l.head,c=l.tail,o=Pt(a,u,s,x([]));e=c,t=s,n=p(o,i)}}}}function Et(e,t,n,r){for(;;){let s=e,i=t,l=n,a=r;if(s instanceof g)return X(i,a);if(i instanceof g)return X(s,a);{let u=s.head,c=s.tail,o=i.head,_=i.tail,d=l(u,o);d instanceof T?(e=s,t=_,n=l,r=p(o,a)):(d instanceof S,e=c,t=i,n=l,r=p(u,a))}}}function St(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return P(i);{let l=r.tail;if(l instanceof g){let a=r.head;return P(p(P(a),i))}else{let a=r.head,u=l.head,c=l.tail,o=Et(a,u,s,x([]));e=c,t=s,n=p(o,i)}}}}function At(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return r;if(s instanceof k){if(r.tail instanceof g)return r.head;e=Tt(r,i,x([])),t=new H,n=i}else if(r.tail instanceof g){let a=r.head;return P(a)}else e=St(r,i,x([])),t=new k,n=i}}function Lt(e,t){if(e instanceof g)return e;{let n=e.tail;if(n instanceof g)return e;{let r=e.head,s=n.head,i=n.tail,l,a=t(r,s);a instanceof T?l=new k:a instanceof S?l=new k:l=new H;let u=l,c=kt(i,t,x([r]),u,s,x([]));return At(c,new k,t)}}}function Mt(e,t,n){for(;;){let r=e,s=t,i=n,l=Ht(r,s);if(l instanceof T)e=r,t=s-1,n=p(s,i);else{if(l instanceof S)return p(s,i);e=r,t=s+1,n=p(s,i)}}}function xe(e,t){return Mt(e,t,x([]))}function Ot(e){return e.toString()}function It(e){return Math.ceil(e)}function jt(e){return Math.floor(e)}function Pe(e){return Math.round(e)}function qt(e,t){return Math.pow(e,t)}function Z(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function Kt(e,t){return e===t?new S:e<t?new T:new ge}function Nt(e,t){return e<t?e:t}function Rt(e,t){return e>t?e:t}function Re(e,t,n){let s=Nt(e,n);return Rt(s,t)}function Te(e){return e>=0?e:0-e}function Ft(e,t){let n=It(t)-t>0;return e<0&&n||e===0&&t<0?new D(void 0):new b(qt(e,t))}function Ct(e){return Ft(e,.5)}function ve(e){return-1*e}function Ee(e){return e>=0?Pe(e):0-Pe(ve(e))}function Bt(e,t){for(;;){let n=e,r=t;if(n instanceof g)return r;{let s=n.head;e=n.tail,t=s+r}}}function Dt(e){return Bt(e,0)}function Se(e,t){if(t===0)return new D(void 0);{let n=t;return new b(K(e,n))}}function Xt(e,t){return e+t}function Ae(e,t){return e*t}function zt(e,t){return e-t}function Ht(e,t){return e===t?new S:e<t?new T:new ge}function Yt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return i;{let l=r.head;e=r.tail,t=s,n=i+s+l}}}function Ut(e,t){if(e instanceof g)return"";{let n=e.head,r=e.tail;return Yt(r,t,n)}}function J(e,t){if(e instanceof b){let n=e[0];return t(n)}else return e}const Le="src/gleam_community/colour.gleam";class Fe extends f{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class Vt extends f{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function Q(e){return e>1||e<0?new D(void 0):new b(e)}function ie(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,l=s*2,a=s*3;return i<1?t+(n-t)*s*6:l<1?n:a<2?t+(n-t)*(2/3-s)*6:t}function Wt(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let l=s,a=n*2-l,u=ie(e+1/3,a,l),c=ie(e,a,l),o=ie(e-1/3,a,l);return[u,c,o,r]}function Ce(e,t,n,r){return J(Q(e),s=>J(Q(t),i=>J(Q(n),l=>J(Q(r),a=>new b(new Vt(s,i,l,a))))))}function Be(e,t,n){return Ce(e,t,n,1)}function Gt(e){if(e instanceof Fe){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return Wt(t,n,r,s)}}function Me(e){let t=Gt(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let l=u=>{let c,_=Ae(u,1e4),d=Ee(_),w=d;c=Se(w,100);let h=c,v;if(h instanceof b)v=h[0];else throw I("let_assert",Le,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:h,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return v},a=u=>{let c,_=Ae(u,1e3),d=Ee(_),w=d;c=Se(w,1e3);let h=c,v;if(h instanceof b)v=h[0];else throw I("let_assert",Le,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:h,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return v};return Ut(x(["rgba(",Z(l(n))+"%,",Z(l(r))+"%,",Z(l(s))+"%,",Z(a(i)),")"]),"")}const Zt=new Fe(.9607843137254902,.4745098039215686,0,1);function Jt(e){return Math.sin(e)}function Qt(){return Math.PI}function en(e,t){return Math.atan2(e,t)}function tn(e){return Math.cos(e)}function nn(e,t){return en(e,t)}function rn(e){return tn(e)}function De(e){return Jt(e)}function ye(e,t){let n=e*rn(t),r=e*De(t);return[n,r]}function Xe(){return Qt()}function Y(){return 2*Xe()}class sn extends f{}class ze extends f{constructor(t,n){super(),this[0]=t,this.closed=n}}class an extends f{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class ln extends f{constructor(t,n){super(),this.text=t,this.style=n}}class un extends f{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class He extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class be extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class cn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ye extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ue extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class fn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ve extends f{constructor(t){super(),this[0]=t}}class on extends f{}class We extends f{}class _n extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}function Ge(e){return new ze(e,!0)}function Ze(e,t){return Ge(x([[0,0],[e,0],[e,t],[0,t]]))}function re(e,t,n){return new Ye(e,[t,n])}function dn(e,t){return re(e,t,0)}function Je(e,t){return re(e,0,t)}function hn(e,t){return new Ue(e,[t,t])}function me(e,t){return new He(e,t)}function wn(e,t,n){return new be(e,new _n(t,n))}function Qe(e){return new be(e,new We)}function te(e){return new Ve(e)}class ue extends f{constructor(t){super(),this[0]=t}}class ce extends f{constructor(t){super(),this[0]=t}}class pn extends f{constructor(t){super(),this[0]=t}}class fe extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class et extends f{constructor(t){super(),this[0]=t}}class tt extends f{constructor(t){super(),this[0]=t}}class nt extends f{}class rt extends f{}class st extends f{}class it extends f{}class gn extends f{}class xn extends f{}class vn extends f{}class yn extends f{}class bn extends f{}class mn extends f{}class $n extends f{}class kn extends f{}class Pn extends f{}class oe extends f{}class Tn extends f{}class _e extends f{}class En extends f{}class Sn extends f{}function An(e){return document.querySelector(e).getContext("2d")}function at(e){window.requestAnimationFrame(t=>{e(t)})}function ae(e,t){window.addEventListener(e,t)}function Ln(e){return e.keyCode}function C(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function B(e){return window.PAINT_STATE?e in window.PAINT_STATE?new b(window.PAINT_STATE[e]):new D(void 0):new D(void 0)}function Mn(e){return e.canvas.clientWidth}function On(e){return e.canvas.clientHeight}function In(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function jn(e,t,n,r){let s=ht(t)?wt(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function qn(e){e.reset()}function Kn(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function Nn(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const l of t){let a=l[0],u=l[1];i?e.lineTo(a,u):(e.moveTo(a,u),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function Rn(e,t,n){e.font=n,e.fillText(t,0,0)}function R(e){e.save()}function F(e){e.restore()}function Fn(e,t){e.fillStyle=t}function Cn(e,t){e.strokeStyle=t}function Bn(e,t){e.lineWidth=t}function Dn(e,t,n){e.translate(t,n)}function Xn(e,t,n){e.scale(t,n)}function zn(e,t){e.rotate(t)}function Hn(e,t,n,r){e.drawImage(t,0,0,n,r)}function Yn(e,t){e.imageSmoothingEnabled=t}const U="src/paint/canvas.gleam";class Un extends f{constructor(t,n){super(),this.width=t,this.height=n}}class ee extends f{constructor(t,n){super(),this.fill=t,this.stroke=n}}function q(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof sn)return;if(r instanceof ze){let l=r[0],a=r.closed;return Nn(s,l,a,i.fill,i.stroke)}else if(r instanceof an){let l=r.radius,a=r.start,u=r.end,c;c=a[0];let o;return o=u[0],Kn(s,l,c,o,i.fill,i.stroke)}else if(r instanceof ln){let l=r.text,a=r.style,u,c;return u=a.size_px,c=a.font_family,R(s),Rn(s,l,Ot(u)+"px "+c),F(s)}else if(r instanceof un){let l=r.width_px,a=r.height_px,u=r[0].id,c=B(u),o;if(c instanceof b)o=c[0];else throw I("let_assert",U,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:c,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return Hn(s,o,l,a)}else if(r instanceof He){let l=r[0],a=r[1];return R(s),Fn(s,Me(a)),q(l,s,new ee(!0,i.stroke)),F(s)}else if(r instanceof be){let l=r[0],a=r[1];if(a instanceof We)e=l,t=s,n=new ee(i.fill,!1);else{let u=a[0],c=a[1];return R(s),Cn(s,Me(u)),Bn(s,c),q(l,s,new ee(i.fill,!0)),F(s)}}else if(r instanceof cn){let l=r[0],a=r[1];return R(s),Yn(s,a instanceof on),q(l,s,i),F(s)}else if(r instanceof Ye){let l=r[0],a=r[1],u,c;return u=a[0],c=a[1],R(s),Dn(s,u,c),q(l,s,i),F(s)}else if(r instanceof Ue){let l=r[0],a=r[1],u,c;return u=a[0],c=a[1],R(s),Xn(s,u,c),q(l,s,i),F(s)}else if(r instanceof fn){let l=r[0],a=r[1],u;return u=a[0],R(s),zn(s,u),q(l,s,i),F(s)}else{let l=r[0];if(l instanceof g)return;{let a=l.head,u=l.tail;q(a,s,i),e=new Ve(u),t=s,n=i}}}}function Vn(e){return e===32?new $(new gn):e===37?new $(new nt):e===38?new $(new st):e===39?new $(new rt):e===40?new $(new it):e===87?new $(new xn):e===65?new $(new vn):e===83?new $(new yn):e===68?new $(new bn):e===90?new $(new mn):e===88?new $(new $n):e===67?new $(new kn):e===18?new $(new Pn):e===27?new $(new oe):e===8?new $(new Tn):new gt}const Wn=new ee(!1,!0);function lt(e,t,n,r){return s=>{let i=B(r),l;if(i instanceof b)l=i[0];else throw I("let_assert",U,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let a=n(l,new ue(s));C(a,r);let u=t(a);return qn(e),q(u,e,Wn),at(lt(e,t,n,r))}}function Gn(e,t,n,r){let s=An(r),i=e(new Un(Mn(s),On(s)));C(i,r);let l=(u,c)=>ae(u,o=>{let _=Vn(Ln(o));if(_ instanceof $){let d=_[0],w=B(r),h;if(w instanceof b)h=w[0];else throw I("let_assert",U,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:w,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let v=t(h,c(d));return C(v,r)}else return});l("keydown",u=>new ce(u)),l("keyup",u=>new pn(u)),ae("mousemove",u=>{let c=In(s,u),o,_;o=c[0],_=c[1];let d=B(r),w;if(d instanceof b)w=d[0];else throw I("let_assert",U,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:d,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let h=t(w,new fe(o,_));C(h,r)});let a=(u,c,o)=>ae(u,_=>{let d="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,w=B(d);C(_,d);let h=L=>jn(_,w,L,o),v=L=>{let y=B(r),M;if(y instanceof b)M=y[0];else throw I("let_assert",U,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:y,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let N=t(M,c(L));return C(N,r)};h(0)&&v(new _e),h(1)&&v(new En),h(2)&&v(new Sn)});return a("mousedown",u=>new et(u),!0),a("mouseup",u=>new tt(u),!1),at(lt(s,n,t,r))}class j extends f{constructor(t,n){super(),this.x=t,this.y=n}}function Zn(e){return x([e.x,e.y])}function ut(e,t,n){return new j(n(e.x,t.x),n(e.y,t.y))}const Jn="src/vec/vec2f.gleam";function Qn(e,t){return ut(e,t,Xt)}function er(e){let n=Zn(e),r=G(n,s=>s*s);return Dt(r)}function tr(e,t){let r=ut(e,t,zt);return er(r)}function nr(e,t){let n,r=tr(e,t);n=Ct(r);let s=n,i;if(s instanceof b)i=s[0];else throw I("let_assert",Jn,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const $e="src/app.gleam";class O extends f{constructor(t,n,r,s,i,l,a,u){super(),this.avatar=t,this.camera=n,this.speed=r,this.objects=s,this.mouse_pos=i,this.drag=l,this.current_time=a,this.paused=u}}class se extends f{constructor(t,n){super(),this.pos=t,this.dir=n}}let Oe=class extends f{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class ct extends f{}class rr extends f{}class ft extends f{constructor(t,n){super(),this.lagging_dir=t,this.start_move_time=n}}class V extends f{}class sr extends f{constructor(t){super(),this.start_pos=t}}class z extends f{}class de extends f{}function ir(e,t,n){let r=t*n,s=ye(r,e.dir),i,l;return i=s[0],l=s[1],new se(Qn(e.pos,new j(i,l)),e.dir)}function ar(e){let t=Be(.12,1,.7),n;if(t instanceof b)n=t[0];else throw I("let_assert",$e,"app",300,"view_star","Pattern match failed, no pattern matched the value.",{value:t,start:7004,end:7063,pattern_start:7015,pattern_end:7029});let r=e/2e3,s=Ge((()=>{let l=xe(0,10);return G(l,a=>{let u=Y()/10*a+r,c;return a%2===0?c=250:c=140,ye(c,u)})})()),i=me(s,n);return wn(i,Zt,10)}function lr(){let e=Ce(.75,.5,.4,.05),t;if(e instanceof b)t=e[0];else throw I("let_assert",$e,"app",319,"view_shadow","Pattern match failed, no pattern matched the value.",{value:e,start:7501,end:7569,pattern_start:7512,pattern_end:7528});let n=Ze(200,5e3),r=dn(n,-100),s=me(r,t);return Qe(s)}function ur(e,t){return e instanceof ct?ar(t):lr()}function ot(e,t,n){let r=100,s=e.start_move_time,i=s+r;if(n>=i)return t;{let a=K(n-s,r);return t*a+e.lagging_dir*(1-a)}}function cr(e){return K(1,K(e,.2)+1)}function fr(e,t){let n=ye(e,t),r,s;return r=n[0],s=n[1],new j(r,s)}function or(e){let t=.8*Y(),n,r=xe(0,200);n=$t(r,i=>{let l=i,a=fr((l+1)*2+10,l/20*Y()),u=De(l/5*Y());return x([new Oe(a,u,new ct),new Oe(a,-10,new rr)])});let s=n;return new O(new se(new j(0,0),t),new ft(t,0),.01,s,new j(0,0),new V,0,new de)}function _t(e,t,n,r){return nn(r-t,n-e)}function _r(e){for(;;){let t=e,n=Y(),r=Xe(),s=ve(r),i=t;if(i>r)e=i-n;else{let l=t;if(l<=s)e=l+n;else return t}}}function le(e,t,n){return(t-e)*n+e}function Ie(e,t,n,r,s,i,l,a,u){let c=u,o=jt(K(a,c)),_=xe(0,u),d=G(_,w=>{let h=w,v=K(h,c-1),m=Be(le(e,r,v),le(t,s,v),le(n,i,v)),E;if(m instanceof b)E=m[0];else throw I("let_assert",$e,"app",378,"view_gradient","Pattern match failed, no pattern matched the value.",{value:m,start:8640,end:8867,pattern_start:8651,pattern_end:8663});let A=Ze(l,o),L=Je(A,o*h),y=me(L,E);return Qe(y)});return te(d)}const je=300,qe=300,W=new j(150,150);function dr(){let e=x([Ie(.85,.6,.9,.7,.4,.98,je,qe/2,50),(()=>{let t=Ie(.6,.4,.95,.6,.7,.8,je,qe/2,50);return Je(t,W.y)})()]);return te(e)}const hr=.005,wr=.4;function Ke(e,t){return new O(e.avatar,e.camera,Re(e.speed+t*(e.speed*.05),hr,wr),e.objects,e.mouse_pos,e.drag,e.current_time,e.paused)}const pr=.09;function gr(e,t){return new se(e.pos,e.dir+pr*t)}function he(e,t){return new O(gr(e.avatar,t),new ft(ot(e.camera,e.avatar.dir,e.current_time),e.current_time),e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused)}function xr(e,t){let n=e.drag;if(n instanceof V)return e;{let r=n.start_pos,s,i=(e.mouse_pos.x-r.x)*.001;s=Re(i,-.02,.02);let a=s*t;return he(e,a)}}function vr(e,t){if(e.paused instanceof z)if(t instanceof ue){let r=t[0];return new O(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused)}else{if(t instanceof ce)return t[0]instanceof oe?new O(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new V,e.current_time,e.paused instanceof z?new de:new z):e;if(t instanceof fe){let r=t[0],s=t[1];return new O(e.avatar,e.camera,e.speed,e.objects,new j(r,s),e.drag,e.current_time,e.paused)}else return e}else if(t instanceof ue){let r=t[0],s=r-e.current_time,i=new O(ir(e.avatar,e.speed,s),e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused);return xr(i,s)}else if(t instanceof ce){let r=t[0];return r instanceof nt?he(e,-1):r instanceof rt?he(e,1):r instanceof st?Ke(e,1):r instanceof it?Ke(e,-1):r instanceof oe?new O(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new V,e.current_time,e.paused instanceof z?new de:new z):e}else if(t instanceof fe){let r=t[0],s=t[1];return new O(e.avatar,e.camera,e.speed,e.objects,new j(r,s),e.drag,e.current_time,e.paused)}else return t instanceof et?t[0]instanceof _e?new O(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new sr(e.mouse_pos),e.current_time,e.paused):e:t instanceof tt&&t[0]instanceof _e?new O(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new V,e.current_time,e.paused):e}const we=.7853981634;function yr(e,t,n,r){let s=_t(0,0,n,e.height),i=cr(n),l=new j(K(t*W.x,we),ve(K(s*W.x,we))),a=ur(e.kind,r),u=hn(a,i);return re(u,l.x,l.y)}function br(e){let t,n=e.avatar;t=new se(n.pos,ot(e.camera,e.avatar.dir,e.current_time));let r=t,s,i=te((()=>{let a=e.objects,u=vt(a,o=>{let _=_t(r.pos.x,r.pos.y,o.pos.x,o.pos.y),d=_r(_-r.dir),w=Te(nr(r.pos,o.pos));return Te(d)<=we?new b([o,d,w]):new D(void 0)}),c=Lt(u,(o,_)=>pt(Kt(o[2],_[2])));return G(c,o=>yr(o[0],o[1],o[2],e.current_time))})());s=re(i,W.x,W.y);let l=s;return te(x([dr(),l]))}function mr(){return Gn(or,vr,br,"#app")}mr();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const ke=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",ke("mousedown",1));window.addEventListener("touchend",ke("mouseup",0));window.addEventListener("touchmove",ke("mousemove",void 0));
