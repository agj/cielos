(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class f{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class re{static fromArray(t,n){let r=n||new b;for(let s=t.length-1;s>=0;--s)r=new bt(t[s],r);return r}[Symbol.iterator](){return new Qt(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof b}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function g(e,t){return new bt(e,t)}function o(e,t){return re.fromArray(e,t)}class Qt{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof b)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class b extends re{}class bt extends re{constructor(t,n){super(),this.head=t,this.tail=n}}class en{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Z(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;const n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let s=0;s<n;s++)if(this.rawBuffer[s]!==t.rawBuffer[s])return!1;const r=this.bitSize%8;if(r){const s=8-r;if(this.rawBuffer[n]>>s!==t.rawBuffer[n]>>s)return!1}}else{for(let s=0;s<n;s++){const i=Z(this.rawBuffer,this.bitOffset,s),a=Z(t.rawBuffer,t.bitOffset,s);if(i!==a)return!1}const r=this.bitSize%8;if(r){const s=Z(this.rawBuffer,this.bitOffset,n),i=Z(t.rawBuffer,t.bitOffset,n),a=8-r;if(s>>a!==i>>a)return!1}}return!0}get buffer(){if(nt("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(nt("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function Z(e,t,n){if(t===0)return e[n]??0;{const r=e[n]<<t&255,s=e[n+1]>>8-t;return r|s}}const tt={};function nt(e,t){tt[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),tt[e]=!0)}class xe extends f{static isResult(t){return t instanceof xe}}class x extends xe{constructor(t){super(),this[0]=t}isOk(){return!0}}const tn=e=>e instanceof x,nn=e=>e[0];class X extends xe{constructor(t){super(),this[0]=t}isOk(){return!1}}function rn(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),s=n.pop();if(r===s)continue;if(!rt(r)||!rt(s)||!_n(r,s)||an(r,s)||ln(r,s)||un(r,s)||cn(r,s)||fn(r,s)||on(r,s))return!1;const a=Object.getPrototypeOf(r);if(a!==null&&typeof a.equals=="function")try{if(r.equals(s))continue;return!1}catch{}let[l,u]=sn(r);const c=l(r),_=l(s);if(c.length!==_.length)return!1;for(let p of c)n.push(u(r,p),u(s,p))}return!0}function sn(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function an(e,t){return e instanceof Date&&(e>t||e<t)}function ln(e,t){return!(e instanceof en)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function un(e,t){return Array.isArray(e)&&e.length!==t.length}function cn(e,t){return e instanceof Map&&e.size!==t.size}function fn(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function on(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function rt(e){return typeof e=="object"&&e!==null}function _n(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function K(e,t){return t===0?0:e/t}function q(e,t,n,r,s,i,a){let l=new globalThis.Error(i);l.gleam_error=e,l.file=t,l.module=n,l.line=r,l.function=s,l.fn=s;for(let u in a)l[u]=a[u];return l}class M extends f{}class L extends f{}class Ce extends f{}function yt(e){return e instanceof M?new Ce:e instanceof L?e:new M}class A extends f{constructor(t){super(),this[0]=t}}class xt extends f{}class E extends f{}class ee extends f{}function se(e,t){for(;;){let n=e,r=t;if(n instanceof b)return r;{let s=n.head;e=n.tail,t=g(s,r)}}}function T(e){return se(e,o([]))}function pn(e){if(e instanceof b)return new X(void 0);{let t=e.head;return new x(t)}}function hn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return T(i);{let a=r.head,l=r.tail,u,c=s(a);if(c instanceof x){let p=c[0];u=g(p,i)}else u=i;let _=u;e=l,t=s,n=_}}}function wn(e,t){return hn(e,t,o([]))}function dn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return T(i);{let a=r.head;e=r.tail,t=s,n=g(s(a),i)}}}function J(e,t){return dn(e,t,o([]))}function gn(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof b)return T(l);{let u=s.head,c=s.tail,_=g(i(u,a),l);e=c,t=i,n=a+1,r=_}}}function $t(e,t){return gn(e,t,0,o([]))}function bn(e,t,n,r,s,i){for(;;){let a=e,l=t,u=n,c=r,_=s,p=i,h=g(_,u);if(a instanceof b)return c instanceof E?g(T(h),p):g(h,p);{let d=a.head,w=a.tail,y=l(_,d);if(c instanceof E)if(y instanceof M)e=w,t=l,n=h,r=c,s=d,i=p;else if(y instanceof L)e=w,t=l,n=h,r=c,s=d,i=p;else{let v;c instanceof E?v=g(T(h),p):v=g(h,p);let S=v;if(w instanceof b)return g(o([d]),S);{let B=w.head,O=w.tail,m,I=l(d,B);I instanceof M?m=new E:I instanceof L?m=new E:m=new ee;let F=m;e=O,t=l,n=o([d]),r=F,s=B,i=S}}else if(y instanceof M){let v;c instanceof E?v=g(T(h),p):v=g(h,p);let S=v;if(w instanceof b)return g(o([d]),S);{let B=w.head,O=w.tail,m,I=l(d,B);I instanceof M?m=new E:I instanceof L?m=new E:m=new ee;let F=m;e=O,t=l,n=o([d]),r=F,s=B,i=S}}else if(y instanceof L){let v;c instanceof E?v=g(T(h),p):v=g(h,p);let S=v;if(w instanceof b)return g(o([d]),S);{let B=w.head,O=w.tail,m,I=l(d,B);I instanceof M?m=new E:I instanceof L?m=new E:m=new ee;let F=m;e=O,t=l,n=o([d]),r=F,s=B,i=S}}else e=w,t=l,n=h,r=c,s=d,i=p}}}function yn(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof b)return se(i,l);if(i instanceof b)return se(s,l);{let u=s.head,c=s.tail,_=i.head,p=i.tail,h=a(u,_);h instanceof M?(e=c,t=i,n=a,r=g(u,l)):(h instanceof L,e=s,t=p,n=a,r=g(_,l))}}}function xn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return T(i);{let a=r.tail;if(a instanceof b){let l=r.head;return T(g(T(l),i))}else{let l=r.head,u=a.head,c=a.tail,_=yn(l,u,s,o([]));e=c,t=s,n=g(_,i)}}}}function $n(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof b)return se(i,l);if(i instanceof b)return se(s,l);{let u=s.head,c=s.tail,_=i.head,p=i.tail,h=a(u,_);h instanceof M?(e=s,t=p,n=a,r=g(_,l)):(h instanceof L,e=c,t=i,n=a,r=g(u,l))}}}function vn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return T(i);{let a=r.tail;if(a instanceof b){let l=r.head;return T(g(T(l),i))}else{let l=r.head,u=a.head,c=a.tail,_=$n(l,u,s,o([]));e=c,t=s,n=g(_,i)}}}}function mn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return r;if(s instanceof E){if(r.tail instanceof b)return r.head;e=xn(r,i,o([])),t=new ee,n=i}else if(r.tail instanceof b){let l=r.head;return T(l)}else e=vn(r,i,o([])),t=new E,n=i}}function vt(e,t){if(e instanceof b)return e;{let n=e.tail;if(n instanceof b)return e;{let r=e.head,s=n.head,i=n.tail,a,l=t(r,s);l instanceof M?a=new E:l instanceof L?a=new E:a=new ee;let u=a,c=bn(i,t,o([r]),u,s,o([]));return mn(c,new E,t)}}}function kn(e,t,n){for(;;){let r=e,s=t,i=n,a=Et(r,s);if(a instanceof M)e=r,t=s-1,n=g(s,i);else{if(a instanceof L)return g(s,i);e=r,t=s+1,n=g(s,i)}}}function Ne(e,t){return kn(e,t,o([]))}function An(e){return e.toString()}function Se(e){if(e==="")return 0;const t=mt(e);if(t){let n=0;for(const r of t)n++;return n}else return e.match(/./gsu).length}function Sn(e){const t=mt(e);return t?re.fromArray(Array.from(t).map(n=>n.segment)):re.fromArray(e.match(/./gsu))}let st;function mt(e){if(globalThis.Intl&&Intl.Segmenter)return st||=new Intl.Segmenter,st.segment(e)[Symbol.iterator]()}function En(e){return Math.ceil(e)}function Pn(e){return Math.floor(e)}function it(e){return Math.round(e)}function Bn(e,t){return Math.pow(e,t)}function le(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function Tn(e,t){return e===t?new L:e<t?new M:new Ce}function kt(e,t){return e<t?e:t}function At(e,t){return e>t?e:t}function St(e,t,n){let s=kt(e,n);return At(s,t)}function at(e){return e>=0?e:0-e}function Ee(e,t){let n=En(t)-t>0;return e<0&&n||e===0&&t<0?new X(void 0):new x(Bn(e,t))}function On(e){return Ee(e,.5)}function ie(e){return-1*e}function lt(e){return e>=0?it(e):0-it(ie(e))}function Mn(e,t){for(;;){let n=e,r=t;if(n instanceof b)return r;{let s=n.head;e=n.tail,t=s+r}}}function qn(e){return Mn(e,0)}function ut(e,t){if(t===0)return new X(void 0);{let n=t;return new x(K(e,n))}}function zn(e,t){return e+t}function ct(e,t){return e*t}function Ln(e,t){return e-t}function Et(e,t){return e===t?new L:e<t?new M:new Ce}function In(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof b)return i;{let a=r.head;e=r.tail,t=s,n=i+s+a}}}function jn(e,t){if(e instanceof b)return"";{let n=e.head,r=e.tail;return In(r,t,n)}}function Kn(e,t){return Sn(e)}function Pt(e,t){if(e instanceof x){let n=e[0];return new x(t(n))}else return e}function ue(e,t){if(e instanceof x){let n=e[0];return t(n)}else return e}function Bt(e,t){return e instanceof x?e[0]:t}const ft="src/gleam_community/colour.gleam";class Fe extends f{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class Rn extends f{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function ce(e){return e>1||e<0?new X(void 0):new x(e)}function me(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,a=s*2,l=s*3;return i<1?t+(n-t)*s*6:a<1?n:l<2?t+(n-t)*(2/3-s)*6:t}function Cn(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let a=s,l=n*2-a,u=me(e+1/3,l,a),c=me(e,l,a),_=me(e-1/3,l,a);return[u,c,_,r]}function Pe(e,t,n,r){return ue(ce(e),s=>ue(ce(t),i=>ue(ce(n),a=>ue(ce(r),l=>new x(new Rn(s,i,a,l))))))}function Be(e,t,n){return Pe(e,t,n,1)}function Nn(e){if(e instanceof Fe){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return Cn(t,n,r,s)}}function ot(e){let t=Nn(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let a=u=>{let c,p=ct(u,1e4),h=lt(p),d=h;c=ut(d,100);let w=c,y;if(w instanceof x)y=w[0];else throw q("let_assert",ft,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:w,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return y},l=u=>{let c,p=ct(u,1e3),h=lt(p),d=h;c=ut(d,1e3);let w=c,y;if(w instanceof x)y=w[0];else throw q("let_assert",ft,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:w,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return y};return jn(o(["rgba(",le(a(n))+"%,",le(a(r))+"%,",le(a(s))+"%,",le(l(i)),")"]),"")}const Fn=new Fe(.9607843137254902,.4745098039215686,0,1),Dn=new Fe(1,1,1,1);function Un(e){return Math.sin(e)}function Xn(){return Math.PI}function Yn(e,t){return Math.atan2(e,t)}function Hn(e){return Math.cos(e)}function Wn(e,t){return Yn(e,t)}function Vn(e){return Hn(e)}function he(e){return Un(e)}function De(e,t){let n=e*Vn(t),r=e*he(t);return[n,r]}function Ue(){return Xn()}function te(){return 2*Ue()}function Gn(){return Math.PI}class Tt extends f{}class Xe extends f{constructor(t,n){super(),this[0]=t,this.closed=n}}class Ot extends f{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class Jn extends f{constructor(t,n){super(),this.text=t,this.style=n}}class Zn extends f{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class Mt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ye extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Qn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class qt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class He extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class zt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Lt extends f{constructor(t){super(),this[0]=t}}class er extends f{}class It extends f{}class tr extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Te extends f{constructor(t){super(),this[0]=t}}function jt(e){return new Te(e)}function We(){return new Tt}function Ve(e){return new Xe(e,!0)}function $(e){return new Xe(e,!1)}function Ge(e,t){return Ve(o([[0,0],[e,0],[e,t],[0,t]]))}function P(e,t,n){return new qt(e,[t,n])}function ae(e,t){return P(e,t,0)}function Je(e,t){return P(e,0,t)}function nr(e,t){return new He(e,[t,1])}function G(e,t){return new He(e,[t,t])}function Kt(e,t){return new zt(e,t)}function R(e,t){return new Mt(e,t)}function Rt(e,t,n){return new Ye(e,new tr(t,n))}function N(e){return new Ye(e,new It)}function k(e){return new Lt(e)}function Ze(e){return new Ot(e,new Te(0),new Te(2*Gn()))}class Oe extends f{constructor(t){super(),this[0]=t}}class Me extends f{constructor(t){super(),this[0]=t}}class rr extends f{constructor(t){super(),this[0]=t}}class qe extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class ze extends f{constructor(t){super(),this[0]=t}}class Ct extends f{constructor(t){super(),this[0]=t}}class Nt extends f{}class Ft extends f{}class Dt extends f{}class Ut extends f{}class sr extends f{}class ir extends f{}class ar extends f{}class lr extends f{}class ur extends f{}class cr extends f{}class fr extends f{}class or extends f{}class _r extends f{}class Le extends f{}class pr extends f{}class oe extends f{}class hr extends f{}class wr extends f{}function dr(e){return document.querySelector(e).getContext("2d")}function Xt(e){window.requestAnimationFrame(t=>{e(t)})}function ke(e,t){window.addEventListener(e,t)}function gr(e){return e.keyCode}function H(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function W(e){return window.PAINT_STATE?e in window.PAINT_STATE?new x(window.PAINT_STATE[e]):new X(void 0):new X(void 0)}function br(e){return e.canvas.clientWidth}function yr(e){return e.canvas.clientHeight}function xr(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function $r(e,t,n,r){let s=tn(t)?nn(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function vr(e){e.reset()}function mr(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function kr(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const a of t){let l=a[0],u=a[1];i?e.lineTo(l,u):(e.moveTo(l,u),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function Ar(e,t,n){e.font=n,e.fillText(t,0,0)}function D(e){e.save()}function U(e){e.restore()}function Sr(e,t){e.fillStyle=t}function Er(e,t){e.strokeStyle=t}function Pr(e,t){e.lineWidth=t}function Br(e,t,n){e.translate(t,n)}function Tr(e,t,n){e.scale(t,n)}function Or(e,t){e.rotate(t)}function Mr(e,t,n,r){e.drawImage(t,0,0,n,r)}function qr(e,t){e.imageSmoothingEnabled=t}const ne="src/paint/canvas.gleam";class zr extends f{constructor(t,n){super(),this.width=t,this.height=n}}class _e extends f{constructor(t,n){super(),this.fill=t,this.stroke=n}}function C(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof Tt)return;if(r instanceof Xe){let a=r[0],l=r.closed;return kr(s,a,l,i.fill,i.stroke)}else if(r instanceof Ot){let a=r.radius,l=r.start,u=r.end,c;c=l[0];let _;return _=u[0],mr(s,a,c,_,i.fill,i.stroke)}else if(r instanceof Jn){let a=r.text,l=r.style,u,c;return u=l.size_px,c=l.font_family,D(s),Ar(s,a,An(u)+"px "+c),U(s)}else if(r instanceof Zn){let a=r.width_px,l=r.height_px,u=r[0].id,c=W(u),_;if(c instanceof x)_=c[0];else throw q("let_assert",ne,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:c,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return Mr(s,_,a,l)}else if(r instanceof Mt){let a=r[0],l=r[1];return D(s),Sr(s,ot(l)),C(a,s,new _e(!0,i.stroke)),U(s)}else if(r instanceof Ye){let a=r[0],l=r[1];if(l instanceof It)e=a,t=s,n=new _e(i.fill,!1);else{let u=l[0],c=l[1];return D(s),Er(s,ot(u)),Pr(s,c),C(a,s,new _e(i.fill,!0)),U(s)}}else if(r instanceof Qn){let a=r[0],l=r[1];return D(s),qr(s,l instanceof er),C(a,s,i),U(s)}else if(r instanceof qt){let a=r[0],l=r[1],u,c;return u=l[0],c=l[1],D(s),Br(s,u,c),C(a,s,i),U(s)}else if(r instanceof He){let a=r[0],l=r[1],u,c;return u=l[0],c=l[1],D(s),Tr(s,u,c),C(a,s,i),U(s)}else if(r instanceof zt){let a=r[0],l=r[1],u;return u=l[0],D(s),Or(s,u),C(a,s,i),U(s)}else{let a=r[0];if(a instanceof b)return;{let l=a.head,u=a.tail;C(l,s,i),e=new Lt(u),t=s,n=i}}}}function Lr(e){return e===32?new A(new sr):e===37?new A(new Nt):e===38?new A(new Dt):e===39?new A(new Ft):e===40?new A(new Ut):e===87?new A(new ir):e===65?new A(new ar):e===83?new A(new lr):e===68?new A(new ur):e===90?new A(new cr):e===88?new A(new fr):e===67?new A(new or):e===18?new A(new _r):e===27?new A(new Le):e===8?new A(new pr):new xt}const Ir=new _e(!1,!0);function Yt(e,t,n,r){return s=>{let i=W(r),a;if(i instanceof x)a=i[0];else throw q("let_assert",ne,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let l=n(a,new Oe(s));H(l,r);let u=t(l);return vr(e),C(u,e,Ir),Xt(Yt(e,t,n,r))}}function jr(e,t,n,r){let s=dr(r),i=e(new zr(br(s),yr(s)));H(i,r);let a=(u,c)=>ke(u,_=>{let p=Lr(gr(_));if(p instanceof A){let h=p[0],d=W(r),w;if(d instanceof x)w=d[0];else throw q("let_assert",ne,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:d,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let y=t(w,c(h));return H(y,r)}else return});a("keydown",u=>new Me(u)),a("keyup",u=>new rr(u)),ke("mousemove",u=>{let c=xr(s,u),_,p;_=c[0],p=c[1];let h=W(r),d;if(h instanceof x)d=h[0];else throw q("let_assert",ne,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:h,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let w=t(d,new qe(_,p));H(w,r)});let l=(u,c,_)=>ke(u,p=>{let h="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,d=W(h);H(p,h);let w=O=>$r(p,d,O,_),y=O=>{let m=W(r),I;if(m instanceof x)I=m[0];else throw q("let_assert",ne,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:m,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let F=t(I,c(O));return H(F,r)};w(0)&&y(new oe),w(1)&&y(new hr),w(2)&&y(new wr)});return l("mousedown",u=>new ze(u),!0),l("mouseup",u=>new Ct(u),!1),Xt(Yt(s,n,t,r))}class j extends f{constructor(t,n){super(),this.x=t,this.y=n}}function Kr(e){return o([e.x,e.y])}function Ht(e,t,n){return new j(n(e.x,t.x),n(e.y,t.y))}const Rr="src/vec/vec2f.gleam";function Cr(e,t){return Ht(e,t,zn)}function Nr(e){let n=Kr(e),r=J(n,s=>s*s);return qn(r)}function Fr(e,t){let r=Ht(e,t,Ln);return Nr(r)}function Wt(e,t){let n,r=Fr(e,t);n=On(r);let s=n,i;if(s instanceof x)i=s[0];else throw q("let_assert",Rr,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const Q="src/app.gleam";class z extends f{constructor(t,n,r,s,i,a,l,u,c){super(),this.avatar=t,this.camera=n,this.speed=r,this.objects=s,this.mouse_pos=i,this.drag=a,this.current_time=l,this.paused=u,this.consts=c}}class $e extends f{constructor(t,n){super(),this.pos=t,this.dir=n}}let Vt=class extends f{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class we extends f{}class Dr extends f{constructor(t){super(),this.collected_time=t}}class Gt extends f{constructor(t,n){super(),this.lagging_dir=t,this.start_move_time=n}}class ve extends f{}class Ur extends f{constructor(t){super(),this.start_pos=t}}class Y extends f{}class Jt extends f{}class Xr extends f{constructor(t,n,r,s,i,a,l,u){super(),this.background_picture=t,this.shadow_picture=n,this.color_dark_blue=r,this.color_white=s,this.color_white_transparent=i,this.color_yellow=a,this.color_orange=l,this.color_dark_blue_transparent=u}}function Yr(e){let t,n=e.objects;t=J(n,s=>rn(s.kind,new we)&&Wt(e.avatar.pos,s.pos)<.8?new Vt(s.pos,s.height,new Dr(e.current_time)):s);let r=t;return new z(e.avatar,e.camera,e.speed,r,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function fe(e,t){return new z(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new ve,e.current_time,t,e.consts)}function _t(e){return e instanceof Y?new Jt:new Y}function Hr(e,t){let n=e.speed*t,r=De(n,e.avatar.dir),s,i;return s=r[0],i=r[1],new z((()=>{let a=e.avatar;return new $e(Cr(e.avatar.pos,new j(s,i)),a.dir)})(),e.camera,e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function pt(e,t,n){let r=Ve((()=>{let i=Ne(0,10);return J(i,a=>{let l=te()/10*a+n,u;return a%2===0?u=250:u=140,De(u,l)})})()),s=R(r,e);return Rt(s,t,10)}function ht(e,t,n){let r=e/2e3;if(n instanceof A){let s=n[0];if(e-s<=1e3){let i=Ze(1e3),a=R(i,t.color_white);return N(a)}else return pt(t.color_white,t.color_yellow,r)}else return pt(t.color_yellow,t.color_orange,r)}function wt(e,t){let n;t?n=e.color_white:n=e.color_yellow;let r=n,s=Ze(1),i=R(s,r);return N(i)}function Wr(e,t,n,r){if(n)return e instanceof we?wt(r,!1):wt(r,!0);if(e instanceof we)return ht(t,r,new xt);{let s=e.collected_time;return ht(t,r,new A(s))}}function Vr(e){let t=Ge(200,5e3),n=ae(t,-100),r=R(n,e);return N(r)}function Gr(e){let t=Ge(4,12),n=k(o([t,P(t,8,0)])),r=R(n,e);return N(r)}function Jr(e){let t=Ve(o([[2,0],[11,6],[2,12]])),n=R(t,e);return N(n)}function Ie(e,t){let n;if(e==="a")n=$(o([[3,1],[11,1],[11,11],[1,11],[1,5],[11,5]]));else if(e==="b")n=$(o([[1,3],[11,3],[11,11],[1,11],[1,-1]]));else if(e==="c")n=$(o([[11,11],[1,11],[1,1],[11,1],[11,3]]));else if(e==="d"){let s=Ie("b",t),i=nr(s,-1);n=ae(i,12)}else if(e==="e")n=$(o([[9,11],[1,11],[1,1],[11,1],[11,7],[1,7]]));else if(e==="g")n=k(o([$(o([[0,1],[10,1],[10,7],[1,7],[1,1]])),$(o([[3,7],[3,11],[11,11],[11,13]]))]));else if(e==="i")n=k(o([$(o([[6,-2],[6,0]])),$(o([[2,3],[6,3],[6,11]])),$(o([[0,11],[12,11]]))]));else if(e==="j")n=k(o([$(o([[11,-2],[11,0]])),$(o([[11,2],[11,11],[1,11],[1,9]]))]));else if(e==="l")n=$(o([[12,11],[1,11],[1,0]]));else if(e==="m")n=k(o([$(o([[1,12],[1,1],[11,1],[11,12]])),$(o([[6,1],[6,12]]))]));else if(e==="n")n=$(o([[1,12],[1,1],[9,1],[9,3],[11,3],[11,12]]));else if(e==="o")n=$(o([[0,1],[11,1],[11,11],[1,11],[1,1]]));else if(e==="r")n=$(o([[1,12],[1,1],[11,1],[11,3]]));else if(e==="s")n=$(o([[11,1],[2,1],[2,6],[11,6],[11,11],[1,11],[1,9]]));else if(e==="t")n=k(o([$(o([[0,2],[12,2]])),$(o([[5,-1],[5,11],[12,11]]))]));else if(e==="v")n=$(o([[11,0],[11,11],[4,11],[1,8],[1,0]]));else if(e==="y")n=k(o([$(o([[11,0],[11,13],[1,13]])),$(o([[11,9],[1,9],[1,0]]))]));else if(e==="←")n=k(o([$(o([[6,11],[5,11],[1,7],[1,5],[5,1],[6,1]])),$(o([[1,6],[12,6]]))]));else if(e==="→"){let s=Ie("←",t),i=Kt(s,jt(Ue()));n=P(i,12,12)}else n=We();return Rt(n,t,2)}function Zr(e,t,n){let r=he(t/400)*.1,s=he(t/1600)*6,i=Ie(e,n),a=R(i,n),l=N(a),u=P(l,-6,-6),c=Kt(u,jt(r));return P(c,6,6+s)}function Zt(e,t,n){let r=50,s=e.start_move_time,i=s+r;if(n>=i)return t;{let l=K(n-s,r);return t*l+e.lagging_dir*(1-l)}}function Qr(e){return K(1,K(e,.2)+1)}function es(e,t){let n=De(e,t),r,s;return r=n[0],s=n[1],new j(r,s)}function je(e,t,n,r){return Wn(r-t,n-e)}function ts(e){for(;;){let t=e,n=te(),r=Ue(),s=ie(r),i=t;if(i>r)e=i-n;else{let a=t;if(a<=s)e=a+n;else return t}}}function Ae(e,t,n){return(t-e)*n+e}function dt(e,t,n,r,s,i,a,l,u){let c=u,_=Pn(K(l,c)),p=Ne(0,u),h=J(p,d=>{let w=d,y=K(w,c-1),v=Be(Ae(e,r,y),Ae(t,s,y),Ae(n,i,y)),S;if(v instanceof x)S=v[0];else throw q("let_assert",Q,"app",643,"view_gradient","Pattern match failed, no pattern matched the value.",{value:v,start:16168,end:16395,pattern_start:16179,pattern_end:16191});let B=Ge(a,_),O=Je(B,_*w),m=R(O,S);return N(m)});return k(h)}const de=300,ge=300,V=new j(150,150);function ns(){let e=o([dt(.85,.6,.9,.7,.4,.98,de,ge/2,50),(()=>{let t=dt(.6,.4,.95,.6,.7,.8,de,ge/2,50);return Je(t,V.y)})()]);return k(e)}function rs(e){let t=.8*te(),n=Pe(0,1,1,.5),r;if(n instanceof x)r=n[0];else throw q("let_assert",Q,"app",23,"init","Pattern match failed, no pattern matched the value.",{value:n,start:527,end:604,pattern_start:538,pattern_end:565});let s=Be(.6,.7,.7),i;if(s instanceof x)i=s[0];else throw q("let_assert",Q,"app",24,"init","Pattern match failed, no pattern matched the value.",{value:s,start:607,end:670,pattern_start:618,pattern_end:637});let a=Pe(.75,.5,.4,.05),l;if(a instanceof x)l=a[0];else throw q("let_assert",Q,"app",25,"init","Pattern match failed, no pattern matched the value.",{value:a,start:673,end:760,pattern_start:684,pattern_end:715});let u=Be(.12,1,.7),c;if(u instanceof x)c=u[0];else throw q("let_assert",Q,"app",27,"init","Pattern match failed, no pattern matched the value.",{value:u,start:763,end:824,pattern_start:774,pattern_end:790});let _,p=Ne(0,200);_=J(p,d=>{let w=d,y=es((w+1)*2+10,w/20*te()),v=he(w/5*te());return new Vt(y,v,new we)});let h=_;return new z(new $e(new j(0,0),t),new Gt(t,0),.01,h,new j(0,0),new ve,0,new Y,new Xr(ns(),Vr(l),i,Dn,r,c,Fn,l))}const ss=.005,is=.4;function gt(e,t){return new z(e.avatar,e.camera,St(e.speed+t*(e.speed*.05),ss,is),e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}const as=.09;function ls(e,t){return new $e(e.pos,e.dir+as*t)}function Ke(e,t){return new z(ls(e.avatar,t),new Gt(Zt(e.camera,e.avatar.dir,e.current_time),e.current_time),e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function us(e,t){let n=e.drag;if(n instanceof ve)return e;{let r=n.start_pos,s=2,i=1e-5,a=e.mouse_pos.x-r.x,l,u;if(a>0){let v=At(0,a-s);u=Ee(v,2)}else{let v=kt(0,a+s),S=Ee(v,2);u=Pt(S,ie)}l=Bt(u,0);let p=l,h,d=p*i;h=St(d,-.03,.03);let y=h*t;return Ke(e,y)}}function cs(e,t){if(e.paused instanceof Y)if(t instanceof Oe){let r=t[0];return new z(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.consts)}else{if(t instanceof Me)return t[0]instanceof Le?fe(e,_t(e.paused)):e;if(t instanceof qe){let r=t[0],s=t[1];return new z(e.avatar,e.camera,e.speed,e.objects,new j(r,s),e.drag,e.current_time,e.paused,e.consts)}else return t instanceof ze&&t[0]instanceof oe?fe(e,new Jt):e}else if(t instanceof Oe){let r=t[0],s=r-e.current_time,i=new z(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.consts),a=Hr(i,s),l=us(a,s);return Yr(l)}else if(t instanceof Me){let r=t[0];return r instanceof Nt?Ke(e,-1):r instanceof Ft?Ke(e,1):r instanceof Dt?gt(e,1):r instanceof Ut?gt(e,-1):r instanceof Le?fe(e,_t(e.paused)):e}else if(t instanceof qe){let r=t[0],s=t[1];return new z(e.avatar,e.camera,e.speed,e.objects,new j(r,s),e.drag,e.current_time,e.paused,e.consts)}else return t instanceof ze?t[0]instanceof oe?e.mouse_pos.x<=30&&e.mouse_pos.y>=ge-30?fe(e,new Y):new z(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new Ur(e.mouse_pos),e.current_time,e.paused,e.consts):e:t instanceof Ct&&t[0]instanceof oe?new z(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new ve,e.current_time,e.paused,e.consts):e}const pe=.7853981634;function fs(e,t,n,r,s){let i=je(0,0,n,e.height),a=n>50,l;a?l=1:l=Qr(n);let u=l,c=new j(K(t*V.x,pe),ie(K(i*V.x,pe))),_,p=Wr(e.kind,r,a,s),h=G(p,u);_=P(h,c.x,c.y);let d=_,w;if(a)w=We();else{let S=je(0,0,n,-10),B=new j(c.x,ie(K(S*V.x,pe))),O=s.shadow_picture,m=G(O,u);w=P(m,B.x,B.y)}return k(o([w,d]))}const Qe=12,Re=3;function be(e,t){let n=Se(e);return((Qe+Re)*n-Re)*t}function ye(e,t,n){let r=Kn(e),s=$t(r,(i,a)=>{let l=Zr(i,t+a*8e3,n);return ae(l,a*(Qe+Re))});return k(s)}function os(e,t){let n="cielos",r=1.5,s=be(n,r),i="by agj",a=.75,l=be(i,a),u=k(o([(()=>{let c=ye(n,e,t.color_dark_blue);return G(c,r)})(),(()=>{let c=ye(i,e,t.color_dark_blue),_=G(c,a);return P(_,s-l,40)})()]));return ae(u,de*.5-s*.5)}function _s(e,t){let n=o(["move ←→","collect stars"]),r=.75,s,a=vt(n,(h,d)=>yt(Et(Se(h),Se(d)))),l=pn(a),u=Pt(l,h=>be(h,r));s=Bt(u,0);let c=s,_=k($t(n,(d,w)=>{let y=ye(d,e,t.color_dark_blue);return Je(y,Qe*2.5*w)})),p=G(_,r);return ae(p,de*.5-c*.5)}function ps(e,t,n){return k(o([(()=>{let r=Ze(15),s=R(r,n.color_white_transparent);return N(s)})(),(()=>{if(e instanceof Y){let r="esc",s=.5,i,a=ye(r,t,n.color_white_transparent);i=G(a,s);let l=i;return k(o([(()=>{let u=Jr(n.color_dark_blue);return P(u,-6,-6)})(),P(l,be(r,s)*-.5,-27)]))}else{let r=Gr(n.color_dark_blue);return P(r,-6,-6)}})()]))}function hs(e){return k(o([e.paused instanceof Y?k(o([(()=>{let n=os(e.current_time,e.consts);return P(n,0,80)})(),(()=>{let n=_s(e.current_time,e.consts);return P(n,0,200)})()])):We(),(()=>{let t=ps(e.paused,e.current_time,e.consts);return P(t,17,ge-17)})()]))}function ws(e){let t,n=e.avatar;t=new $e(n.pos,Zt(e.camera,e.avatar.dir,e.current_time));let r=t,s,i=k((()=>{let l=e.objects,u=wn(l,_=>{let p=je(r.pos.x,r.pos.y,_.pos.x,_.pos.y),h=ts(p-r.dir),d=at(Wt(r.pos,_.pos));return at(h)<=pe?new x([_,h,d]):new X(void 0)}),c=vt(u,(_,p)=>yt(Tn(_[2],p[2])));return J(c,_=>fs(_[0],_[1],_[2],e.current_time,e.consts))})());s=P(i,V.x,V.y);let a=s;return k(o([e.consts.background_picture,a,hs(e)]))}function ds(){return jr(rs,cs,ws,"#app")}ds();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const et=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",et("mousedown",1));window.addEventListener("touchend",et("mouseup",0));window.addEventListener("touchmove",et("mousemove",void 0));
