(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class f{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class Q{static fromArray(t,n){let r=n||new x;for(let s=t.length-1;s>=0;--s)r=new Ve(t[s],r);return r}[Symbol.iterator](){return new kt(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof x}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function w(e,t){return new Ve(e,t)}function g(e,t){return Q.fromArray(e,t)}class kt{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof x)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class x extends Q{}class Ve extends Q{constructor(t,n){super(),this.head=t,this.tail=n}}class ce extends f{static isResult(t){return t instanceof ce}}class v extends ce{constructor(t){super(),this[0]=t}isOk(){return!0}}const Pt=e=>e instanceof v,Tt=e=>e[0];class U extends ce{constructor(t){super(),this[0]=t}isOk(){return!1}}function R(e,t){return t===0?0:e/t}function S(e,t,n,r,s,i,a){let l=new globalThis.Error(i);l.gleam_error=e,l.file=t,l.module=n,l.line=r,l.function=s,l.fn=s;for(let u in a)l[u]=a[u];return l}class T extends f{}class E extends f{}class ke extends f{}function St(e){return e instanceof T?new ke:e instanceof E?e:new T}class m extends f{constructor(t){super(),this[0]=t}}class At extends f{}class k extends f{}class G extends f{}function V(e,t){for(;;){let n=e,r=t;if(n instanceof x)return r;{let s=n.head;e=n.tail,t=w(s,r)}}}function P(e){return V(e,g([]))}function Et(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return P(i);{let a=r.head,l=r.tail,u,c=s(a);if(c instanceof v){let _=c[0];u=w(_,i)}else u=i;let o=u;e=l,t=s,n=o}}}function Lt(e,t){return Et(e,t,g([]))}function It(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return P(i);{let a=r.head;e=r.tail,t=s,n=w(s(a),i)}}}function te(e,t){return It(e,t,g([]))}function Mt(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof x)return P(l);{let u=s.head,c=s.tail,o=w(i(u,a),l);e=c,t=i,n=a+1,r=o}}}function Ot(e,t){return Mt(e,t,0,g([]))}function jt(e,t){for(;;){let n=e,r=t;if(n instanceof x)return P(r);{let s=n.head;e=n.tail,t=V(s,r)}}}function qt(e){return jt(e,g([]))}function Kt(e,t){return qt(te(e,t))}function Nt(e,t,n,r,s,i){for(;;){let a=e,l=t,u=n,c=r,o=s,_=i,p=w(o,u);if(a instanceof x)return c instanceof k?w(P(p),_):w(p,_);{let d=a.head,h=a.tail,b=l(o,d);if(c instanceof k)if(b instanceof T)e=h,t=l,n=p,r=c,s=d,i=_;else if(b instanceof E)e=h,t=l,n=p,r=c,s=d,i=_;else{let $;c instanceof k?$=w(P(p),_):$=w(p,_);let A=$;if(h instanceof x)return w(g([d]),A);{let L=h.head,I=h.tail,y,M=l(d,L);M instanceof T?y=new k:M instanceof E?y=new k:y=new G;let C=y;e=I,t=l,n=g([d]),r=C,s=L,i=A}}else if(b instanceof T){let $;c instanceof k?$=w(P(p),_):$=w(p,_);let A=$;if(h instanceof x)return w(g([d]),A);{let L=h.head,I=h.tail,y,M=l(d,L);M instanceof T?y=new k:M instanceof E?y=new k:y=new G;let C=y;e=I,t=l,n=g([d]),r=C,s=L,i=A}}else if(b instanceof E){let $;c instanceof k?$=w(P(p),_):$=w(p,_);let A=$;if(h instanceof x)return w(g([d]),A);{let L=h.head,I=h.tail,y,M=l(d,L);M instanceof T?y=new k:M instanceof E?y=new k:y=new G;let C=y;e=I,t=l,n=g([d]),r=C,s=L,i=A}}else e=h,t=l,n=p,r=c,s=d,i=_}}}function Rt(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof x)return V(i,l);if(i instanceof x)return V(s,l);{let u=s.head,c=s.tail,o=i.head,_=i.tail,p=a(u,o);p instanceof T?(e=c,t=i,n=a,r=w(u,l)):(p instanceof E,e=s,t=_,n=a,r=w(o,l))}}}function Ft(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return P(i);{let a=r.tail;if(a instanceof x){let l=r.head;return P(w(P(l),i))}else{let l=r.head,u=a.head,c=a.tail,o=Rt(l,u,s,g([]));e=c,t=s,n=w(o,i)}}}}function Ct(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof x)return V(i,l);if(i instanceof x)return V(s,l);{let u=s.head,c=s.tail,o=i.head,_=i.tail,p=a(u,o);p instanceof T?(e=s,t=_,n=a,r=w(o,l)):(p instanceof E,e=c,t=i,n=a,r=w(u,l))}}}function zt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return P(i);{let a=r.tail;if(a instanceof x){let l=r.head;return P(w(P(l),i))}else{let l=r.head,u=a.head,c=a.tail,o=Ct(l,u,s,g([]));e=c,t=s,n=w(o,i)}}}}function Bt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return r;if(s instanceof k){if(r.tail instanceof x)return r.head;e=Ft(r,i,g([])),t=new G,n=i}else if(r.tail instanceof x){let l=r.head;return P(l)}else e=zt(r,i,g([])),t=new k,n=i}}function Dt(e,t){if(e instanceof x)return e;{let n=e.tail;if(n instanceof x)return e;{let r=e.head,s=n.head,i=n.tail,a,l=t(r,s);l instanceof T?a=new k:l instanceof E?a=new k:a=new G;let u=a,c=Nt(i,t,g([r]),u,s,g([]));return Bt(c,new k,t)}}}function Xt(e,t,n){for(;;){let r=e,s=t,i=n,a=ln(r,s);if(a instanceof T)e=r,t=s-1,n=w(s,i);else{if(a instanceof E)return w(s,i);e=r,t=s+1,n=w(s,i)}}}function Pe(e,t){return Xt(e,t,g([]))}function Ht(e){return e.toString()}function Yt(e){const t=Ut(e);return t?Q.fromArray(Array.from(t).map(n=>n.segment)):Q.fromArray(e.match(/./gsu))}let Oe;function Ut(e){if(globalThis.Intl&&Intl.Segmenter)return Oe||=new Intl.Segmenter,Oe.segment(e)[Symbol.iterator]()}function Vt(e){return Math.ceil(e)}function Wt(e){return Math.floor(e)}function je(e){return Math.round(e)}function Gt(e,t){return Math.pow(e,t)}function ne(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function Zt(e,t){return e===t?new E:e<t?new T:new ke}function Jt(e,t){return e<t?e:t}function Qt(e,t){return e>t?e:t}function We(e,t,n){let s=Jt(e,n);return Qt(s,t)}function qe(e){return e>=0?e:0-e}function en(e,t){let n=Vt(t)-t>0;return e<0&&n||e===0&&t<0?new U(void 0):new v(Gt(e,t))}function tn(e){return en(e,.5)}function Te(e){return-1*e}function Ke(e){return e>=0?je(e):0-je(Te(e))}function nn(e,t){for(;;){let n=e,r=t;if(n instanceof x)return r;{let s=n.head;e=n.tail,t=s+r}}}function rn(e){return nn(e,0)}function Ne(e,t){if(t===0)return new U(void 0);{let n=t;return new v(R(e,n))}}function sn(e,t){return e+t}function Re(e,t){return e*t}function an(e,t){return e-t}function ln(e,t){return e===t?new E:e<t?new T:new ke}function un(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof x)return i;{let a=r.head;e=r.tail,t=s,n=i+s+a}}}function cn(e,t){if(e instanceof x)return"";{let n=e.head,r=e.tail;return un(r,t,n)}}function fn(e,t){return Yt(e)}function re(e,t){if(e instanceof v){let n=e[0];return t(n)}else return e}const Fe="src/gleam_community/colour.gleam";class Ge extends f{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class on extends f{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function se(e){return e>1||e<0?new U(void 0):new v(e)}function _e(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,a=s*2,l=s*3;return i<1?t+(n-t)*s*6:a<1?n:l<2?t+(n-t)*(2/3-s)*6:t}function _n(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let a=s,l=n*2-a,u=_e(e+1/3,l,a),c=_e(e,l,a),o=_e(e-1/3,l,a);return[u,c,o,r]}function de(e,t,n,r){return re(se(e),s=>re(se(t),i=>re(se(n),a=>re(se(r),l=>new v(new on(s,i,a,l))))))}function we(e,t,n){return de(e,t,n,1)}function pn(e){if(e instanceof Ge){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return _n(t,n,r,s)}}function Ce(e){let t=pn(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let a=u=>{let c,_=Re(u,1e4),p=Ke(_),d=p;c=Ne(d,100);let h=c,b;if(h instanceof v)b=h[0];else throw S("let_assert",Fe,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:h,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return b},l=u=>{let c,_=Re(u,1e3),p=Ke(_),d=p;c=Ne(d,1e3);let h=c,b;if(h instanceof v)b=h[0];else throw S("let_assert",Fe,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:h,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return b};return cn(g(["rgba(",ne(a(n))+"%,",ne(a(r))+"%,",ne(a(s))+"%,",ne(l(i)),")"]),"")}const hn=new Ge(.9607843137254902,.4745098039215686,0,1);function dn(e){return Math.sin(e)}function wn(){return Math.PI}function gn(e,t){return Math.atan2(e,t)}function xn(e){return Math.cos(e)}function bn(e,t){return gn(e,t)}function vn(e){return xn(e)}function Se(e){return dn(e)}function Ae(e,t){let n=e*vn(t),r=e*Se(t);return[n,r]}function Ze(){return wn()}function Z(){return 2*Ze()}function yn(){return Math.PI}class Je extends f{}class Qe extends f{constructor(t,n){super(),this[0]=t,this.closed=n}}class et extends f{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class tt extends f{constructor(t,n){super(),this.text=t,this.style=n}}class $n extends f{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class nt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Ee extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class mn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class rt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class st extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class kn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class it extends f{constructor(t){super(),this[0]=t}}class Pn extends f{}class at extends f{}class Tn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Sn extends f{constructor(t,n){super(),this.size_px=t,this.font_family=n}}class ze extends f{constructor(t){super(),this[0]=t}}function lt(){return new Je}function Le(e){return new Qe(e,!0)}function Ie(e,t){return Le(g([[0,0],[e,0],[e,t],[0,t]]))}function An(e,t){return new tt(e,new Sn(t,"sans-serif"))}function j(e,t,n){return new rt(e,[t,n])}function ut(e,t){return j(e,t,0)}function ct(e,t){return j(e,0,t)}function En(e,t){return new st(e,[t,t])}function F(e,t){return new nt(e,t)}function Ln(e,t,n){return new Ee(e,new Tn(t,n))}function X(e){return new Ee(e,new at)}function q(e){return new it(e)}function ft(e){return new et(e,new ze(0),new ze(2*yn()))}class ge extends f{constructor(t){super(),this[0]=t}}class xe extends f{constructor(t){super(),this[0]=t}}class In extends f{constructor(t){super(),this[0]=t}}class be extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class ve extends f{constructor(t){super(),this[0]=t}}class ot extends f{constructor(t){super(),this[0]=t}}class _t extends f{}class pt extends f{}class ht extends f{}class dt extends f{}class Mn extends f{}class On extends f{}class jn extends f{}class qn extends f{}class Kn extends f{}class Nn extends f{}class Rn extends f{}class Fn extends f{}class Cn extends f{}class ye extends f{}class zn extends f{}class ae extends f{}class Bn extends f{}class Dn extends f{}function Xn(e){return document.querySelector(e).getContext("2d")}function wt(e){window.requestAnimationFrame(t=>{e(t)})}function pe(e,t){window.addEventListener(e,t)}function Hn(e){return e.keyCode}function H(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function Y(e){return window.PAINT_STATE?e in window.PAINT_STATE?new v(window.PAINT_STATE[e]):new U(void 0):new U(void 0)}function Yn(e){return e.canvas.clientWidth}function Un(e){return e.canvas.clientHeight}function Vn(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function Wn(e,t,n,r){let s=Pt(t)?Tt(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function Gn(e){e.reset()}function Zn(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function Jn(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const a of t){let l=a[0],u=a[1];i?e.lineTo(l,u):(e.moveTo(l,u),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function Qn(e,t,n){e.font=n,e.fillText(t,0,0)}function z(e){e.save()}function B(e){e.restore()}function er(e,t){e.fillStyle=t}function tr(e,t){e.strokeStyle=t}function nr(e,t){e.lineWidth=t}function rr(e,t,n){e.translate(t,n)}function sr(e,t,n){e.scale(t,n)}function ir(e,t){e.rotate(t)}function ar(e,t,n,r){e.drawImage(t,0,0,n,r)}function lr(e,t){e.imageSmoothingEnabled=t}const J="src/paint/canvas.gleam";class ur extends f{constructor(t,n){super(),this.width=t,this.height=n}}class le extends f{constructor(t,n){super(),this.fill=t,this.stroke=n}}function N(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof Je)return;if(r instanceof Qe){let a=r[0],l=r.closed;return Jn(s,a,l,i.fill,i.stroke)}else if(r instanceof et){let a=r.radius,l=r.start,u=r.end,c;c=l[0];let o;return o=u[0],Zn(s,a,c,o,i.fill,i.stroke)}else if(r instanceof tt){let a=r.text,l=r.style,u,c;return u=l.size_px,c=l.font_family,z(s),Qn(s,a,Ht(u)+"px "+c),B(s)}else if(r instanceof $n){let a=r.width_px,l=r.height_px,u=r[0].id,c=Y(u),o;if(c instanceof v)o=c[0];else throw S("let_assert",J,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:c,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return ar(s,o,a,l)}else if(r instanceof nt){let a=r[0],l=r[1];return z(s),er(s,Ce(l)),N(a,s,new le(!0,i.stroke)),B(s)}else if(r instanceof Ee){let a=r[0],l=r[1];if(l instanceof at)e=a,t=s,n=new le(i.fill,!1);else{let u=l[0],c=l[1];return z(s),tr(s,Ce(u)),nr(s,c),N(a,s,new le(i.fill,!0)),B(s)}}else if(r instanceof mn){let a=r[0],l=r[1];return z(s),lr(s,l instanceof Pn),N(a,s,i),B(s)}else if(r instanceof rt){let a=r[0],l=r[1],u,c;return u=l[0],c=l[1],z(s),rr(s,u,c),N(a,s,i),B(s)}else if(r instanceof st){let a=r[0],l=r[1],u,c;return u=l[0],c=l[1],z(s),sr(s,u,c),N(a,s,i),B(s)}else if(r instanceof kn){let a=r[0],l=r[1],u;return u=l[0],z(s),ir(s,u),N(a,s,i),B(s)}else{let a=r[0];if(a instanceof x)return;{let l=a.head,u=a.tail;N(l,s,i),e=new it(u),t=s,n=i}}}}function cr(e){return e===32?new m(new Mn):e===37?new m(new _t):e===38?new m(new ht):e===39?new m(new pt):e===40?new m(new dt):e===87?new m(new On):e===65?new m(new jn):e===83?new m(new qn):e===68?new m(new Kn):e===90?new m(new Nn):e===88?new m(new Rn):e===67?new m(new Fn):e===18?new m(new Cn):e===27?new m(new ye):e===8?new m(new zn):new At}const fr=new le(!1,!0);function gt(e,t,n,r){return s=>{let i=Y(r),a;if(i instanceof v)a=i[0];else throw S("let_assert",J,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let l=n(a,new ge(s));H(l,r);let u=t(l);return Gn(e),N(u,e,fr),wt(gt(e,t,n,r))}}function or(e,t,n,r){let s=Xn(r),i=e(new ur(Yn(s),Un(s)));H(i,r);let a=(u,c)=>pe(u,o=>{let _=cr(Hn(o));if(_ instanceof m){let p=_[0],d=Y(r),h;if(d instanceof v)h=d[0];else throw S("let_assert",J,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:d,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let b=t(h,c(p));return H(b,r)}else return});a("keydown",u=>new xe(u)),a("keyup",u=>new In(u)),pe("mousemove",u=>{let c=Vn(s,u),o,_;o=c[0],_=c[1];let p=Y(r),d;if(p instanceof v)d=p[0];else throw S("let_assert",J,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:p,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let h=t(d,new be(o,_));H(h,r)});let l=(u,c,o)=>pe(u,_=>{let p="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,d=Y(p);H(_,p);let h=I=>Wn(_,d,I,o),b=I=>{let y=Y(r),M;if(y instanceof v)M=y[0];else throw S("let_assert",J,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:y,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let C=t(M,c(I));return H(C,r)};h(0)&&b(new ae),h(1)&&b(new Bn),h(2)&&b(new Dn)});return l("mousedown",u=>new ve(u),!0),l("mouseup",u=>new ot(u),!1),wt(gt(s,n,t,r))}class K extends f{constructor(t,n){super(),this.x=t,this.y=n}}function _r(e){return g([e.x,e.y])}function xt(e,t,n){return new K(n(e.x,t.x),n(e.y,t.y))}const pr="src/vec/vec2f.gleam";function hr(e,t){return xt(e,t,sn)}function dr(e){let n=_r(e),r=te(n,s=>s*s);return rn(r)}function wr(e,t){let r=xt(e,t,an);return dr(r)}function gr(e,t){let n,r=wr(e,t);n=tn(r);let s=n,i;if(s instanceof v)i=s[0];else throw S("let_assert",pr,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const W="src/app.gleam";class O extends f{constructor(t,n,r,s,i,a,l,u,c){super(),this.avatar=t,this.camera=n,this.speed=r,this.objects=s,this.mouse_pos=i,this.drag=a,this.current_time=l,this.paused=u,this.consts=c}}class fe extends f{constructor(t,n){super(),this.pos=t,this.dir=n}}let Be=class extends f{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class bt extends f{}class xr extends f{}class vt extends f{constructor(t,n){super(),this.lagging_dir=t,this.start_move_time=n}}class oe extends f{}class br extends f{constructor(t){super(),this.start_pos=t}}class D extends f{}class yt extends f{}class vr extends f{constructor(t,n,r,s,i,a,l){super(),this.background_picture=t,this.shadow_picture=n,this.color_dark_blue=r,this.color_white_transparent=s,this.color_yellow=i,this.color_orange=a,this.color_dark_blue_transparent=l}}function ie(e,t){return new O(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new oe,e.current_time,t,e.consts)}function De(e){return e instanceof D?new yt:new D}function yr(e,t){let n=e.speed*t,r=Ae(n,e.avatar.dir),s,i;return s=r[0],i=r[1],new O((()=>{let a=e.avatar;return new fe(hr(e.avatar.pos,new K(s,i)),a.dir)})(),e.camera,e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function $r(e,t,n){let r=An(e,20),s=F(r,n),i=X(s);return j(i,0,Se(t/1600)*12)}function Xe(e,t,n){let r=fn(e),s=Ot(r,(i,a)=>{let l=$r(i,t+a*8e3,n);return ut(l,a*20)});return q(s)}function mr(e,t){return q(g([Xe("cielos",e,t.color_dark_blue),(()=>{let n=Xe("by agj",e,t.color_dark_blue);return j(n,50,50)})()]))}function kr(e,t){let n=e/2e3,r=Le((()=>{let i=Pe(0,10);return te(i,a=>{let l=Z()/10*a+n,u;return a%2===0?u=250:u=140,Ae(u,l)})})()),s=F(r,t.color_yellow);return Ln(s,t.color_orange,10)}function Pr(e){let t=ft(1),n=F(t,e.color_yellow);return X(n)}function Tr(e,t,n,r){return e instanceof bt?n?Pr(r):kr(t,r):n?lt():r.shadow_picture}function Sr(e){let t=Ie(200,5e3),n=ut(t,-100),r=F(n,e);return X(r)}function Ar(e){let t=Ie(4,12),n=q(g([t,j(t,8,0)])),r=F(n,e);return X(r)}function Er(e){let t=Le(g([[2,0],[11,6],[2,12]])),n=F(t,e);return X(n)}function Lr(e,t){return q(g([(()=>{let n=ft(15),r=F(n,t.color_white_transparent);return X(r)})(),(()=>{if(e instanceof D){let n=Er(t.color_dark_blue);return j(n,-6,-6)}else{let n=Ar(t.color_dark_blue);return j(n,-6,-6)}})()]))}function $t(e,t,n){let r=100,s=e.start_move_time,i=s+r;if(n>=i)return t;{let l=R(n-s,r);return t*l+e.lagging_dir*(1-l)}}function Ir(e){return R(1,R(e,.2)+1)}function Mr(e,t){let n=Ae(e,t),r,s;return r=n[0],s=n[1],new K(r,s)}function mt(e,t,n,r){return bn(r-t,n-e)}function Or(e){for(;;){let t=e,n=Z(),r=Ze(),s=Te(r),i=t;if(i>r)e=i-n;else{let a=t;if(a<=s)e=a+n;else return t}}}function he(e,t,n){return(t-e)*n+e}function He(e,t,n,r,s,i,a,l,u){let c=u,o=Wt(R(l,c)),_=Pe(0,u),p=te(_,d=>{let h=d,b=R(h,c-1),$=we(he(e,r,b),he(t,s,b),he(n,i,b)),A;if($ instanceof v)A=$[0];else throw S("let_assert",W,"app",496,"view_gradient","Pattern match failed, no pattern matched the value.",{value:$,start:11879,end:12106,pattern_start:11890,pattern_end:11902});let L=Ie(a,o),I=ct(L,o*h),y=F(I,A);return X(y)});return q(p)}const Ye=300,ue=300;function jr(e){return q(g([(()=>{if(e.paused instanceof D){let n=mr(e.current_time,e.consts);return j(n,80,80)}else return lt()})(),(()=>{let t=Lr(e.paused,e.consts);return j(t,17,ue-17)})()]))}const ee=new K(150,150);function qr(){let e=g([He(.85,.6,.9,.7,.4,.98,Ye,ue/2,50),(()=>{let t=He(.6,.4,.95,.6,.7,.8,Ye,ue/2,50);return ct(t,ee.y)})()]);return q(e)}function Kr(e){let t=.8*Z(),n=de(0,1,1,.5),r;if(n instanceof v)r=n[0];else throw S("let_assert",W,"app",20,"init","Pattern match failed, no pattern matched the value.",{value:n,start:431,end:508,pattern_start:442,pattern_end:469});let s=we(.6,.7,.7),i;if(s instanceof v)i=s[0];else throw S("let_assert",W,"app",21,"init","Pattern match failed, no pattern matched the value.",{value:s,start:511,end:574,pattern_start:522,pattern_end:541});let a=de(.75,.5,.4,.05),l;if(a instanceof v)l=a[0];else throw S("let_assert",W,"app",22,"init","Pattern match failed, no pattern matched the value.",{value:a,start:577,end:664,pattern_start:588,pattern_end:619});let u=we(.12,1,.7),c;if(u instanceof v)c=u[0];else throw S("let_assert",W,"app",24,"init","Pattern match failed, no pattern matched the value.",{value:u,start:667,end:728,pattern_start:678,pattern_end:694});let o,_=Pe(0,200);o=Kt(_,d=>{let h=d,b=Mr((h+1)*2+10,h/20*Z()),$=Se(h/5*Z());return g([new Be(b,$,new bt),new Be(b,-10,new xr)])});let p=o;return new O(new fe(new K(0,0),t),new vt(t,0),.01,p,new K(0,0),new oe,0,new D,new vr(qr(),Sr(l),i,r,c,hn,l))}const Nr=.005,Rr=.4;function Ue(e,t){return new O(e.avatar,e.camera,We(e.speed+t*(e.speed*.05),Nr,Rr),e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}const Fr=.09;function Cr(e,t){return new fe(e.pos,e.dir+Fr*t)}function $e(e,t){return new O(Cr(e.avatar,t),new vt($t(e.camera,e.avatar.dir,e.current_time),e.current_time),e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function zr(e,t){let n=e.drag;if(n instanceof oe)return e;{let r=n.start_pos,s,i=(e.mouse_pos.x-r.x)*.001;s=We(i,-.02,.02);let l=s*t;return $e(e,l)}}function Br(e,t){if(e.paused instanceof D)if(t instanceof ge){let r=t[0];return new O(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.consts)}else{if(t instanceof xe)return t[0]instanceof ye?ie(e,De(e.paused)):e;if(t instanceof be){let r=t[0],s=t[1];return new O(e.avatar,e.camera,e.speed,e.objects,new K(r,s),e.drag,e.current_time,e.paused,e.consts)}else return t instanceof ve&&t[0]instanceof ae?ie(e,new yt):e}else if(t instanceof ge){let r=t[0],s=r-e.current_time,i=new O(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.consts),a=yr(i,s);return zr(a,s)}else if(t instanceof xe){let r=t[0];return r instanceof _t?$e(e,-1):r instanceof pt?$e(e,1):r instanceof ht?Ue(e,1):r instanceof dt?Ue(e,-1):r instanceof ye?ie(e,De(e.paused)):e}else if(t instanceof be){let r=t[0],s=t[1];return new O(e.avatar,e.camera,e.speed,e.objects,new K(r,s),e.drag,e.current_time,e.paused,e.consts)}else return t instanceof ve?t[0]instanceof ae?e.mouse_pos.x<=30&&e.mouse_pos.y>=ue-30?ie(e,new D):new O(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new br(e.mouse_pos),e.current_time,e.paused,e.consts):e:t instanceof ot&&t[0]instanceof ae?new O(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new oe,e.current_time,e.paused,e.consts):e}const me=.7853981634;function Dr(e,t,n,r,s){let i=mt(0,0,n,e.height),a=n>50,l;a?l=1:l=Ir(n);let u=l,c=new K(R(t*ee.x,me),Te(R(i*ee.x,me))),o=Tr(e.kind,r,a,s),_=En(o,u);return j(_,c.x,c.y)}function Xr(e){let t,n=e.avatar;t=new fe(n.pos,$t(e.camera,e.avatar.dir,e.current_time));let r=t,s,i=q((()=>{let l=e.objects,u=Lt(l,o=>{let _=mt(r.pos.x,r.pos.y,o.pos.x,o.pos.y),p=Or(_-r.dir),d=qe(gr(r.pos,o.pos));return qe(p)<=me?new v([o,p,d]):new U(void 0)}),c=Dt(u,(o,_)=>St(Zt(o[2],_[2])));return te(c,o=>Dr(o[0],o[1],o[2],e.current_time,e.consts))})());s=j(i,ee.x,ee.y);let a=s;return q(g([e.consts.background_picture,a,jr(e)]))}function Hr(){return or(Kr,Br,Xr,"#app")}Hr();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const Me=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",Me("mousedown",1));window.addEventListener("touchend",Me("mouseup",0));window.addEventListener("touchmove",Me("mousemove",void 0));
