(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class f{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class ee{static fromArray(t,n){let r=n||new g;for(let s=t.length-1;s>=0;--s)r=new lt(t[s],r);return r}[Symbol.iterator](){return new Ft(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof g}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}}function x(e,t){return new lt(e,t)}function o(e,t){return ee.fromArray(e,t)}class Ft{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof g)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}}class g extends ee{}class lt extends ee{constructor(t,n){super(),this.head=t,this.tail=n}}class he extends f{static isResult(t){return t instanceof he}}class b extends he{constructor(t){super(),this[0]=t}isOk(){return!0}}const Ct=e=>e instanceof b,Bt=e=>e[0];class z extends he{constructor(t){super(),this[0]=t}isOk(){return!1}}function F(e,t){return t===0?0:e/t}function L(e,t,n,r,s,i,a){let l=new globalThis.Error(i);l.gleam_error=e,l.file=t,l.module=n,l.line=r,l.function=s,l.fn=s;for(let u in a)l[u]=a[u];return l}class E extends f{}class M extends f{}class qe extends f{}function ut(e){return e instanceof E?new qe:e instanceof M?e:new E}class P extends f{constructor(t){super(),this[0]=t}}class Dt extends f{}class T extends f{}class Z extends f{}function W(e,t){for(;;){let n=e,r=t;if(n instanceof g)return r;{let s=n.head;e=n.tail,t=x(s,r)}}}function S(e){return W(e,o([]))}function Xt(e){if(e instanceof g)return new z(void 0);{let t=e.head;return new b(t)}}function zt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return S(i);{let a=r.head,l=r.tail,u,c=s(a);if(c instanceof b){let p=c[0];u=x(p,i)}else u=i;let _=u;e=l,t=s,n=_}}}function Ht(e,t){return zt(e,t,o([]))}function Yt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return S(i);{let a=r.head;e=r.tail,t=s,n=x(s(a),i)}}}function ne(e,t){return Yt(e,t,o([]))}function Ut(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof g)return S(l);{let u=s.head,c=s.tail,_=x(i(u,a),l);e=c,t=i,n=a+1,r=_}}}function ct(e,t){return Ut(e,t,0,o([]))}function Vt(e,t){for(;;){let n=e,r=t;if(n instanceof g)return S(r);{let s=n.head;e=n.tail,t=W(s,r)}}}function Wt(e){return Vt(e,o([]))}function Gt(e,t){return Wt(ne(e,t))}function Zt(e,t,n,r,s,i){for(;;){let a=e,l=t,u=n,c=r,_=s,p=i,h=x(_,u);if(a instanceof g)return c instanceof T?x(S(h),p):x(h,p);{let w=a.head,d=a.tail,v=l(_,w);if(c instanceof T)if(v instanceof E)e=d,t=l,n=h,r=c,s=w,i=p;else if(v instanceof M)e=d,t=l,n=h,r=c,s=w,i=p;else{let m;c instanceof T?m=x(S(h),p):m=x(h,p);let I=m;if(d instanceof g)return x(o([w]),I);{let O=d.head,j=d.tail,$,q=l(w,O);q instanceof E?$=new T:q instanceof M?$=new T:$=new Z;let B=$;e=j,t=l,n=o([w]),r=B,s=O,i=I}}else if(v instanceof E){let m;c instanceof T?m=x(S(h),p):m=x(h,p);let I=m;if(d instanceof g)return x(o([w]),I);{let O=d.head,j=d.tail,$,q=l(w,O);q instanceof E?$=new T:q instanceof M?$=new T:$=new Z;let B=$;e=j,t=l,n=o([w]),r=B,s=O,i=I}}else if(v instanceof M){let m;c instanceof T?m=x(S(h),p):m=x(h,p);let I=m;if(d instanceof g)return x(o([w]),I);{let O=d.head,j=d.tail,$,q=l(w,O);q instanceof E?$=new T:q instanceof M?$=new T:$=new Z;let B=$;e=j,t=l,n=o([w]),r=B,s=O,i=I}}else e=d,t=l,n=h,r=c,s=w,i=p}}}function Jt(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof g)return W(i,l);if(i instanceof g)return W(s,l);{let u=s.head,c=s.tail,_=i.head,p=i.tail,h=a(u,_);h instanceof E?(e=c,t=i,n=a,r=x(u,l)):(h instanceof M,e=s,t=p,n=a,r=x(_,l))}}}function Qt(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return S(i);{let a=r.tail;if(a instanceof g){let l=r.head;return S(x(S(l),i))}else{let l=r.head,u=a.head,c=a.tail,_=Jt(l,u,s,o([]));e=c,t=s,n=x(_,i)}}}}function en(e,t,n,r){for(;;){let s=e,i=t,a=n,l=r;if(s instanceof g)return W(i,l);if(i instanceof g)return W(s,l);{let u=s.head,c=s.tail,_=i.head,p=i.tail,h=a(u,_);h instanceof E?(e=s,t=p,n=a,r=x(_,l)):(h instanceof M,e=c,t=i,n=a,r=x(u,l))}}}function tn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return S(i);{let a=r.tail;if(a instanceof g){let l=r.head;return S(x(S(l),i))}else{let l=r.head,u=a.head,c=a.tail,_=en(l,u,s,o([]));e=c,t=s,n=x(_,i)}}}}function nn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return r;if(s instanceof T){if(r.tail instanceof g)return r.head;e=Qt(r,i,o([])),t=new Z,n=i}else if(r.tail instanceof g){let l=r.head;return S(l)}else e=tn(r,i,o([])),t=new T,n=i}}function ft(e,t){if(e instanceof g)return e;{let n=e.tail;if(n instanceof g)return e;{let r=e.head,s=n.head,i=n.tail,a,l=t(r,s);l instanceof E?a=new T:l instanceof M?a=new T:a=new Z;let u=a,c=Zt(i,t,o([r]),u,s,o([]));return nn(c,new T,t)}}}function rn(e,t,n){for(;;){let r=e,s=t,i=n,a=pt(r,s);if(a instanceof E)e=r,t=s-1,n=x(s,i);else{if(a instanceof M)return x(s,i);e=r,t=s+1,n=x(s,i)}}}function Ke(e,t){return rn(e,t,o([]))}function sn(e){return e.toString()}function ve(e){if(e==="")return 0;const t=ot(e);if(t){let n=0;for(const r of t)n++;return n}else return e.match(/./gsu).length}function an(e){const t=ot(e);return t?ee.fromArray(Array.from(t).map(n=>n.segment)):ee.fromArray(e.match(/./gsu))}let We;function ot(e){if(globalThis.Intl&&Intl.Segmenter)return We||=new Intl.Segmenter,We.segment(e)[Symbol.iterator]()}function ln(e){return Math.ceil(e)}function un(e){return Math.floor(e)}function Ge(e){return Math.round(e)}function cn(e,t){return Math.pow(e,t)}function se(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function fn(e,t){return e===t?new M:e<t?new E:new qe}function on(e,t){return e<t?e:t}function _n(e,t){return e>t?e:t}function _t(e,t,n){let s=on(e,n);return _n(s,t)}function Ze(e){return e>=0?e:0-e}function pn(e,t){let n=ln(t)-t>0;return e<0&&n||e===0&&t<0?new z(void 0):new b(cn(e,t))}function hn(e){return pn(e,.5)}function Ne(e){return-1*e}function Je(e){return e>=0?Ge(e):0-Ge(Ne(e))}function dn(e,t){for(;;){let n=e,r=t;if(n instanceof g)return r;{let s=n.head;e=n.tail,t=s+r}}}function wn(e){return dn(e,0)}function Qe(e,t){if(t===0)return new z(void 0);{let n=t;return new b(F(e,n))}}function gn(e,t){return e+t}function et(e,t){return e*t}function xn(e,t){return e-t}function pt(e,t){return e===t?new M:e<t?new E:new qe}function bn(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof g)return i;{let a=r.head;e=r.tail,t=s,n=i+s+a}}}function vn(e,t){if(e instanceof g)return"";{let n=e.head,r=e.tail;return bn(r,t,n)}}function yn(e,t){return an(e)}function $n(e,t){if(e instanceof b){let n=e[0];return new b(t(n))}else return e}function ie(e,t){if(e instanceof b){let n=e[0];return t(n)}else return e}function mn(e,t){return e instanceof b?e[0]:t}const tt="src/gleam_community/colour.gleam";class ht extends f{constructor(t,n,r,s){super(),this.r=t,this.g=n,this.b=r,this.a=s}}class kn extends f{constructor(t,n,r,s){super(),this.h=t,this.s=n,this.l=r,this.a=s}}function ae(e){return e>1||e<0?new z(void 0):new b(e)}function ge(e,t,n){let r;e<0?r=e+1:e>1?r=e-1:r=e;let s=r,i=s*6,a=s*2,l=s*3;return i<1?t+(n-t)*s*6:a<1?n:l<2?t+(n-t)*(2/3-s)*6:t}function Pn(e,t,n,r){let s;n<=.5?s=n*(t+1):s=n+t-n*t;let a=s,l=n*2-a,u=ge(e+1/3,l,a),c=ge(e,l,a),_=ge(e-1/3,l,a);return[u,c,_,r]}function ye(e,t,n,r){return ie(ae(e),s=>ie(ae(t),i=>ie(ae(n),a=>ie(ae(r),l=>new b(new kn(s,i,a,l))))))}function $e(e,t,n){return ye(e,t,n,1)}function Tn(e){if(e instanceof ht){let t=e.r,n=e.g,r=e.b,s=e.a;return[t,n,r,s]}else{let t=e.h,n=e.s,r=e.l,s=e.a;return Pn(t,n,r,s)}}function nt(e){let t=Tn(e),n,r,s,i;n=t[0],r=t[1],s=t[2],i=t[3];let a=u=>{let c,p=et(u,1e4),h=Je(p),w=h;c=Qe(w,100);let d=c,v;if(d instanceof b)v=d[0];else throw L("let_assert",tt,"gleam_community/colour",706,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:d,start:20510,end:20646,pattern_start:20521,pattern_end:20526});return v},l=u=>{let c,p=et(u,1e3),h=Je(p),w=h;c=Qe(w,1e3);let d=c,v;if(d instanceof b)v=d[0];else throw L("let_assert",tt,"gleam_community/colour",718,"to_css_rgba_string","Pattern match failed, no pattern matched the value.",{value:d,start:20768,end:20903,pattern_start:20779,pattern_end:20784});return v};return vn(o(["rgba(",se(a(n))+"%,",se(a(r))+"%,",se(a(s))+"%,",se(l(i)),")"]),"")}const Sn=new ht(.9607843137254902,.4745098039215686,0,1);function An(e){return Math.sin(e)}function En(){return Math.PI}function Ln(e,t){return Math.atan2(e,t)}function In(e){return Math.cos(e)}function Mn(e,t){return Ln(e,t)}function On(e){return In(e)}function fe(e){return An(e)}function Re(e,t){let n=e*On(t),r=e*fe(t);return[n,r]}function Fe(){return En()}function J(){return 2*Fe()}function jn(){return Math.PI}class dt extends f{}class Ce extends f{constructor(t,n){super(),this[0]=t,this.closed=n}}class wt extends f{constructor(t,n,r){super(),this.radius=t,this.start=n,this.end=r}}class qn extends f{constructor(t,n){super(),this.text=t,this.style=n}}class Kn extends f{constructor(t,n,r){super(),this[0]=t,this.width_px=n,this.height_px=r}}class gt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Be extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Nn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class xt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class De extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class bt extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class vt extends f{constructor(t){super(),this[0]=t}}class Rn extends f{}class yt extends f{}class Fn extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class me extends f{constructor(t){super(),this[0]=t}}function $t(e){return new me(e)}function Xe(){return new dt}function ze(e){return new Ce(e,!0)}function y(e){return new Ce(e,!1)}function He(e,t){return ze(o([[0,0],[e,0],[e,t],[0,t]]))}function A(e,t,n){return new xt(e,[t,n])}function re(e,t){return A(e,t,0)}function Ye(e,t){return A(e,0,t)}function Cn(e,t){return new De(e,[t,1])}function oe(e,t){return new De(e,[t,t])}function mt(e,t){return new bt(e,t)}function C(e,t){return new gt(e,t)}function kt(e,t,n){return new Be(e,new Fn(t,n))}function Y(e){return new Be(e,new yt)}function k(e){return new vt(e)}function Pt(e){return new wt(e,new me(0),new me(2*jn()))}class ke extends f{constructor(t){super(),this[0]=t}}class Pe extends f{constructor(t){super(),this[0]=t}}class Bn extends f{constructor(t){super(),this[0]=t}}class Te extends f{constructor(t,n){super(),this[0]=t,this[1]=n}}class Se extends f{constructor(t){super(),this[0]=t}}class Tt extends f{constructor(t){super(),this[0]=t}}class St extends f{}class At extends f{}class Et extends f{}class Lt extends f{}class Dn extends f{}class Xn extends f{}class zn extends f{}class Hn extends f{}class Yn extends f{}class Un extends f{}class Vn extends f{}class Wn extends f{}class Gn extends f{}class Ae extends f{}class Zn extends f{}class ue extends f{}class Jn extends f{}class Qn extends f{}function er(e){return document.querySelector(e).getContext("2d")}function It(e){window.requestAnimationFrame(t=>{e(t)})}function xe(e,t){window.addEventListener(e,t)}function tr(e){return e.keyCode}function U(e,t){typeof window.PAINT_STATE>"u"&&(window.PAINT_STATE={}),window.PAINT_STATE[t]=e}function V(e){return window.PAINT_STATE?e in window.PAINT_STATE?new b(window.PAINT_STATE[e]):new z(void 0):new z(void 0)}function nr(e){return e.canvas.clientWidth}function rr(e){return e.canvas.clientHeight}function sr(e,t){const n=e.canvas.getBoundingClientRect(),r=e.canvas.width/n.width,s=e.canvas.height/n.height;return[(t.clientX-n.left)*r,(t.clientY-n.top)*s]}function ir(e,t,n,r){let s=Ct(t)?Bt(t).buttons:0,i=e.buttons;return r?s=~s:i=~i,!!(s&i&1<<n)}function ar(e){e.reset()}function lr(e,t,n,r,s,i){e.beginPath(),e.arc(0,0,t,n,r),s&&e.fill(),i&&e.stroke()}function ur(e,t,n,r,s){e.beginPath(),e.moveTo(0,0);let i=!1;for(const a of t){let l=a[0],u=a[1];i?e.lineTo(l,u):(e.moveTo(l,u),i=!0)}n&&e.closePath(),r&&n&&e.fill(),s&&e.stroke()}function cr(e,t,n){e.font=n,e.fillText(t,0,0)}function D(e){e.save()}function X(e){e.restore()}function fr(e,t){e.fillStyle=t}function or(e,t){e.strokeStyle=t}function _r(e,t){e.lineWidth=t}function pr(e,t,n){e.translate(t,n)}function hr(e,t,n){e.scale(t,n)}function dr(e,t){e.rotate(t)}function wr(e,t,n,r){e.drawImage(t,0,0,n,r)}function gr(e,t){e.imageSmoothingEnabled=t}const Q="src/paint/canvas.gleam";class xr extends f{constructor(t,n){super(),this.width=t,this.height=n}}class ce extends f{constructor(t,n){super(),this.fill=t,this.stroke=n}}function R(e,t,n){for(;;){let r=e,s=t,i=n;if(r instanceof dt)return;if(r instanceof Ce){let a=r[0],l=r.closed;return ur(s,a,l,i.fill,i.stroke)}else if(r instanceof wt){let a=r.radius,l=r.start,u=r.end,c;c=l[0];let _;return _=u[0],lr(s,a,c,_,i.fill,i.stroke)}else if(r instanceof qn){let a=r.text,l=r.style,u,c;return u=l.size_px,c=l.font_family,D(s),cr(s,a,sn(u)+"px "+c),X(s)}else if(r instanceof Kn){let a=r.width_px,l=r.height_px,u=r[0].id,c=V(u),_;if(c instanceof b)_=c[0];else throw L("let_assert",Q,"paint/canvas",231,"display_on_rendering_context","Pattern match failed, no pattern matched the value.",{value:c,start:6608,end:6657,pattern_start:6619,pattern_end:6628});return wr(s,_,a,l)}else if(r instanceof gt){let a=r[0],l=r[1];return D(s),fr(s,nt(l)),R(a,s,new ce(!0,i.stroke)),X(s)}else if(r instanceof Be){let a=r[0],l=r[1];if(l instanceof yt)e=a,t=s,n=new ce(i.fill,!1);else{let u=l[0],c=l[1];return D(s),or(s,nt(u)),_r(s,c),R(a,s,new ce(i.fill,!0)),X(s)}}else if(r instanceof Nn){let a=r[0],l=r[1];return D(s),gr(s,l instanceof Rn),R(a,s,i),X(s)}else if(r instanceof xt){let a=r[0],l=r[1],u,c;return u=l[0],c=l[1],D(s),pr(s,u,c),R(a,s,i),X(s)}else if(r instanceof De){let a=r[0],l=r[1],u,c;return u=l[0],c=l[1],D(s),hr(s,u,c),R(a,s,i),X(s)}else if(r instanceof bt){let a=r[0],l=r[1],u;return u=l[0],D(s),dr(s,u),R(a,s,i),X(s)}else{let a=r[0];if(a instanceof g)return;{let l=a.head,u=a.tail;R(l,s,i),e=new vt(u),t=s,n=i}}}}function br(e){return e===32?new P(new Dn):e===37?new P(new St):e===38?new P(new Et):e===39?new P(new At):e===40?new P(new Lt):e===87?new P(new Xn):e===65?new P(new zn):e===83?new P(new Hn):e===68?new P(new Yn):e===90?new P(new Un):e===88?new P(new Vn):e===67?new P(new Wn):e===18?new P(new Gn):e===27?new P(new Ae):e===8?new P(new Zn):new Dt}const vr=new ce(!1,!0);function Mt(e,t,n,r){return s=>{let i=V(r),a;if(i instanceof b)a=i[0];else throw L("let_assert",Q,"paint/canvas",399,"get_tick_func","Pattern match failed, no pattern matched the value.",{value:i,start:11581,end:11644,pattern_start:11592,pattern_end:11609});let l=n(a,new ke(s));U(l,r);let u=t(l);return ar(e),R(u,e,vr),It(Mt(e,t,n,r))}}function yr(e,t,n,r){let s=er(r),i=e(new xr(nr(s),rr(s)));U(i,r);let a=(u,c)=>xe(u,_=>{let p=br(tr(_));if(p instanceof P){let h=p[0],w=V(r),d;if(w instanceof b)d=w[0];else throw L("let_assert",Q,"paint/canvas",292,"interact","Pattern match failed, no pattern matched the value.",{value:w,start:8332,end:8391,pattern_start:8343,pattern_end:8356});let v=t(d,c(h));return U(v,r)}else return});a("keydown",u=>new Pe(u)),a("keyup",u=>new Bn(u)),xe("mousemove",u=>{let c=sr(s,u),_,p;_=c[0],p=c[1];let h=V(r),w;if(h instanceof b)w=h[0];else throw L("let_assert",Q,"paint/canvas",309,"interact","Pattern match failed, no pattern matched the value.",{value:h,start:8863,end:8922,pattern_start:8874,pattern_end:8887});let d=t(w,new Te(_,p));U(d,r)});let l=(u,c,_)=>xe(u,p=>{let h="PAINT_PREVIOUS_MOUSE_INPUT_FOR_"+r,w=V(h);U(p,h);let d=j=>ir(p,w,j,_),v=j=>{let $=V(r),q;if($ instanceof b)q=$[0];else throw L("let_assert",Q,"paint/canvas",338,"interact","Pattern match failed, no pattern matched the value.",{value:$,start:9856,end:9915,pattern_start:9867,pattern_end:9880});let B=t(q,c(j));return U(B,r)};d(0)&&v(new ue),d(1)&&v(new Jn),d(2)&&v(new Qn)});return l("mousedown",u=>new Se(u),!0),l("mouseup",u=>new Tt(u),!1),It(Mt(s,n,t,r))}class N extends f{constructor(t,n){super(),this.x=t,this.y=n}}function $r(e){return o([e.x,e.y])}function Ot(e,t,n){return new N(n(e.x,t.x),n(e.y,t.y))}const mr="src/vec/vec2f.gleam";function kr(e,t){return Ot(e,t,gn)}function Pr(e){let n=$r(e),r=ne(n,s=>s*s);return wn(r)}function Tr(e,t){let r=Ot(e,t,xn);return Pr(r)}function Sr(e,t){let n,r=Tr(e,t);n=hn(r);let s=n,i;if(s instanceof b)i=s[0];else throw L("let_assert",mr,"vec/vec2f",385,"distance","Pattern match failed, no pattern matched the value.",{value:s,start:8217,end:8288,pattern_start:8228,pattern_end:8240});return i}const G="src/app.gleam";class K extends f{constructor(t,n,r,s,i,a,l,u,c){super(),this.avatar=t,this.camera=n,this.speed=r,this.objects=s,this.mouse_pos=i,this.drag=a,this.current_time=l,this.paused=u,this.consts=c}}class de extends f{constructor(t,n){super(),this.pos=t,this.dir=n}}let rt=class extends f{constructor(t,n,r){super(),this.pos=t,this.height=n,this.kind=r}};class jt extends f{}class Ar extends f{}class qt extends f{constructor(t,n){super(),this.lagging_dir=t,this.start_move_time=n}}class we extends f{}class Er extends f{constructor(t){super(),this.start_pos=t}}class H extends f{}class Kt extends f{}class Lr extends f{constructor(t,n,r,s,i,a,l){super(),this.background_picture=t,this.shadow_picture=n,this.color_dark_blue=r,this.color_white_transparent=s,this.color_yellow=i,this.color_orange=a,this.color_dark_blue_transparent=l}}function le(e,t){return new K(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new we,e.current_time,t,e.consts)}function st(e){return e instanceof H?new Kt:new H}function Ir(e,t){let n=e.speed*t,r=Re(n,e.avatar.dir),s,i;return s=r[0],i=r[1],new K((()=>{let a=e.avatar;return new de(kr(e.avatar.pos,new N(s,i)),a.dir)})(),e.camera,e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function Ee(e,t){let n;if(e==="a")n=y(o([[3,1],[11,1],[11,11],[1,11],[1,5],[11,5]]));else if(e==="b")n=y(o([[1,3],[11,3],[11,11],[1,11],[1,-1]]));else if(e==="c")n=y(o([[11,11],[1,11],[1,1],[11,1],[11,3]]));else if(e==="d"){let s=Ee("b",t),i=Cn(s,-1);n=re(i,12)}else if(e==="e")n=y(o([[9,11],[1,11],[1,1],[11,1],[11,7],[1,7]]));else if(e==="g")n=k(o([y(o([[0,1],[11,1],[11,7],[1,7],[1,1]])),y(o([[3,7],[3,11],[11,11],[11,13]]))]));else if(e==="i")n=k(o([y(o([[6,-2],[6,0]])),y(o([[2,3],[6,3],[6,11]])),y(o([[0,11],[12,11]]))]));else if(e==="j")n=k(o([y(o([[11,-2],[11,0]])),y(o([[11,2],[11,11],[1,11],[1,9]]))]));else if(e==="l")n=y(o([[12,11],[1,11],[1,0]]));else if(e==="m")n=k(o([y(o([[1,12],[1,1],[11,1],[11,12]])),y(o([[6,1],[6,12]]))]));else if(e==="n")n=y(o([[1,12],[1,1],[9,1],[9,3],[11,3],[11,12]]));else if(e==="o")n=y(o([[0,1],[11,1],[11,11],[1,11],[1,1]]));else if(e==="r")n=y(o([[1,12],[1,1],[11,1],[11,3]]));else if(e==="s")n=y(o([[11,1],[2,1],[2,6],[11,6],[11,11],[1,11],[1,9]]));else if(e==="t")n=k(o([y(o([[0,2],[12,2]])),y(o([[5,-1],[5,11],[12,11]]))]));else if(e==="v")n=y(o([[11,0],[11,11],[3,11],[3,7],[1,7],[1,0]]));else if(e==="y")n=k(o([y(o([[11,0],[11,13],[1,13]])),y(o([[11,9],[1,9],[1,0]]))]));else if(e==="←")n=k(o([y(o([[6,11],[5,11],[1,7],[1,5],[5,1],[6,1]])),y(o([[1,6],[12,6]]))]));else if(e==="→"){let s=Ee("←",t),i=mt(s,$t(Fe()));n=A(i,12,12)}else n=Xe();return kt(n,t,2)}function Mr(e,t,n){let r=fe(t/400)*.1,s=fe(t/1600)*6,i=Ee(e,n),a=C(i,n),l=Y(a),u=A(l,-6,-6),c=mt(u,$t(r));return A(c,6,6+s)}function Or(e,t){let n=e/2e3,r=ze((()=>{let i=Ke(0,10);return ne(i,a=>{let l=J()/10*a+n,u;return a%2===0?u=250:u=140,Re(u,l)})})()),s=C(r,t.color_yellow);return kt(s,t.color_orange,10)}function jr(e){let t=Pt(1),n=C(t,e.color_yellow);return Y(n)}function qr(e,t,n,r){return e instanceof jt?n?jr(r):Or(t,r):n?Xe():r.shadow_picture}function Kr(e){let t=He(200,5e3),n=re(t,-100),r=C(n,e);return Y(r)}function Nr(e){let t=He(4,12),n=k(o([t,A(t,8,0)])),r=C(n,e);return Y(r)}function Rr(e){let t=ze(o([[2,0],[11,6],[2,12]])),n=C(t,e);return Y(n)}function Fr(e,t){return k(o([(()=>{let n=Pt(15),r=C(n,t.color_white_transparent);return Y(r)})(),(()=>{if(e instanceof H){let n=Rr(t.color_dark_blue);return A(n,-6,-6)}else{let n=Nr(t.color_dark_blue);return A(n,-6,-6)}})()]))}function Nt(e,t,n){let r=100,s=e.start_move_time,i=s+r;if(n>=i)return t;{let l=F(n-s,r);return t*l+e.lagging_dir*(1-l)}}function Cr(e){return F(1,F(e,.2)+1)}function Br(e,t){let n=Re(e,t),r,s;return r=n[0],s=n[1],new N(r,s)}function Rt(e,t,n,r){return Mn(r-t,n-e)}function Dr(e){for(;;){let t=e,n=J(),r=Fe(),s=Ne(r),i=t;if(i>r)e=i-n;else{let a=t;if(a<=s)e=a+n;else return t}}}function be(e,t,n){return(t-e)*n+e}function it(e,t,n,r,s,i,a,l,u){let c=u,_=un(F(l,c)),p=Ke(0,u),h=ne(p,w=>{let d=w,v=F(d,c-1),m=$e(be(e,r,v),be(t,s,v),be(n,i,v)),I;if(m instanceof b)I=m[0];else throw L("let_assert",G,"app",818,"view_gradient","Pattern match failed, no pattern matched the value.",{value:m,start:18751,end:18978,pattern_start:18762,pattern_end:18774});let O=He(a,_),j=Ye(O,_*d),$=C(j,I);return Y($)});return k(h)}const _e=300,pe=300,te=new N(150,150);function Xr(){let e=o([it(.85,.6,.9,.7,.4,.98,_e,pe/2,50),(()=>{let t=it(.6,.4,.95,.6,.7,.8,_e,pe/2,50);return Ye(t,te.y)})()]);return k(e)}function zr(e){let t=.8*J(),n=ye(0,1,1,.5),r;if(n instanceof b)r=n[0];else throw L("let_assert",G,"app",22,"init","Pattern match failed, no pattern matched the value.",{value:n,start:481,end:558,pattern_start:492,pattern_end:519});let s=$e(.6,.7,.7),i;if(s instanceof b)i=s[0];else throw L("let_assert",G,"app",23,"init","Pattern match failed, no pattern matched the value.",{value:s,start:561,end:624,pattern_start:572,pattern_end:591});let a=ye(.75,.5,.4,.05),l;if(a instanceof b)l=a[0];else throw L("let_assert",G,"app",24,"init","Pattern match failed, no pattern matched the value.",{value:a,start:627,end:714,pattern_start:638,pattern_end:669});let u=$e(.12,1,.7),c;if(u instanceof b)c=u[0];else throw L("let_assert",G,"app",26,"init","Pattern match failed, no pattern matched the value.",{value:u,start:717,end:778,pattern_start:728,pattern_end:744});let _,p=Ke(0,200);_=Gt(p,w=>{let d=w,v=Br((d+1)*2+10,d/20*J()),m=fe(d/5*J());return o([new rt(v,m,new jt),new rt(v,-10,new Ar)])});let h=_;return new K(new de(new N(0,0),t),new qt(t,0),.01,h,new N(0,0),new we,0,new H,new Lr(Xr(),Kr(l),i,r,c,Sn,l))}const Hr=.005,Yr=.4;function at(e,t){return new K(e.avatar,e.camera,_t(e.speed+t*(e.speed*.05),Hr,Yr),e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}const Ur=.09;function Vr(e,t){return new de(e.pos,e.dir+Ur*t)}function Le(e,t){return new K(Vr(e.avatar,t),new qt(Nt(e.camera,e.avatar.dir,e.current_time),e.current_time),e.speed,e.objects,e.mouse_pos,e.drag,e.current_time,e.paused,e.consts)}function Wr(e,t){let n=e.drag;if(n instanceof we)return e;{let r=n.start_pos,s,i=(e.mouse_pos.x-r.x)*.001;s=_t(i,-.02,.02);let l=s*t;return Le(e,l)}}function Gr(e,t){if(e.paused instanceof H)if(t instanceof ke){let r=t[0];return new K(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.consts)}else{if(t instanceof Pe)return t[0]instanceof Ae?le(e,st(e.paused)):e;if(t instanceof Te){let r=t[0],s=t[1];return new K(e.avatar,e.camera,e.speed,e.objects,new N(r,s),e.drag,e.current_time,e.paused,e.consts)}else return t instanceof Se&&t[0]instanceof ue?le(e,new Kt):e}else if(t instanceof ke){let r=t[0],s=r-e.current_time,i=new K(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,e.drag,r,e.paused,e.consts),a=Ir(i,s);return Wr(a,s)}else if(t instanceof Pe){let r=t[0];return r instanceof St?Le(e,-1):r instanceof At?Le(e,1):r instanceof Et?at(e,1):r instanceof Lt?at(e,-1):r instanceof Ae?le(e,st(e.paused)):e}else if(t instanceof Te){let r=t[0],s=t[1];return new K(e.avatar,e.camera,e.speed,e.objects,new N(r,s),e.drag,e.current_time,e.paused,e.consts)}else return t instanceof Se?t[0]instanceof ue?e.mouse_pos.x<=30&&e.mouse_pos.y>=pe-30?le(e,new H):new K(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new Er(e.mouse_pos),e.current_time,e.paused,e.consts):e:t instanceof Tt&&t[0]instanceof ue?new K(e.avatar,e.camera,e.speed,e.objects,e.mouse_pos,new we,e.current_time,e.paused,e.consts):e}const Ie=.7853981634;function Zr(e,t,n,r,s){let i=Rt(0,0,n,e.height),a=n>50,l;a?l=1:l=Cr(n);let u=l,c=new N(F(t*te.x,Ie),Ne(F(i*te.x,Ie))),_=qr(e.kind,r,a,s),p=oe(_,u);return A(p,c.x,c.y)}const Ue=12,Me=3;function Oe(e,t){let n=ve(e);return((Ue+Me)*n-Me)*t}function je(e,t,n){let r=yn(e),s=ct(r,(i,a)=>{let l=Mr(i,t+a*8e3,n);return re(l,a*(Ue+Me))});return k(s)}function Jr(e,t){let n="cielos",r=1.5,s=Oe(n,r),i="by agj",a=.75,l=Oe(i,a),u=k(o([(()=>{let c=je(n,e,t.color_dark_blue);return oe(c,r)})(),(()=>{let c=je(i,e,t.color_dark_blue),_=oe(c,a);return A(_,s-l,40)})()]));return re(u,_e*.5-s*.5)}function Qr(e,t){let n=o(["move ←→","collect stars"]),r=.75,s,a=ft(n,(h,w)=>ut(pt(ve(h),ve(w)))),l=Xt(a),u=$n(l,h=>Oe(h,r));s=mn(u,0);let c=s,_=k(ct(n,(w,d)=>{let v=je(w,e,t.color_dark_blue);return Ye(v,Ue*2.5*d)})),p=oe(_,r);return re(p,_e*.5-c*.5)}function es(e){return k(o([e.paused instanceof H?k(o([(()=>{let n=Jr(e.current_time,e.consts);return A(n,0,80)})(),(()=>{let n=Qr(e.current_time,e.consts);return A(n,0,200)})()])):Xe(),(()=>{let t=Fr(e.paused,e.consts);return A(t,17,pe-17)})()]))}function ts(e){let t,n=e.avatar;t=new de(n.pos,Nt(e.camera,e.avatar.dir,e.current_time));let r=t,s,i=k((()=>{let l=e.objects,u=Ht(l,_=>{let p=Rt(r.pos.x,r.pos.y,_.pos.x,_.pos.y),h=Dr(p-r.dir),w=Ze(Sr(r.pos,_.pos));return Ze(h)<=Ie?new b([_,h,w]):new z(void 0)}),c=ft(u,(_,p)=>ut(fn(_[2],p[2])));return ne(c,_=>Zr(_[0],_[1],_[2],e.current_time,e.consts))})());s=A(i,te.x,te.y);let a=s;return k(o([e.consts.background_picture,a,es(e)]))}function ns(){return yr(zr,Gr,ts,"#app")}ns();document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1});const Ve=(e,t)=>n=>{const r=n.touches?.item(0),s=r?{screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY}:{};e==="mousedown"&&window.dispatchEvent(new MouseEvent("mousemove",{...s})),window.dispatchEvent(new MouseEvent(e,{buttons:t,...s}))};window.addEventListener("touchstart",Ve("mousedown",1));window.addEventListener("touchend",Ve("mouseup",0));window.addEventListener("touchmove",Ve("mousemove",void 0));
